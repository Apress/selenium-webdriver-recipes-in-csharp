
<!DOCTYPE html>
<html data-bug-blocked="20860" data-bug-product="Browser Test/Tools WG" data-bug-component="WebDriver" lang="en" dir="ltr" typeof="bibo:Document w3p:WD" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta lang="" property="dc:language" content="en"><meta charset="utf-8">
<title>WebDriver</title>

<style>
/* temporary workaround for bug 1203649 in Gecko */
body { -moz-osx-font-smoothing: grayscale }

pre.IDL {
 border-top: 1px solid #90b8de;
 border-bottom: 1px solid #90b8de;
 padding: 1em;
 line-height: 120%;
}
pre.IDL::before {
 content: "WebIDL";
 display: block;
 width: 150px;
 background: rgb(144,184,222);
 color: white;
 font-family: initial;
 padding: 3px;
 font-weight: bold;
 margin: -1em 0 1em -1em;
}

#respec-ui { top: 80px !important }

#respecHeader h2 { margin-top: inherit }

body { max-width: 60em; margin: 0 auto !important; line-height: 1.5; }

h2, h3, h4, h5, h6 { margin-top: 3em }
h1 + h2 { margin-top: inherit }
hr { display: none }
pre { overflow: auto }
code { font-size: 14px }

/* reset link styles */
a[href]:link, a[href]:visited { text-decoration: none; border-bottom: none; }
a[href]:link:hover, a[href]:visited:hover, a[href]:link:focus, a[href]:visited:focus { text-decoration: underline; background: none; }
a[href]:link { color: rgb(0,0,204) }
a[href]:visited { color: rgb(102,0,153) }
a[href]:link:active, a[href]:visited:active { color: rgb(204,0,0) }

dl.switch { padding-left: 2em }
dl.switch > dt { text-indent: -1.5em }
dl.switch > dt > * { text-indent: 0 }
dl.switch > dt:before {
 content: "\21AA";
 padding: 0 0.5em 0 0;
 display: inline-block;
 width: 1em;
 text-align: right;
 line-height: 0.5em;
}

dl dt { margin: .75em 0 .25em }
dd > p { margin-top: 0 }
dd ul { margin: 1em 0 1em }
</style>



<script src="bug-assist.js"></script>

<style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.ednote-title, div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title, div.ednote-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.ednote-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.ednote, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .ednote > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .ednote, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.ednote,  div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.ednote, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note, .ednote {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    sans-serif;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlIterable*/
.idlIterableKeyType, .idlIterableValueType {
    color:  #005a9c;
}

/*.idlMaplike*/
.idlMaplikeKeyType, .idlMaplikeValueType {
    color:  #005a9c;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/W3C-WD"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><script id="initialUserConfig" type="application/json">{
  "specStatus": "ED",
  "shortName": "webdriver",
  "subtitle": "Living Document",
  "edDraftURI": "https://w3c.github.io/webdriver/webdriver-spec.html",
  "editors": [
    {
      "name": "Simon Stewart",
      "url": "http://www.rocketpoweredjetpants.com/",
      "company": "Facebook",
      "companyURL": "https://www.facebook.com",
      "w3cid": "50228"
    },
    {
      "name": "David Burns",
      "url": "http://www.theautomatedtester.co.uk/",
      "company": "Mozilla",
      "companyURL": "https://www.mozilla.org",
      "w3cid": "50184"
    }
  ],
  "otherLinks": [
    {
      "key": "Participate",
      "data": [
        {
          "value": "GitHub w3c/webdriver",
          "href": "https://github.com/w3c/webdriver"
        },
        {
          "value": "Open bugs",
          "href": "https://www.w3.org/Bugs/Public/showdependencytree.cgi?id=20860&hide_resolved=1"
        },
        {
          "value": "#webdriver on irc.w3.org",
          "href": "irc://irc.w3.org/"
        }
      ]
    }
  ],
  "wg": "Browser Testing and Tools Working Group",
  "wgURI": "http://www.w3.org/testing/browser/",
  "wgPublicList": "public-browser-tools-testing",
  "wgPatentURI": "http://www.w3.org/2004/01/pp-impl/49799/status",
  "noIDLSorting": true
}</script></head><body class="h-entry" role="document" id="respecDocument"><div class="head" role="contentinfo" id="respecHeader">
  <p>
      
        
            <a href="http://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/Icons/w3c_home" alt="W3C"></a>
            
            
        
      
  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">WebDriver</h1>
  
    <h2 property="bibo:subtitle" id="subtitle">Living Document</h2>
  
  <h2 id="w3c-working-draft-21-september-2015"><abbr title="World Wide Web Consortium">W3C</abbr> Working Draft <time property="dcterms:issued" class="dt-published" datetime="2015-09-21">21 September 2015</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2015/WD-webdriver-20150921/">http://www.w3.org/TR/2015/WD-webdriver-20150921/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/webdriver/">http://www.w3.org/TR/webdriver/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/webdriver/webdriver-spec.html">https://w3c.github.io/webdriver/webdriver-spec.html</a></dd>
    
    
    
    
    
    
      <dt>Previous version:</dt>
      <dd><a rel="dcterms:replaces" href="http://www.w3.org/TR/2015/WD-webdriver-20150918/">http://www.w3.org/TR/2015/WD-webdriver-20150918/</a></dd>
    
    
    <dt>Editors:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="50228"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Simon Stewart"><a class="u-url url p-name fn" property="foaf:homepage" href="http://www.rocketpoweredjetpants.com/">Simon Stewart</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.facebook.com">Facebook</a></span>
<span property="rdf:rest" resource="_:editor1"></span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="50184"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="David Burns"><a class="u-url url p-name fn" property="foaf:homepage" href="http://www.theautomatedtester.co.uk/">David Burns</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.mozilla.org">Mozilla</a></span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>

    
    
      
        
          <dt>Participate:</dt>
          
             
                
                  <dd>
                    <a href="https://github.com/w3c/webdriver">
                      GitHub w3c/webdriver
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://www.w3.org/Bugs/Public/showdependencytree.cgi?id=20860&amp;hide_resolved=1">
                      Open bugs
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="irc://irc.w3.org/">
                      #webdriver on irc.w3.org
                    </a>
                  </dd>
                
             
          
        
      
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2015
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
        
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        
          <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
        
        rules apply.
      </p>
    
  
  <hr>
</div><section id="abstract" class="introductory" property="dc:abstract"><h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
<p>WebDriver is a remote control interface
 that enables introspection and control of user agents.
 It provides a platform- and language-neutral wire protocol
 as a way for out-of-process programs
 to remotely instruct the behaviour of web browsers.

</p><p>Provided is a set of interfaces
 to discover and manipulate DOM elements in web documents
 and to control the behaviour of a user agent.
 It is primarily intended to allow web authors to write tests
 that automate a user agent from a separate controlling process,
 but may also be used in such a way as to allow in-browser scripts
 to control a — possibly separate — browser.

</p><p>The standard forms part of the
 <a href="http://www.w3.org/testing/Activity">Web Testing Activity</a>
 that authors a larger set of tools commonly used for testing.
</p></section><section id="sotd" class="introductory"><h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at http://www.w3.org/TR/.</em>
        </p>
        
          
          
          
          <p>
            This document was published by the <a href="http://www.w3.org/testing/browser/">Browser Testing and Tools Working Group</a> as a Working Draft.
            
              This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
            
            
              If you wish to make comments regarding this document, please send them to
              <a href="mailto:public-browser-tools-testing@w3.org">public-browser-tools-testing@w3.org</a>
              (<a href="mailto:public-browser-tools-testing-request@w3.org?subject=subscribe">subscribe</a>,
              <a href="http://lists.w3.org/Archives/Public/public-browser-tools-testing/">archives</a>).
            
            
            
            
            
              
              All comments are welcome.
              
            
          </p>
          
          
          
            <p>
              Publication as a Working Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
              Membership. This is a draft document and may be updated, replaced or obsoleted by other
              documents at any time. It is inappropriate to cite this document as other than work in
              progress.
            </p>
          
          
          
          <p>
            
              This document was produced by
              
              a group
               operating under the
              <a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
              Policy</a>.
            
            
            
              
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/49799/status" rel="disclosure">public list of any patent
                disclosures</a>
              
              made in connection with the deliverables of
              
              the group; that page also includes
              
              instructions for disclosing a patent. An individual who has actual knowledge of a patent
              which the individual believes contains
              <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
              Claim(s)</a> must disclose the information in accordance with
              <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
              6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
            
            
          </p>
          
            <p>This document is governed by the <a id="w3c_process_revision" href="http://www.w3.org/2015/Process-20150901/">1 September 2015 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
            </p>
          
          
        
      
    
  
</section><section id="toc"><h2 class="introductory" id="h-toc" resource="#h-toc"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2><ul class="toc" role="directory" id="respecContents"><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">1. </span>Conformance</a><ul class="toc"><li class="tocline"><a href="#dependencies" class="tocxref"><span class="secno">1.1 </span>Dependencies</a></li></ul></li><li class="tocline"><a href="#terminology" class="tocxref"><span class="secno">2. </span>Terminology</a></li><li class="tocline"><a href="#interface" class="tocxref"><span class="secno">3. </span>Interface</a></li><li class="tocline"><a href="#protocol" class="tocxref"><span class="secno">4. </span>Protocol</a><ul class="toc"><li class="tocline"><a href="#algorithms" class="tocxref"><span class="secno">4.1 </span>Algorithms</a></li><li class="tocline"><a href="#commands" class="tocxref"><span class="secno">4.2 </span>Commands</a></li><li class="tocline"><a href="#processing-model" class="tocxref"><span class="secno">4.3 </span>Processing Model</a></li><li class="tocline"><a href="#routing-requests" class="tocxref"><span class="secno">4.4 </span>Routing Requests</a></li><li class="tocline"><a href="#list-of-endpoints" class="tocxref"><span class="secno">4.5 </span>List of Endpoints</a></li><li class="tocline"><a href="#handling-errors" class="tocxref"><span class="secno">4.6 </span>Handling Errors</a></li><li class="tocline"><a href="#protocol-extensions" class="tocxref"><span class="secno">4.7 </span>Protocol Extensions</a></li></ul></li><li class="tocline"><a href="#capabilities" class="tocxref"><span class="secno">5. </span>Capabilities</a></li><li class="tocline"><a href="#sessions" class="tocxref"><span class="secno">6. </span>Sessions</a><ul class="toc"><li class="tocline"><a href="#new-session" class="tocxref"><span class="secno">6.1 </span>New Session</a></li><li class="tocline"><a href="#delete-session" class="tocxref"><span class="secno">6.2 </span>Delete Session</a></li><li class="tocline"><a href="#set-timeout" class="tocxref"><span class="secno">6.3 </span>Set Timeout</a></li></ul></li><li class="tocline"><a href="#navigation" class="tocxref"><span class="secno">7. </span>Navigation</a><ul class="toc"><li class="tocline"><a href="#get" class="tocxref"><span class="secno">7.1 </span>Get</a></li><li class="tocline"><a href="#get-current-url" class="tocxref"><span class="secno">7.2 </span>Get Current Url</a></li><li class="tocline"><a href="#back" class="tocxref"><span class="secno">7.3 </span>Back</a></li><li class="tocline"><a href="#forward" class="tocxref"><span class="secno">7.4 </span>Forward</a></li><li class="tocline"><a href="#refresh" class="tocxref"><span class="secno">7.5 </span>Refresh</a></li><li class="tocline"><a href="#get-title" class="tocxref"><span class="secno">7.6 </span>Get Title</a></li></ul></li><li class="tocline"><a href="#invalid-ssl-certificates" class="tocxref"><span class="secno">8. </span>Invalid SSL Certificates</a></li><li class="tocline"><a href="#command-contexts" class="tocxref"><span class="secno">9. </span>Command Contexts</a><ul class="toc"><li class="tocline"><a href="#get-window-handle" class="tocxref"><span class="secno">9.1 </span>Get Window Handle</a></li><li class="tocline"><a href="#close-window" class="tocxref"><span class="secno">9.2 </span>Close Window</a></li><li class="tocline"><a href="#switch-to-window" class="tocxref"><span class="secno">9.3 </span>Switch To Window</a></li><li class="tocline"><a href="#get-window-handles" class="tocxref"><span class="secno">9.4 </span>Get Window Handles</a></li><li class="tocline"><a href="#switch-to-frame" class="tocxref"><span class="secno">9.5 </span>Switch To Frame</a></li><li class="tocline"><a href="#switch-to-parent-frame" class="tocxref"><span class="secno">9.6 </span>Switch To Parent Frame</a></li><li class="tocline"><a href="#resizing-and-positioning-windows" class="tocxref"><span class="secno">9.7 </span>Resizing and Positioning Windows</a><ul class="toc"><li class="tocline"><a href="#get-window-size" class="tocxref"><span class="secno">9.7.1 </span>Get Window Size</a></li><li class="tocline"><a href="#set-window-size" class="tocxref"><span class="secno">9.7.2 </span>Set Window Size</a></li><li class="tocline"><a href="#maximize-window" class="tocxref"><span class="secno">9.7.3 </span>Maximize Window</a></li><li class="tocline"><a href="#fullscreen-window" class="tocxref"><span class="secno">9.7.4 </span>Fullscreen Window</a></li></ul></li></ul></li><li class="tocline"><a href="#elements" class="tocxref"><span class="secno">10. </span>Elements</a><ul class="toc"><li class="tocline"><a href="#element-displayedness" class="tocxref"><span class="secno">10.1 </span>Element Displayedness</a></li><li class="tocline"><a href="#get-active-element" class="tocxref"><span class="secno">10.2 </span>Get Active Element</a></li></ul></li><li class="tocline"><a href="#element-retrieval" class="tocxref"><span class="secno">11. </span>Element Retrieval</a><ul class="toc"><li class="tocline"><a href="#css-selectors" class="tocxref"><span class="secno">11.1 </span>CSS Selectors</a></li><li class="tocline"><a href="#ecmascript" class="tocxref"><span class="secno">11.2 </span>ECMAScript</a></li><li class="tocline"><a href="#link-text" class="tocxref"><span class="secno">11.3 </span>Link Text</a></li><li class="tocline"><a href="#partial-link-text" class="tocxref"><span class="secno">11.4 </span>Partial Link Text</a></li><li class="tocline"><a href="#xpath" class="tocxref"><span class="secno">11.5 </span>XPath</a></li><li class="tocline"><a href="#find-element" class="tocxref"><span class="secno">11.6 </span>Find Element</a></li><li class="tocline"><a href="#find-elements" class="tocxref"><span class="secno">11.7 </span>Find Elements</a></li></ul></li><li class="tocline"><a href="#element-state" class="tocxref"><span class="secno">12. </span>Element State</a><ul class="toc"><li class="tocline"><a href="#is-element-displayed" class="tocxref"><span class="secno">12.1 </span>Is Element Displayed</a></li><li class="tocline"><a href="#is-element-selected" class="tocxref"><span class="secno">12.2 </span>Is Element Selected</a></li><li class="tocline"><a href="#get-element-attribute" class="tocxref"><span class="secno">12.3 </span>Get Element Attribute</a></li><li class="tocline"><a href="#get-element-property" class="tocxref"><span class="secno">12.4 </span>Get Element Property</a></li><li class="tocline"><a href="#get-element-css-value" class="tocxref"><span class="secno">12.5 </span>Get Element CSS Value</a></li><li class="tocline"><a href="#getelementtext" class="tocxref"><span class="secno">12.6 </span>getElementText()</a></li><li class="tocline"><a href="#get-element-tag-name" class="tocxref"><span class="secno">12.7 </span>Get Element Tag Name</a></li><li class="tocline"><a href="#get-element-rect" class="tocxref"><span class="secno">12.8 </span>Get Element Rect</a></li><li class="tocline"><a href="#is-element-enabled" class="tocxref"><span class="secno">12.9 </span>Is Element Enabled</a></li></ul></li><li class="tocline"><a href="#element-interaction" class="tocxref"><span class="secno">13. </span>Element Interaction</a><ul class="toc"><li class="tocline"><a href="#element-click" class="tocxref"><span class="secno">13.1 </span>Element Click</a></li><li class="tocline"><a href="#element-tap" class="tocxref"><span class="secno">13.2 </span>Element Tap</a></li><li class="tocline"><a href="#element-clear" class="tocxref"><span class="secno">13.3 </span>Element Clear</a></li><li class="tocline"><a href="#element-send-keys" class="tocxref"><span class="secno">13.4 </span>Element Send Keys</a></li></ul></li><li class="tocline"><a href="#executing-script" class="tocxref"><span class="secno">14. </span>Executing Script</a><ul class="toc"><li class="tocline"><a href="#execute-script" class="tocxref"><span class="secno">14.1 </span>Execute Script</a></li><li class="tocline"><a href="#execute-async-script" class="tocxref"><span class="secno">14.2 </span>Execute Async Script</a></li></ul></li><li class="tocline"><a href="#cookies" class="tocxref"><span class="secno">15. </span>Cookies</a><ul class="toc"><li class="tocline"><a href="#get-cookie" class="tocxref"><span class="secno">15.1 </span>Get Cookie</a></li><li class="tocline"><a href="#add-cookie" class="tocxref"><span class="secno">15.2 </span>Add Cookie</a></li><li class="tocline"><a href="#delete-cookie" class="tocxref"><span class="secno">15.3 </span>Delete Cookie</a></li></ul></li><li class="tocline"><a href="#interactions" class="tocxref"><span class="secno">16. </span>Interactions</a><ul class="toc"><li class="tocline"><a href="#interactable" class="tocxref"><span class="secno">16.1 </span>Interactable elements</a></li><li class="tocline"><a href="#low-level-actions" class="tocxref"><span class="secno">16.2 </span>Low-Level Actions</a><ul class="toc"><li class="tocline"><a href="#actions-endpoint" class="tocxref"><span class="secno">16.2.1 </span>Actions Endpoint</a><ul class="toc"><li class="tocline"><a href="#sending-an-action" class="tocxref"><span class="secno">16.2.1.1 </span>Sending an Action</a></li><li class="tocline"><a href="#releasing-all-actions" class="tocxref"><span class="secno">16.2.1.2 </span>Releasing all actions</a></li><li class="tocline"><a href="#action-commands" class="tocxref"><span class="secno">16.2.1.3 </span>Actions</a><ul class="toc"><li class="tocline"><a href="#general-actions" class="tocxref"><span class="secno">16.2.1.3.1 </span>General Actions</a></li><li class="tocline"><a href="#keyboard-actions" class="tocxref"><span class="secno">16.2.1.3.2 </span>Keyboard Actions</a></li><li class="tocline"><a href="#pointer-actions" class="tocxref"><span class="secno">16.2.1.3.3 </span>Pointer Actions</a></li><li class="tocline"><a href="#parallel-actions" class="tocxref"><span class="secno">16.2.1.3.4 </span>Parallel Actions</a></li></ul></li></ul></li></ul></li><li class="tocline"><a href="#high-level-commands" class="tocxref"><span class="secno">16.3 </span>High Level Commands</a><ul class="toc"><li class="tocline"><a href="#high-level-click" class="tocxref"><span class="secno">16.3.1 </span>Clicking</a><ul class="toc"><li class="tocline"><a href="#click" class="tocxref"><span class="secno">16.3.1.1 </span>click()</a></li></ul></li><li class="tocline"><a href="#touch" class="tocxref"><span class="secno">16.3.2 </span>Touch</a><ul class="toc"><li class="tocline"><a href="#void-tap" class="tocxref"><span class="secno">16.3.2.1 </span>void tap ()</a></li></ul></li><li class="tocline"><a href="#typing_keys" class="tocxref"><span class="secno">16.3.3 </span>Typing keys</a><ul class="toc"><li class="tocline"><a href="#clear" class="tocxref"><span class="secno">16.3.3.1 </span>clear()</a></li><li class="tocline"><a href="#sendkeys" class="tocxref"><span class="secno">16.3.3.2 </span>sendKeys()</a></li></ul></li></ul></li></ul></li><li class="tocline"><a href="#user-prompts" class="tocxref"><span class="secno">17. </span>User Prompts</a><ul class="toc"><li class="tocline"><a href="#dismiss-alert" class="tocxref"><span class="secno">17.1 </span>Dismiss Alert</a></li><li class="tocline"><a href="#accept-alert" class="tocxref"><span class="secno">17.2 </span>Accept Alert</a></li><li class="tocline"><a href="#get-alert-text" class="tocxref"><span class="secno">17.3 </span>Get Alert Text</a></li><li class="tocline"><a href="#send-alert-text" class="tocxref"><span class="secno">17.4 </span>Send Alert Text</a></li></ul></li><li class="tocline"><a href="#screen-capture" class="tocxref"><span class="secno">18. </span>Screen Capture</a><ul class="toc"><li class="tocline"><a href="#take-screenshot" class="tocxref"><span class="secno">18.1 </span>Take Screenshot</a></li><li class="tocline"><a href="#take-element-screenshot" class="tocxref"><span class="secno">18.2 </span>Take Element Screenshot</a></li></ul></li><li class="tocline"><a href="#thread-safety" class="tocxref"><span class="secno">A. </span>Thread Safety</a></li><li class="tocline"><a href="#privacy" class="tocxref"><span class="secno">B. </span>Privacy</a></li><li class="tocline"><a href="#security" class="tocxref"><span class="secno">C. </span>Security</a></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">D. </span>Acknowledgements</a></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">E. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">E.1 </span>Normative references</a></li></ul></li></ul></section>

<!-- ReSpec complains if removed completely -->


<section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
<!--OddPage--><h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Conformance</span></h2>

<p>All diagrams, examples, and notes in this specification are non-normative,
 as are all sections explicitly marked non-normative.
 Everything else in this specification is normative.

</p><p>The key words “<em class="rfc2119" title="MUST">MUST</em>”, “<em class="rfc2119" title="MUST NOT">MUST NOT</em>”, “<em class="rfc2119" title="REQUIRED">REQUIRED</em>”, “<em class="rfc2119" title="SHOULD">SHOULD</em>”,
 “<em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em>”, “<em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em>”, “<em class="rfc2119" title="MAY">MAY</em>”, and “<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>”
 in the normative parts of this document are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
 The key word “OPTIONALLY” in the normative parts of this document
 is to be interpreted with the same normative meaning as “<em class="rfc2119" title="MAY">MAY</em>” and “<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>”.

</p><p>Conformance requirements phrased as algorithms
 or specific steps may be implemented in any manner,
 so long as the end result is equivalent.

</p><p>The standard defines four broad conformance classes:

</p><dl>
 <dt><dfn data-dfn-type="dfn" id="dfn-local-end">Local End</dfn>
 </dt><dd><p>The local end represents the client side of the protocol,
  which is usually in the form of language-specific libraries
  providing an API on top of the WebDriver <a href="#protocol">protocol</a>.
  This specification does not place any restrictions on the details of those libraries
  above the level of the wire protocol.

  </p><div class="issue" id="issue-1"><div class="issue-title" aria-level="3" role="heading" id="h-issue1"><span>Issue 1</span></div><p class="">Define the requirements on the local end somewhere.

 </p></div></dd><dt><dfn data-dfn-type="dfn" id="dfn-remote-end">Remote End</dfn>
 </dt><dd>The remote end hosts the server side of the <a href="#protocol">protocol</a>.
  Defining the behaviour of a remote end in response to the WebDriver protocol
  forms the largest part of this specification.

 </dd><dt><dfn data-dfn-type="dfn" id="dfn-intermediary-node">Intermediary Node</dfn>
 </dt><dd>Intermediary nodes are those that act as proxies,
  implementing both the client and server sides of the <a href="#protocol">protocol</a>.
  Intermediary nodes must be black-box indistinguishable from a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>
  from the point of view of <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a>,
  and so are bound by the requirements on a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> in terms of the wire protocol.
  However they are not expected to implement <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> directly.

 </dd><dt><dfn data-dfn-type="dfn" id="dfn-endpoint-node">Endpoint Node</dfn>
 </dt><dd>An endpoint node is the final <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>
  in a chain of nodes that is not an <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary node</a>.
  The endpoint node is implemented by a user agent or a similar program.
  An endpoint node must be, like <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary nodes</a>,
  indistinguishable from a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>.
</dd></dl>

<section id="dependencies" typeof="bibo:Chapter" resource="#dependencies" property="bibo:hasPart">
<h3 id="h-dependencies" resource="#h-dependencies"><span property="xhv:role" resource="xhv:heading"><span class="secno">1.1 </span>Dependencies</span></h3>

<p>This specification relies on several other underlying specifications.

<!--
 Each item in the list begins with a comment
 with term described using the characters [a-zA-Z].
 This is so that the list items can be piped through sort(1)
 to automatically sort each list alphabetically.
-->

</p><dl>
 <dt>DOM
 </dt><dd><p>The following terms are defined in the Document Object Model specification: [<cite><a class="bibref" href="#bib-DOM">DOM</a></cite>]
  </p><ul>
   <!-- Attribute --> <li><dfn data-dfn-type="dfn" id="dfn-attribute"><a href="https://dom.spec.whatwg.org/#concept-attribute">Attribute</a></dfn>
   <!-- comapreDocumentPosition --> </li><li><dfn data-dfn-type="dfn" id="dfn-comparedocumentposition"><a href="https://dom.spec.whatwg.org/#dom-node-comparedocumentposition">compareDocumentPosition</a></dfn>
   <!-- Document element --> </li><li><dfn data-dfn-type="dfn" id="dfn-document-element"><a href="https://dom.spec.whatwg.org/#document-element">Document element</a></dfn>
   <!-- Document --> </li><li><dfn data-dfn-type="dfn" id="dfn-document"><a href="https://dom.spec.whatwg.org/#concept-document">Document</a></dfn>
   <!-- DOCUMENT_POSITION_DISCONNECTED --> </li><li><dfn data-dfn-type="dfn" id="dfn-document_position_disconnected"><a href="https://dom.spec.whatwg.org/#dom-node-document_position_disconnected">DOCUMENT_POSITION_DISCONNECTED</a></dfn> (1)
   <!-- Document type --> </li><li><dfn data-dfn-type="dfn" id="dfn-document-type"><a href="https://dom.spec.whatwg.org/#concept-document-type">Document type</a></dfn>
   <!-- Document URL --> </li><li><dfn data-dfn-type="dfn" id="dfn-document-url"><a href="https://dom.spec.whatwg.org/#concept-document-url">Document URL</a></dfn>
   <!-- Element --> </li><li><dfn data-dfn-type="dfn" id="dfn-element"><a href="https://dom.spec.whatwg.org/#concept-element">Element</a></dfn>
   <!-- Equals --> </li><li><dfn data-dfn-type="dfn" id="dfn-equals"><a href="https://dom.spec.whatwg.org/#concept-node-equals">Equals</a></dfn>
   <!-- Get an attribute by name --> </li><li><dfn data-dfn-type="dfn" id="dfn-get-an-attribute-by-name"><a href="https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name">Get an attribute by name</a></dfn>
   <!-- hasAttribute --> </li><li><dfn data-dfn-type="dfn" id="dfn-hasattribute"><a href="https://dom.spec.whatwg.org/#dom-element-hasattribute">hasAttribute</a></dfn>
   <!-- Node --> </li><li><dfn data-dfn-type="dfn" id="dfn-node"><a href="https://dom.spec.whatwg.org/#concept-node">Node</a></dfn>
   <!-- NodeList --> </li><li><dfn data-dfn-type="dfn" id="dfn-nodelist"><a href="https://dom.spec.whatwg.org/#nodelist"><code>NodeList</code></a></dfn>
   <!-- ownerDocument --> </li><li><dfn data-dfn-type="dfn" id="dfn-ownerdocument"><a href="https://dom.spec.whatwg.org/#dom-node-ownerdocument">ownerDocument</a></dfn>
   <!-- tagName --> </li><li><dfn data-dfn-type="dfn" id="dfn-tagname"><a href="https://dom.spec.whatwg.org/#dom-element-tagname">tagName</a></dfn>
   <!-- Text node --> </li><li><dfn data-dfn-type="dfn" id="dfn-text-node"><a href="https://dom.spec.whatwg.org/#text"><code>Text</code> node</a></dfn>
  </li></ul>

 </dd><dt>ECMAScript
 </dt><dd><p>The following terms are defined in the ECMAScript Language Specification: [<cite><a class="bibref" href="#bib-ECMA-262">ECMA-262</a></cite>]
  </p><ul>
   <!-- Create a function object --> <li><dfn data-dfn-type="dfn" id="dfn-create-a-function-object"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-13.2">Create a function object</a></dfn>
   <!-- Directive prologue --> </li><li><dfn data-dfn-type="dfn" id="dfn-directive-prologue"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-14.1">Directive prologue</a></dfn>
   <!-- Early error --> </li><li><dfn data-dfn-type="dfn" id="dfn-early-error"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-16">Early error</a></dfn>
   <!-- FunctionBody --> </li><li><dfn data-dfn-type="dfn" id="dfn-functionbody"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-13">FunctionBody</a></dfn>
   <!-- Function --> </li><li><dfn data-dfn-type="dfn" id="dfn-function"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.24">Function</a></dfn>
   <!-- Global environment --> </li><li><dfn data-dfn-type="dfn" id="dfn-global-environment"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-10.2.3">Global environment</a></dfn>
   <!-- Own Property --> </li><li><dfn data-dfn-type="dfn" id="dfn-own-property"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.30">Own property</a></dfn>
   <!-- parseFloat --> </li><li><dfn data-dfn-type="dfn" id="dfn-parsefloat"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.3">parseFloat</a></dfn>
   <!-- Use strict directive --> </li><li><dfn data-dfn-type="dfn" id="dfn-use-strict-directive"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-14.1">Use strict directive</a></dfn>
  </li></ul>

 </dd><dd>This specification also presumes that you are able to call
  some of the internal methods from the ECMAScript Language Specification:
  <ul>
   <!-- Call --> <li><dfn data-dfn-type="dfn" id="dfn-call"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-13.2.1">[[Call]]</a></dfn>
   <!-- Class --> </li><li><dfn data-dfn-type="dfn" id="dfn-class"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2">[[Class]]</a></dfn>
   <!-- GetOwnProperty --> </li><li><dfn data-dfn-type="dfn" id="dfn-getownproperty"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.12.1">[[GetOwnProperty]]</a></dfn>
   <!-- GetProperty --> </li><li><dfn data-dfn-type="dfn" id="dfn-getproperty"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.12.2">[[GetProperty]]</a></dfn>
   <!-- Index of --> </li><li><dfn data-dfn-type="dfn" id="dfn-index-of"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.7">Index of</a></dfn>
   <!-- Substring --> </li><li><dfn data-dfn-type="dfn" id="dfn-substring"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.15">Substring</a></dfn>
  </li></ul>

 </dd><dd>The ECMAScript Language Specification also defines
  the following types and values that are used throughout this specification:
  <ul>
   <!-- Array --> <li><dfn data-dfn-type="dfn" id="dfn-array"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.1.4">Array</a></dfn>
   <!-- Boolean type --> </li><li><dfn data-dfn-type="dfn" id="dfn-boolean"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.14">Boolean</a></dfn> type
   <!-- List --> </li><li><dfn data-dfn-type="dfn" id="dfn-list"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.8">List</a></dfn>
   <!-- null --> </li><li><dfn data-dfn-type="dfn" id="dfn-null"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.11">Null</a></dfn>
   <!-- Number --> </li><li><dfn data-dfn-type="dfn" id="dfn-number"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.19">Number</a></dfn>
   <!-- Object --> </li><li><dfn data-dfn-type="dfn" id="dfn-object"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1">Object</a></dfn>
   <!-- String --> </li><li><dfn data-dfn-type="dfn" id="dfn-string"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.18">String</a></dfn>
   <!-- undefined --> </li><li><dfn data-dfn-type="dfn" id="dfn-undefined"><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.9">Undefined</a></dfn>
  </li></ul>

 </dd><dt>Fetch
 </dt><dd><p>The following terms are defined in the WHATWG Fetch specification: [<cite><a class="bibref" href="#bib-FETCH">FETCH</a></cite>]
  </p><ul>
   <!-- Body --> <li><dfn data-dfn-type="dfn" id="dfn-body"><a href="https://fetch.spec.whatwg.org/#concept-request-body">Body</a></dfn>
   <!-- Method --> </li><li><dfn data-dfn-type="dfn" id="dfn-method"><a href="https://fetch.spec.whatwg.org/#concept-request-method">Method</a></dfn>
   <!-- Response --> </li><li><dfn data-dfn-type="dfn" id="dfn-response"><a href="https://fetch.spec.whatwg.org/#concept-response">Response</a></dfn>
   <!-- Request --> </li><li><dfn data-dfn-type="dfn" id="dfn-request"><a href="https://fetch.spec.whatwg.org/#concept-request">Request</a></dfn>
   <!-- Status --> </li><li><dfn data-dfn-type="dfn" id="dfn-status"><a href="https://fetch.spec.whatwg.org/#concept-response-status">Status</a></dfn>
   <!-- Status message --> </li><li><dfn data-dfn-type="dfn" id="dfn-status-message"><a href="https://fetch.spec.whatwg.org/#concept-response-status-message">Status message</a></dfn>
   <!-- URL --> </li><li><dfn data-dfn-type="dfn" id="dfn-url"><a href="https://fetch.spec.whatwg.org/#concept-request-url">URL</a></dfn>
  </li></ul>

 </dd><dt>HTML
 </dt><dd><p>The following terms are defined in the HTML specification: [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>]
  </p><ul>
   <!-- 2D context creation algorithm --> <li><dfn data-dfn-type="dfn" id="dfn-x2d-context-creation-algorithm"><a href="https://html.spec.whatwg.org/multipage/scripting.html#2d-context-creation-algorithm">2D context creation algorithm</a></dfn>
   <!-- A browsing context is discarded --> </li><li><dfn data-dfn-type="dfn" id="dfn-a-browsing-context-is-discarded"><a href="https://html.spec.whatwg.org/#a-browsing-context-is-discarded">A browsing context is discarded</a></dfn>
   <!-- Active document --> </li><li><dfn data-dfn-type="dfn" id="dfn-active-document"><a href="https://html.spec.whatwg.org/#active-document">Active document</a></dfn>
   <!-- Active element --> </li><li><dfn data-dfn-type="dfn" id="dfn-active-element">Active element</dfn> being the <a href="https://html.spec.whatwg.org/#dom-document-activeelement"><code>activeElement</code></a> attribute on <a href="https://html.spec.whatwg.org/#document"><code>Document</code></a>
   <!-- Ancestor browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-ancestor-browsing-context"><a href="https://html.spec.whatwg.org/#ancestor-browsing-context">Ancestor browsing context</a></dfn>
   <!-- A serialization of the bitmap as a file --> </li><li><dfn data-dfn-type="dfn" id="dfn-a-serialisation-of-the-bitmap-as-a-file"><a href="https://html.spec.whatwg.org/multipage/scripting.html#a-serialisation-of-the-bitmap-as-a-file">A serialisation of the bitmap as a file</a></dfn>
   <!-- Associated window --> </li><li><dfn data-dfn-type="dfn" id="dfn-associated-window"><a href="https://html.spec.whatwg.org/#concept-document-window">Associated window</a></dfn>
   <!-- Boolean attribute --> </li><li><dfn data-dfn-type="dfn" id="dfn-boolean-attribute"><a href="https://html.spec.whatwg.org/#boolean-attribute">Boolean attribute</a></dfn>
   <!-- Browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-browsing-context"><a href="https://html.spec.whatwg.org/#browsing-context">Browsing context</a></dfn>
   <!-- Canvas context mode --> </li><li><dfn data-dfn-type="dfn" id="dfn-canvas-context-mode"><a href="https://html.spec.whatwg.org/multipage/scripting.html#concept-canvas-context-mode">Canvas context mode</a></dfn>
   <!-- Checkbox --> </li><li><dfn data-dfn-type="dfn" id="dfn-checkbox"><a href="https://html.spec.whatwg.org/#checkbox-state-%28type=checkbox%29">Checkbox</a></dfn> state
   <!-- Checkedness --> </li><li><dfn data-dfn-type="dfn" id="dfn-checkedness"><a href="https://html.spec.whatwg.org/#concept-fe-checked">Checkedness</a></dfn>
   <!-- Child browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-child-browsing-context"><a href="https://html.spec.whatwg.org/#child-browsing-context">Child browsing context</a></dfn>
   <!-- Close a browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-close-a-browsing-context"><a href="https://html.spec.whatwg.org/#close-a-browsing-context">Close a browsing context</a></dfn>
   <!-- Code entry-point --> </li><li><dfn data-dfn-type="dfn" id="dfn-code-entry-point"><a href="https://html.spec.whatwg.org/#code-entry-point">Code entry-point</a></dfn>
   <!-- Cookie-averse Document object --> </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-averse-document-object"><a href="https://html.spec.whatwg.org/#cookie-averse-document-object">Cookie-averse <code>Document</code> object</a></dfn>
   <!-- Current entry --> </li><li><dfn data-dfn-type="dfn" id="dfn-current-entry"><a href="https://html.spec.whatwg.org/#current-entry">Current entry</a></dfn>
   <!-- Determine the value of an indexed property --> </li><li><dfn data-dfn-type="dfn" id="dfn-determine-the-value-of-an-indexed-property"><a href="https://html.spec.whatwg.org/#dom-window-item">Determine the value of an indexed property</a></dfn> of a <a href="#dfn-window" class="internalDFN" data-link-type="dfn"><code>Window</code></a> object
   <!-- Disabled --> </li><li><dfn data-dfn-type="dfn" id="dfn-disabled"><a href="https://html.spec.whatwg.org/#concept-fe-disabled">Disabled</a></dfn>
   <!-- Document address --> </li><li><dfn data-dfn-type="dfn" id="dfn-document-address"><a href="https://dom.spec.whatwg.org/#concept-document-url">Document address</a></dfn>
   <!-- Document title --> </li><li><dfn data-dfn-type="dfn" id="dfn-document-title"><a href="https://html.spec.whatwg.org/#dom-title-text">Document title</a></dfn>
   <!-- Enumerated attribute --> </li><li><dfn data-dfn-type="dfn" id="dfn-enumerated-attribute"><a href="https://html.spec.whatwg.org/#enumerated-attribute">Enumerated attribute</a></dfn>
   <!-- Environment settings object --> </li><li><dfn data-dfn-type="dfn" id="dfn-environment-settings-object"><a href="https://html.spec.whatwg.org/#environment-settings-object">Environment settings object</a></dfn>
   <!-- Event loop --> </li><li><dfn data-dfn-type="dfn" id="dfn-event-loop"><a href="https://html.spec.whatwg.org/#event-loop">Event loop</a></dfn>
   <!-- Missing value default state --> </li><li><dfn data-dfn-type="dfn" id="dfn-missing-value-default-state"><a href="https://html.spec.whatwg.org/#missing-value-default">Missing value default state</a></dfn>
   <!-- Navigate --> </li><li><dfn data-dfn-type="dfn" id="dfn-navigate"><a href="https://html.spec.whatwg.org/#navigate">Navigate</a></dfn>
   <!-- Nested browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-nested-browsing-context"><a href="https://html.spec.whatwg.org/#nested-browsing-context">Nested browsing context</a></dfn>
   <!-- Origin-clean --> </li><li><dfn data-dfn-type="dfn" id="dfn-origin-clean"><a href="https://html.spec.whatwg.org/multipage/scripting.html#concept-canvas-origin-clean">Origin-clean</a></dfn>
   <!-- Parent browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-parent-browsing-context"><a href="https://html.spec.whatwg.org/#parent-browsing-context">Parent browsing context</a></dfn>
   <!-- Pause --> </li><li><dfn data-dfn-type="dfn" id="dfn-pause"><a href="https://html.spec.whatwg.org/#pause">Pause</a></dfn>
   <!-- Prompt to unload a document --> </li><li><dfn data-dfn-type="dfn" id="dfn-prompt-to-unload-a-document"><a href="https://html.spec.whatwg.org/#prompt-to-unload-a-document">Prompt to unload a document</a></dfn>
   <!-- Radio button --> </li><li><dfn data-dfn-type="dfn" id="dfn-radio-button"><a href="https://html.spec.whatwg.org/#radio-button-state-%28type=radio%29">Radio Button</a></dfn> state
   <!-- Replacement enabled --> </li><li><dfn data-dfn-type="dfn" id="dfn-replacement-enabled"><a href="https://html.spec.whatwg.org/#replacement-enabled">Replacement enabled</a></dfn>
   <!-- Script execution environment --> </li><li><dfn data-dfn-type="dfn" id="dfn-script-execution-environment"><a href="https://html.spec.whatwg.org/#script-execution-environment">Script execution environment</a></dfn>
   <!-- Script --> </li><li><dfn data-dfn-type="dfn" id="dfn-script"><a href="https://html.spec.whatwg.org/#concept-script">Script</a></dfn>
   <!-- Selectedness --> </li><li><dfn data-dfn-type="dfn" id="dfn-selectedness"><a href="https://html.spec.whatwg.org/#concept-option-selectedness">Selectedness</a></dfn>
   <!-- Settings object --> </li><li><dfn data-dfn-type="dfn" id="dfn-settings-object"><a href="https://html.spec.whatwg.org/#settings-object">Settings object</a></dfn>
   <!-- Simple dialogues --> </li><li><dfn data-dfn-type="dfn" id="dfn-simple-dialogues"><a href="https://html.spec.whatwg.org/#simple-dialogs">Simple dialogues</a></dfn>
   <!-- Top-level browsing context --> </li><li><dfn data-dfn-type="dfn" id="dfn-top-level-browsing-context"><a href="https://html.spec.whatwg.org/#top-level-browsing-context">Top-level browsing context</a></dfn>
   <!-- Traverse the history by a delta --> </li><li><dfn data-dfn-type="dfn" id="dfn-traverse-the-history-by-a-delta"><a href="https://html.spec.whatwg.org/#traverse-the-history-by-a-delta">Traverse the history by a delta</a></dfn>
   <!-- Traverse the history --> </li><li><dfn data-dfn-type="dfn" id="dfn-traverse-the-history"><a href="https://html.spec.whatwg.org/#traverse-the-history">Traverse the history</a></dfn>
   <!-- Tree order --> </li><li><dfn data-dfn-type="dfn" id="dfn-tree-order"><a href="https://html.spec.whatwg.org/#tree-order">Tree order</a></dfn>
   <!-- User prompt --> </li><li><dfn data-dfn-type="dfn" id="dfn-user-prompt"><a href="https://html.spec.whatwg.org/#user-prompts">User prompt</a></dfn>
  </li></ul>

 </dd><dd><p>The HTML specification also defines a number of elements
  which this specification has special-cased behaviour for:
  </p><ul>
   <!-- canvas element --> <li><dfn data-dfn-type="dfn" id="dfn-canvas-element"><a href="https://html.spec.whatwg.org/multipage/scripting.html#the-canvas-element"><code>canvas</code> element</a></dfn>
   <!-- input element --> </li><li><a href="https://html.spec.whatwg.org/#the-input-element"><dfn data-dfn-type="dfn" id="dfn-input"><code>input</code></dfn> element</a>
   <!-- option element --> </li><li><a href="https://html.spec.whatwg.org/#the-option-element"><dfn data-dfn-type="dfn" id="dfn-option"><code>option</code></dfn> element</a>
  </li></ul>

 </dd><dd><p>The following types are also defined in the HTML specification,
  and referenced here:
  </p><ul>
   <!-- Canvas height atribute --> <li><dfn data-dfn-type="dfn" id="dfn-canvas-s-height-attribute"><a href="https://html.spec.whatwg.org/multipage/scripting.html#attr-canvas-height"><code>canvas</code>’s height attribute</a></dfn>
   <!-- Canvas width attribute --> </li><li><dfn data-dfn-type="dfn" id="dfn-canvas-width-attribute"><a href="https://html.spec.whatwg.org/multipage/scripting.html#attr-canvas-width"><code>canvas</code>’ width attribute</a></dfn>
   <!-- Window object --> </li><li><dfn data-dfn-type="dfn" id="dfn-window"><a href="https://html.spec.whatwg.org/#the-window-object"><code>Window</code></a></dfn> object
   <!-- type attribute --> </li><li><dfn data-dfn-type="dfn" id="dfn-type-attribute"><a href="https://html.spec.whatwg.org/#attr-input-type"><code>type</code> attribute</a></dfn>
   <!-- window confirm --> </li><li><dfn data-dfn-type="dfn" id="dfn-window.confirm">window.<a href="https://html.spec.whatwg.org/#dom-confirm"><code>confirm</code></a></dfn>
   <!-- window.alert --> </li><li><dfn data-dfn-type="dfn" id="dfn-window.alert">window.<a href="https://html.spec.whatwg.org/#dom-alert"><code>alert</code></a></dfn>
   <!-- window.print --> </li><li><dfn data-dfn-type="dfn" id="dfn-window.print">window.<a href="https://html.spec.whatwg.org/#dom-print"><code>print</code></a></dfn>
   <!-- window.prompt --> </li><li><dfn data-dfn-type="dfn" id="dfn-window.prompt">window.<a href="https://html.spec.whatwg.org/#dom-prompt"><code>prompt</code></a></dfn>
   <!-- showModalDialog --> </li><li><dfn data-dfn-type="dfn" id="dfn-showmodaldialog"><a href="https://html.spec.whatwg.org/#dom-showmodaldialog"><code>showModalDialog()</code></a></dfn>
 </li></ul>

 </dd><dd><p>The “data” URL scheme specification defines the following terms: [<cite><a class="bibref" href="#bib-RFC2397">RFC2397</a></cite>]
  </p><ul>
   <li><dfn data-dfn-type="dfn" id="dfn-data-url"><a href="https://tools.ietf.org/html/rfc2397#section-2"><code>data:</code> URL</a></dfn>
  </li></ul>

 </dd><dt>HTTP and related specifications
 </dt><dd><p>The following terms are defined in the Cookie specification: [<cite><a class="bibref" href="#bib-RFC6265">RFC6265</a></cite>]
  </p><ul>
   <li><dfn data-dfn-type="dfn" id="dfn-compute-cookie-string"><a href="https://tools.ietf.org/html/rfc6265#section-5.4">Compute <code>cookie-string</code></a></dfn>
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie"><a href="https://tools.ietf.org/html/rfc6265#section-5.3">Cookie</a></dfn>
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-store"><a href="https://tools.ietf.org/html/rfc6265#section-5.3">Cookie store</a></dfn>
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-name">Cookie name</dfn> as a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>name</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-value">Cookie value</dfn> as a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>value</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-expiry-time">Cookie expiry time</dfn> a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>expiry-time</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-domain">Cookie domain</dfn> as a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>domain</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-path">Cookie path</dfn> as a a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>path</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-secure-only">Cookie secure only</dfn> as a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>secure-only-flag</code> field
   </li><li><dfn data-dfn-type="dfn" id="dfn-cookie-http-only">Cookie http only</dfn> as a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>’s <code>http-only-flag</code>
   </li><li><dfn data-dfn-type="dfn" id="dfn-storage-model">Storage Model</dfn>
  </li></ul>

 </dd><dd><p>The following terms are defined in
  the Hypertext Transfer Protocol (HTTP) Status Code Registry:
  </p><ul>
   <li><dfn data-dfn-type="dfn" id="dfn-status-code-registry"><a href="http://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">Status code registry</a></dfn>
  </li></ul>

 </dd><dd>The following terms are defined in
  the Netscape Navigator Proxy Auto-Config File Format:
  <ul>
   <li><dfn data-dfn-type="dfn" id="dfn-proxy-autoconfiguration"><a href="https://web.archive.org/web/20070602031929/http://wp.netscape.com/eng/mozilla/2.0/relnotes/demo/proxy-live.html">Proxy autoconfiguration</a></dfn>
  </li></ul>

  </dd><dd><p>The specification uses
   <dfn data-dfn-type="dfn" id="dfn-uri-templates">URI Templates</dfn>. [<cite><a class="bibref" href="#bib-URI-TEMPLATE">URI-TEMPLATE</a></cite>]

 </p></dd><dt>Styling
 </dt><dd>The following terms are defined in
  the CSS Values and Units Module Level 3 specification: [<cite><a class="bibref" href="#bib-CSS3-VALUES">CSS3-VALUES</a></cite>]
  <ul>
   <li><dfn data-dfn-type="dfn" id="dfn-css-reference-pixels"><a href="http://www.w3.org/TR/css3-values/#reference-pixel">CSS reference pixels</a></dfn>
  </li></ul>

 </dd><dd>The following properties are defined in
  the CSS Basic Box Model Level 3 specification: [<cite><a class="bibref" href="#bib-CSS3-BOX">CSS3-BOX</a></cite>]
   <ul>
    <li>The <dfn data-dfn-type="dfn" id="dfn-visibility"><a href="https://drafts.csswg.org/css-box/#visibility"><code>visibility</code></a></dfn> property
   </li></ul>

 </dd><dd>The following terms are defined in
  the CSS Device Adaptation Module Level 1 specification: [<cite><a class="bibref" href="#bib-CSS-DEVICE-ADAPT">CSS-DEVICE-ADAPT</a></cite>]
   <ul>
    <li><dfn data-dfn-type="dfn" id="dfn-initial-viewport"><a href="https://drafts.csswg.org/css-device-adapt/#initial-viewport">Initial viewport</a></dfn>
   </li></ul>

 </dd><dd>The following properties are defined in
  the CSS Display Module Level 3 specification: [<cite><a class="bibref" href="#bib-CSS3-DISPLAY">CSS3-DISPLAY</a></cite>]
  <ul>
   <li>The <dfn data-dfn-type="dfn" id="dfn-display"><a href="https://drafts.csswg.org/css-display/#the-display-properties"><code>display</code></a></dfn> property
  </li></ul>

 </dd><dd>The following terms are defined in
  the Geometry Interfaces Module Level 1 specification: [<cite><a class="bibref" href="#bib-GEOMETRY-1">GEOMETRY-1</a></cite>]
  <ul>
   <!-- Rectangle --> <li><dfn data-dfn-type="dfn" id="dfn-rectangle"><a href="https://drafts.fxtf.org/geometry/#rectangle">Rectangle</a></dfn>
   <!-- Rectangle height dimension --> </li><li><dfn data-dfn-type="dfn" id="dfn-rectangle-height-dimension"><a href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension">Rectangle height dimension</a></dfn>
   <!-- Rectangle width dimension --> </li><li><dfn data-dfn-type="dfn" id="dfn-rectangle-width-dimension"><a href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension">Rectangle width dimension</a></dfn>
   <!-- Rectangle x coordinate --> </li><li><dfn data-dfn-type="dfn" id="dfn-rectangle-x-coordinate"><a href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate">Rectangle x coordinate</a></dfn>
   <!-- Rectangle y coordinate --> </li><li><dfn data-dfn-type="dfn" id="dfn-rectangle-y-coordinate"><a href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate">Rectangle y coordinate</a></dfn>
  </li></ul>

 </dd><dd>The following terms are defined in
  the CSS Cascading and Inheritance Level 4 specification: [<cite><a class="bibref" href="#bib-CSS-CASCADE-4">CSS-CASCADE-4</a></cite>]
  <ul>
   <li><dfn data-dfn-type="dfn" id="dfn-computed-value"><a href="https://drafts.csswg.org/css-cascade-4/#computed-value">Computed value</a></dfn>
  </li></ul>

 </dd><dd>The following functions are defined in
  the CSSOM View Module: [<cite><a class="bibref" href="#bib-CSSOM-VIEW">CSSOM-VIEW</a></cite>]:
  <ul>
   <!-- getClientRects --> <li><dfn data-dfn-type="dfn" id="dfn-getclientrects"><a href="http://www.w3.org/TR/cssom-view/#dom-range-getclientrects">getClientRects</a></dfn>
   <!-- offsetLeft --> </li><li><dfn data-dfn-type="dfn" id="dfn-offsetleft"><a href="https://drafts.csswg.org/cssom-view/#dom-htmlelement-offsetleft">offsetLeft</a></dfn>
   <!-- offsetParent --> </li><li><dfn data-dfn-type="dfn" id="dfn-offsetparent"><a href="https://drafts.csswg.org/cssom-view/#dom-htmlelement-offsetparent">offsetParent</a></dfn>
   <!-- offsetTop --> </li><li><dfn data-dfn-type="dfn" id="dfn-offsettop"><a href="https://drafts.csswg.org/cssom-view/#dom-htmlelement-offsettop">offsetTop</a></dfn>
   <!-- scrollIntoView --> </li><li><dfn data-dfn-type="dfn" id="dfn-scrollintoview"><a href="https://drafts.csswg.org/cssom-view/#dom-element-scrollintoview">scrollIntoView()</a></dfn>
  </li></ul>

 </dd><dt>URLs
 </dt><dd>The following terms are defined in the WHATWG URL standard: [<cite><a class="bibref" href="#bib-URL">URL</a></cite>]
  <ul>
   <!-- Path --> <li><dfn data-dfn-type="dfn" id="dfn-path"><a href="https://url.spec.whatwg.org/#concept-url-path">Path</a></dfn>
   <!-- Path-absolute URL --> </li><li><dfn data-dfn-type="dfn" id="dfn-path-absolute-url"><a href="https://url.spec.whatwg.org/#syntax-url-path-absolute">Path-absolute URL</a></dfn>
   <!-- URL serialiser --> </li><li><dfn data-dfn-type="dfn" id="dfn-url-serialiser"><a href="https://url.spec.whatwg.org/#concept-url-serializer">URL serialiser</a></dfn>
  </li></ul>

 </dd><dd>The following terms are defined in the URI Template specification: [<cite><a class="bibref" href="#bib-URI-TEMPLATE">URI-TEMPLATE</a></cite>]
  <ul>
   <li><dfn data-dfn-type="dfn" id="dfn-expansion"><a href="https://tools.ietf.org/html/rfc6570#section-3">Expansion</a></dfn>
  </li></ul>

 </dd><dt>Web IDL
 </dt><dd><p>The IDL fragments in this specification
  must be interpreted as required for conforming IDL fragments,
  as described in the Web IDL specification. [<cite><a class="bibref" href="#bib-WEBIDL">WEBIDL</a></cite>]
  </p><ul>
   <li><dfn data-dfn-type="dfn" id="dfn-supported-property-indices"><a href="http://heycam.github.io/webidl/#dfn-supported-property-indices">Supported property indices</a></dfn>
  </li></ul>
</dd></dl>
</section> <!-- /Dependencies -->
</section> <!-- /Conformance -->

<section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart">
<!--OddPage--><h2 id="h-terminology" resource="#h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Terminology</span></h2>

<p>In equations, all numbers are integers,
 addition is represented by “+”,
 subtraction is represented by “−”,
 and bitwise OR by “|”.
 The characters “(” and “)” are used to provide logical grouping in these contexts.

</p><p>The shorthand
 <dfn data-dfn-type="dfn" id="dfn-min">min</dfn>(<var>value</var>, <var>value</var>[, <var>value</var>])
 returns the smallest item of two or more values.

</p><p>An <dfn data-dfn-type="dfn" id="dfn-ascii-string">ASCII string</dfn> is a string
 in the range U+0000 to U+007F, inclusive.

</p><p>A <dfn data-dfn-type="dfn" id="dfn-universally-unique-identifier-uuid">Universally Unique IDentifier (UUID)</dfn> is
 a 128 bits long URN that requires no central registration process. [<cite><a class="bibref" href="#bib-RFC4122">RFC4122</a></cite>]
</p></section> <!-- /Terminology -->

<section id="interface" typeof="bibo:Chapter" resource="#interface" property="bibo:hasPart">
<!--OddPage--><h2 id="h-interface" resource="#h-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Interface</span></h2>

<pre class="idl"><span class="idlInterface" id="idl-def-navigator" data-idl="" data-title="Navigator">partial interface <span class="idlInterfaceID">Navigator</span> {
<span class="idlAttribute" id="idl-def-navigator-webdriver" data-idl="" data-title="webdriver" data-dfn-for="navigator">    readonly    attribute <span class="idlAttrType"><a href="#dfn-boolean" class="internalDFN" data-link-type="dfn">boolean</a></span> <span class="idlAttrName">webdriver</span>;</span>
};</span></pre>

<p>The <code>webdriver</code> IDL attribute
 of the <code><a href="#idl-def-navigator" class="internalDFN" data-link-type="dfn"><code>Navigator</code></a></code> interface must return
 the value of the <dfn data-dfn-type="dfn" id="dfn-webdriver-active-flag">webdriver-active flag</dfn>, which is initially false.

</p><p>This property allows websites to determine
 that the user agent is under control by WebDriver,
 and can be used to help mitigate
 <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack">denial-of-service attacks</a>.
</p></section>

<section id="protocol" typeof="bibo:Chapter" resource="#protocol" property="bibo:hasPart">
<!--OddPage--><h2 id="h-protocol" resource="#h-protocol"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>Protocol</span></h2>

<div class="issue" id="issue-2"><div class="issue-title" aria-level="3" role="heading" id="h-issue2"><span>Issue 2</span></div><p class="">TODO: Introduction

</p></div><section id="algorithms" typeof="bibo:Chapter" resource="#algorithms" property="bibo:hasPart">
<h3 id="h-algorithms" resource="#h-algorithms"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Algorithms</span></h3>

<p>Various parts of this specification are written in terms of step-by-step algorithms.
 The details of these algorithms do not have any normative significance;
 implementations are free to adopt any implementation strategy
 that produces equivalent output to the specification.
 In particular algorithms in this document are optimised
 for readability rather than performance.

</p><p>Where algorithms that return values are fallible,
 they are written in terms of returning either
 <dfn data-dfn-type="dfn" id="dfn-success">success</dfn> or <dfn data-dfn-type="dfn" id="dfn-error">error</dfn>.
 A <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> value has an associated <var>data</var> field
 which encapsulates the value returned,
 whereas an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> response has an associated <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>.

</p><p>The result of <dfn data-dfn-type="dfn" id="dfn-getting-a-property">getting a property</dfn> with <var>name</var>
 from an <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a> is defined as
 the result of calling the <a href="#dfn-getownproperty" class="internalDFN" data-link-type="dfn">[[GetOwnProperty]]</a>
 internal method of with property name <var>name</var>.
</p></section> <!-- /Algorithms -->

<section id="commands" typeof="bibo:Chapter" resource="#commands" property="bibo:hasPart">
<h3 id="h-commands" resource="#h-commands"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span>Commands</span></h3>

<p>The WebDriver protocol is organised into <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>.
 Each HTTP request with a method and template defined in this specification
 represents a single <dfn data-dfn-type="dfn" id="dfn-command">command</dfn>
 and therefore each command produces a single HTTP response.
 In response to a <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> will run a series of actions against the remote browser.

</p><p>Each <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> defined in this specification
 has an associated list of <dfn data-dfn-type="dfn" id="dfn-remote-end-steps">remote end steps</dfn>.
 This provides the sequence of actions that a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> takes
 when it receives a particular command.
</p></section>

<section id="processing-model" typeof="bibo:Chapter" resource="#processing-model" property="bibo:hasPart">
<h3 id="h-processing-model" resource="#h-processing-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span>Processing Model</span></h3>

<p>The <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> acts as a HTTP server reading requests
 from the client and writing responses, typically over TCP socket.
 For the purposes of this specification we model the data transmission
 between a particular <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a> and <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> with a <dfn data-dfn-type="dfn" id="dfn-connection">connection</dfn>
 to which the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> may <dfn data-dfn-type="dfn" id="dfn-write-bytes">write bytes</dfn> and <dfn data-dfn-type="dfn" id="dfn-read-bytes">read bytes</dfn>.
 However the exact details of how this <a href="#dfn-connection" class="internalDFN" data-link-type="dfn">connection</a> works
 and how it is established are out of scope.

</p><p>After such a <a href="#dfn-connection" class="internalDFN" data-link-type="dfn">connection</a> has been established,
 a remote end <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>

<div class="issue" id="issue-3"><div class="issue-title" aria-level="4" role="heading" id="h-issue3"><span>Issue 3</span></div><p class="">Should mention what happens if it can’t be decoded as HTTP.
 Note that <a href="https://fetch.spec.whatwg.org/">Fetch</a> isn’t quite right
 because it doesn’t specify how to construct a request from network data, or serialize a response.

</p></div><ol>
 <li><p><a href="#dfn-read-bytes" class="internalDFN" data-link-type="dfn">Read bytes</a> from the connection
  until a complete HTTP request can be constructed from the data.
  Let <var>request</var> be a <a href="#dfn-request" class="internalDFN" data-link-type="dfn">request</a>
  constructed from the received data,
  according to the requirements of [<cite><a class="bibref" href="#bib-RFC7230">RFC7230</a></cite>].

 </p></li><li><p>Let <var>request match</var> be the result of the algorithm
  to <a href="#dfn-match-a-request" class="internalDFN" data-link-type="dfn">match a request</a> with <var>request</var>’s
  <a href="#dfn-method" class="internalDFN" data-link-type="dfn">method</a> and <a href="#dfn-url" class="internalDFN" data-link-type="dfn">URL</a> as arguments.

 </p></li><li><p>If <var>request match</var> is of type <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  <a href="#dfn-send-an-error" class="internalDFN" data-link-type="dfn">send an error</a> with <var>request match</var>’s <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>
  and jump to step 1.

  </p><p>Otherwise, let <var>command</var> and <var>url variables</var>
   be <var>request match</var>’s data.

 </p></li><li><p>Let <var>session id</var> be the corresponding variable
  from <var>url variables</var>.

 </p></li><li><p>If <var>command</var> is not <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a>:

  </p><ol>
   <li><p>If <var>session id</var> is not equal to the <a data-lt="session id" href="#dfn-session-id" class="internalDFN" data-link-type="dfn">ID</a>
    of any session in the list of <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>,
    <a href="#dfn-send-an-error" class="internalDFN" data-link-type="dfn">send an error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-session-id" class="internalDFN" data-link-type="dfn">invalid session id</a>,
    then jump to step 1 in this overall algorithm.

    </p><p>Otherwise, let the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a> be
     the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> with <a data-lt="session id" href="#dfn-session-id" class="internalDFN" data-link-type="dfn">ID</a> <var>session id</var>.
  </p></li></ol>

 </li><li><p>If <var>request</var>’s <a href="#dfn-method" class="internalDFN" data-link-type="dfn">method</a> is POST:

  </p><ol>
   <li><p>Let <var>parse result</var> be the result of
    parsing as JSON with <var>request</var>’s
    <a href="#dfn-body" class="internalDFN" data-link-type="dfn">body</a> as the argument.

   </p></li><li><p>If <var>parse result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> or if it is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>
    but its associated data is not an <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a>,
    <a href="#dfn-send-an-error" class="internalDFN" data-link-type="dfn">send an error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>
    and jump back to step 1 in this overall algorithm.

    </p><p>Otherwise, let <var>parameters</var> be <var>parse result</var>’s data.
  </p></li></ol>

  <p>Otherwise, let <var>parameters</var> be null.</p>

 </li><li><p>Let <var>response result</var> be the return value
  obtained by running the <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> for <var>command</var>
  with <var>url variables</var> as arguments.

 </p></li><li><p>If <var>response result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  <a href="#dfn-send-an-error" class="internalDFN" data-link-type="dfn">send an error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>
  equal to <var>response result</var>’s <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>.

  </p><p>Otherwise, if <var>response result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
   let <var>response data</var> be <var>response result</var>’s data.

 </p></li><li><p><a href="#dfn-send-a-response" class="internalDFN" data-link-type="dfn">Send a response</a> with status 200 and <var>response data</var>.

 </p></li><li><p>Jump to step 1.
</p></li></ol>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-send-an-error">send an error</dfn>,
 with <var>error code</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:</p>

<ol>
 <li><p>Let <var>http status</var> and <var>name</var>
  be the <a href="#dfn-error-response-data" class="internalDFN" data-link-type="dfn">error response data</a> for <var>error code</var>.

 </p></li><li><p>Let <var>message</var> be an implementation-defined string
  containing a human-readable description of the reason for the error.

 </p></li><li><p>Let <var>stacktrace</var> be an implementation-defined string
  containing a stack trace report of the active stack frames
  at the time when the error occurred.

 </p></li><li><div class="issue" id="issue-4"><div class="issue-title" aria-level="4" role="heading" id="h-issue4"><span>Issue 4</span></div><p class="">Really need a better way to construct JSON literals.

  </p></div><p>Let <var>data</var> be a new JSON Object
  initialised with the following properties:

  </p><dl>
   <dt>"<code>error</code>"
   </dt><dd>Value of <var>name</var>.

   </dd><dt>"<code>message</code>"
   </dt><dd>Value of <var>message</var>.

   </dd><dt>"<code>stacktrace</code>"
   </dt><dd>Value of <var>stacktrace</var>.
  </dd></dl>

 </li><li><p><a href="#dfn-send-a-response" class="internalDFN" data-link-type="dfn">Send a response</a> with <var>status</var>
  and <var>data</var> as arguments.
</p></li></ol>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-send-a-response">send a response</dfn>,
 with arguments <var>status</var> and <var>data</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:

</p><ol>
 <li><p>Let <var>response</var> be a new <a href="#dfn-response" class="internalDFN" data-link-type="dfn">response</a>.

 </p></li><li><p>Set <var>response</var>’s <a href="#dfn-status" class="internalDFN" data-link-type="dfn">status</a> to <var>status</var>,
  and <a href="#dfn-status-message" class="internalDFN" data-link-type="dfn">status message</a> to the string corresponding
  to the description of <var>status</var> in the <a href="#dfn-status-code-registry" class="internalDFN" data-link-type="dfn">status code registry</a>.

 </p></li><li><p>If <var>data</var> is not null, let <var>response</var>’s
  <a href="#dfn-body" class="internalDFN" data-link-type="dfn">body</a> be the result of serializing as JSON
  with <var>data</var> as the argument.

 </p></li><li><p>Let <var>response bytes</var> be the byte sequence resulting
  from serializing <var>response</var> according to the rules in [<cite><a class="bibref" href="#bib-RFC7230">RFC7230</a></cite>].

 </p></li><li><p><a data-lt="write bytes" href="#dfn-write-bytes" class="internalDFN" data-link-type="dfn">Write</a> <var>response bytes</var>
  to the <a href="#dfn-connection" class="internalDFN" data-link-type="dfn">connection</a>.
</p></li></ol>
</section> <!-- /Processing Model -->

<section id="routing-requests" typeof="bibo:Chapter" resource="#routing-requests" property="bibo:hasPart">
<h3 id="h-routing-requests" resource="#h-routing-requests"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span>Routing Requests</span></h3>

<p><dfn data-dfn-type="dfn" id="dfn-request-routing">Request routing</dfn>
 is the process of going from a HTTP request
 to the <a data-lt="remote end steps" href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">series of steps</a> needed
 to implement the <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> represented by that request.

</p><p>A <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> has an associated <dfn data-dfn-type="dfn" id="dfn-url-prefix">URL prefix</dfn>,
 which is used as a prefix on all WebDriver-defined URLs on that remote end.
 This must either be undefined or an <a href="#dfn-path-absolute-url" class="internalDFN" data-link-type="dfn">path-absolute URL</a>.

</p><aside class="example"><div class="example-title"><span>Example 1</span></div>
 <p>For example a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> wishing
  to run alongside other services on <code>example.com</code>
  might set its <a href="#dfn-url-prefix" class="internalDFN" data-link-type="dfn">URL prefix</a> to <code>/wd</code>
  so that a <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">new session</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> would be invoked
  by sending a POST request to <code>/wd/session</code>,
  rather than <code>/session</code>.
</p></aside>

<p>In order to <dfn data-dfn-type="dfn" id="dfn-match-a-request">match a request</dfn> given
 a <a href="#dfn-method" class="internalDFN" data-link-type="dfn"><var>method</var></a> and <a href="#dfn-url" class="internalDFN" data-link-type="dfn"><var>URL</var></a>,
 the following steps must be taken:

</p><ol>
 <li><p>Let <var>endpoints</var> be a list
  containing each row in the <a href="#dfn-table-of-endpoints" class="internalDFN" data-link-type="dfn">table of endpoints</a>.

 </p></li><li><p>Remove each entry from <var>endpoints</var>
  for which the concatenation of the <a href="#dfn-url-prefix" class="internalDFN" data-link-type="dfn">URL prefix</a>
  and the entry’s <var>URI template</var>
  does not match <var>URL</var>’s <a href="#dfn-path" class="internalDFN" data-link-type="dfn">path</a>.

 </p></li><li><p>If there are no entries in <var>endpoints</var>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unknown-command" class="internalDFN" data-link-type="dfn">unknown command</a>.

 </p></li><li><p>Remove each entry in <var>endpoints</var>
  for which the <i>method</i> column
  is not an exact case-sensitive match for <var>method</var>.

 </p></li><li><p>If there are no entries in <var>endpoints</var>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unknown-method" class="internalDFN" data-link-type="dfn">unknown method</a>.

 </p></li><li><p>There is now exactly one entry in <var>endpoints</var>;
  let <var>entry</var> be this entry.

 </p></li><li><p>Let <var>parameters</var> be the result of extracting the variables
  from <var>URL</var> using <var>entry</var>’s <var>URI template</var>.

 </p></li><li><p>Let <var>command</var> be <var>entry</var>’s <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data
  <var>command</var> and <var>parameters</var>.
</p></li></ol>
</section> <!-- /Routing Requests -->

<section id="list-of-endpoints" typeof="bibo:Chapter" resource="#list-of-endpoints" property="bibo:hasPart">
<h3 id="h-list-of-endpoints" resource="#h-list-of-endpoints"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5 </span>List of Endpoints</span></h3>

<p>The following <dfn data-dfn-type="dfn" id="dfn-table-of-endpoints">table of endpoints</dfn> lists
 the <a href="#dfn-method" class="internalDFN" data-link-type="dfn">method</a> and <a href="#dfn-uri-templates" class="internalDFN" data-link-type="dfn">URI template</a>
 for each <a href="#dfn-endpoint-node" class="internalDFN" data-link-type="dfn">endpoint node</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>.

</p><table class="simple">
 <tbody><tr>
  <th>Method</th>
  <th>URI Template</th>
  <th>Command</th>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session</td>
  <td><a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a></td>
 </tr>

 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}</td>
  <td><a href="#dfn-delete-session" class="internalDFN" data-link-type="dfn">Delete Session</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/url</td>
  <td><a href="#dfn-get" class="internalDFN" data-link-type="dfn">Get</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/url</td>
  <td><a href="#dfn-get-current-url" class="internalDFN" data-link-type="dfn">Get Current Url</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/back</td>
  <td><a href="#dfn-back" class="internalDFN" data-link-type="dfn">Back</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/forward</td>
  <td><a href="#dfn-forward" class="internalDFN" data-link-type="dfn">Forward</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/refresh</td>
  <td><a href="#dfn-refresh" class="internalDFN" data-link-type="dfn">Refresh</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/title</td>
  <td><a href="#dfn-get-title" class="internalDFN" data-link-type="dfn">Get Title</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/window</td>
  <td><a href="#dfn-get-window-handle" class="internalDFN" data-link-type="dfn">Get Window Handle</a></td>
 </tr>

 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}/window</td>
  <td><a href="#dfn-close-window" class="internalDFN" data-link-type="dfn">Close Window</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window</td>
  <td><a href="#dfn-switch-to-window" class="internalDFN" data-link-type="dfn">Switch To Window</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/window/handles</td>
  <td><a href="#dfn-get-window-handles" class="internalDFN" data-link-type="dfn">Get Window Handles</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/fullscreen</td>
  <td><a href="#dfn-fullscreen-window" class="internalDFN" data-link-type="dfn">Fullscreen Window</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/maximize</td>
  <td><a href="#dfn-maximize-window" class="internalDFN" data-link-type="dfn">Maximize Window</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/size</td>
  <td><a href="#dfn-set-window-size" class="internalDFN" data-link-type="dfn">Set Window Size</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/window/size</td>
  <td><a href="#dfn-get-window-size" class="internalDFN" data-link-type="dfn">Get Window Size</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/frame</td>
  <td><a href="#dfn-switch-to-frame" class="internalDFN" data-link-type="dfn">Switch To Frame</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/frame/parent</td>
  <td><a href="#dfn-switch-to-parent-frame" class="internalDFN" data-link-type="dfn">Switch To Parent Frame</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element</td>
  <td>Find Element</td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/elements</td>
  <td>Find Elements</td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/active</td>
  <td><a href="#dfn-get-active-element" class="internalDFN" data-link-type="dfn">Get Active Element</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/displayed</td>
  <td><a href="#dfn-is-element-displayed" class="internalDFN" data-link-type="dfn">Is Element Displayed</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/selected</td>
  <td><a href="#dfn-is-element-selected" class="internalDFN" data-link-type="dfn">Is Element Selected</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/attribute/{<var>name</var>}</td>
  <td><a href="#dfn-get-element-attribute" class="internalDFN" data-link-type="dfn">Get Element Attribute</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/property/{<var>name</var>}</td>
  <td><a href="#dfn-get-element-property" class="internalDFN" data-link-type="dfn">Get Element Property</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/css/{<var>property name</var>}</td>
  <td><a href="#dfn-get-element-css-value" class="internalDFN" data-link-type="dfn">Get Element CSS Value</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/text</td>
  <td>Get Element Text</td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/name</td>
  <td><a href="#dfn-get-element-tag-name" class="internalDFN" data-link-type="dfn">Get Element Tag Name</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/rect</td>
  <td><a href="#dfn-get-element-rect" class="internalDFN" data-link-type="dfn">Get Element Rect</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/enabled</td>
  <td><a href="#dfn-is-element-enabled" class="internalDFN" data-link-type="dfn">Is Element Enabled</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/execute/sync</td>
  <td><a href="#dfn-execute-script" class="internalDFN" data-link-type="dfn">Execute Script</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/execute/async</td>
  <td><a href="#dfn-execute-async-script" class="internalDFN" data-link-type="dfn">Execute Async Script</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/cookie/{<var>name</var>}</td>
  <td><a href="#dfn-get-cookie" class="internalDFN" data-link-type="dfn">Get Cookie</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/cookie</td>
  <td><a href="#dfn-add-cookie" class="internalDFN" data-link-type="dfn">Add Cookie</a></td>
 </tr>

 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}/cookie/{<var>name</var>}</td>
  <td><a href="#dfn-delete-cookie" class="internalDFN" data-link-type="dfn">Delete Cookie</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/timeouts</td>
  <td><a href="#dfn-set-timeout" class="internalDFN" data-link-type="dfn">Set Timeout</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/actions</td>
  <td>Actions</td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/click</td>
  <td><a href="#dfn-element-click" class="internalDFN" data-link-type="dfn">Element Click</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/tap</td>
  <td><a href="#dfn-element-tap" class="internalDFN" data-link-type="dfn">Element Tap</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/clear</td>
  <td><a href="#dfn-element-clear" class="internalDFN" data-link-type="dfn">Element Clear</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/sendKeys</td>
  <td><a href="#dfn-element-send-keys" class="internalDFN" data-link-type="dfn">Element Send Keys</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/dismiss</td>
  <td><a href="#dfn-dismiss-alert" class="internalDFN" data-link-type="dfn">Dismiss Alert</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/accept</td>
  <td><a href="#dfn-accept-alert" class="internalDFN" data-link-type="dfn">Accept Alert</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/alert/text</td>
  <td><a href="#dfn-get-alert-text" class="internalDFN" data-link-type="dfn">Get Alert Text</a></td>
 </tr>

 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/text</td>
  <td><a href="#dfn-send-alert-text" class="internalDFN" data-link-type="dfn">Send Alert Text</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/screenshot</td>
  <td><a href="#dfn-take-screenshot" class="internalDFN" data-link-type="dfn">Take Screenshot</a></td>
 </tr>

 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/screenshot</td>
  <td><a href="#dfn-take-element-screenshot" class="internalDFN" data-link-type="dfn">Take Element Screenshot</a></td>
 </tr>
</tbody></table>
</section> <!-- /List of Endpoints -->

<section id="handling-errors" typeof="bibo:Chapter" resource="#handling-errors" property="bibo:hasPart">
<h3 id="h-handling-errors" resource="#h-handling-errors"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.6 </span>Handling Errors</span></h3>

<p>Errors are represented in the WebDriver protocol
 with a HTTP response with a HTTP status in the 4xx or 5xx range,
 and a JSON body containing details of the error.
 This JSON body has three fields:
 <code>error</code>, containing a string indicating the error type;
 <code>message</code>, containing an implementation-defined string
 with a human readable description of the kind of error that occured;
 and <code>stacktrace</code>, containing an implementation-defined string
 with a stack trace report of the active stack frames at the time when the error occurred.

</p><aside class="example"><div class="example-title"><span>Example 2</span></div>
 <p>A <code>DELETE</code> request to <code>/session/1234</code>,
 where <code>1234</code> is not the <a href="#dfn-session-id" class="internalDFN" data-link-type="dfn">session id</a> of a <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>
 would return an HTTP response with the status 404 and a body of the form:

 </p><pre class="highlight prettyprint prettyprinted" style=""><span class="pun">{</span><span class="pln">
  </span><span class="str">"error"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"invalid session id"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"message"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"No active session with id 1234"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"stacktrace"</span><span class="pun">:</span><span class="pln"> </span><span class="str">""</span><span class="pln">
</span><span class="pun">}</span></pre>
</aside>

<p>The following table lists each <dfn data-dfn-type="dfn" id="dfn-error-code">error code</dfn>,
 its associated HTTP status,
 JSON <code>error</code> code,
 and a non-normative description of the error.
 The <dfn data-dfn-type="dfn" id="dfn-error-response-data">error response data</dfn> for a particular <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>
 is the values of the <i>HTTP Status</i>
 and <i>JSON Error Code</i> columns for the row corresponding to that <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>.

</p><table class="simple">
 <tbody><tr>
  <th>Error Code
  </th><th>HTTP Status
  </th><th>JSON Error Code
  </th><th>Description
 </th></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-element-not-selectable">element not selectable</dfn>
  </td><td>400
  </td><td><code>element not selectable</code>
  </td><td>An attempt was made to select an element that cannot be selected.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-element-not-visible">element not visible</dfn>
  </td><td>400
  </td><td><code>element not visible</code>
  </td><td>An element <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> could not be completed
   because the element is not visible on the page.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-argument">invalid argument</dfn>
  </td><td>400
  </td><td><code>invalid argument</code>
  </td><td>The arguments passed to a <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
   are either invalid or malformed.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-cookie-domain">invalid cookie domain</dfn>
  </td><td>400
  </td><td><code>invalid cookie domain</code>
  </td><td>An illegal attempt was made to set a cookie
   under a different domain than the current page.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-element-coordinates">invalid element coordinates</dfn>
  </td><td>400
  </td><td><code>invalid element coordinates</code>
  </td><td>The coordinates provided to an interactions operation are invalid.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-element-state">invalid element state</dfn>
  </td><td>400
  </td><td><code>invalid element state</code>
  </td><td>An element <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> could not be completed
   because the element is in an invalid state,
   e.g. attempting to click an element
   that is no longer attached to the <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a>.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-selector">invalid selector</dfn>
  </td><td>400
  </td><td><code>invalid selector</code>
  </td><td>Argument was an invalid selector.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-invalid-session-id">invalid session id</dfn>
  </td><td>404
  </td><td><code>invalid session id</code>
  </td><td>Occurs if the given <a href="#dfn-session-id" class="internalDFN" data-link-type="dfn">session id</a> is not in the list of <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>,
   meaning the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> either does not exist or that it’s not active.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-javascript-error">javascript error</dfn>
  </td><td>500
  </td><td><code>javascript error</code>
  </td><td>An error occurred while executing JavaScript supplied by the user.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-move-target-out-of-bounds">move target out of bounds</dfn>
  </td><td>500
  </td><td><code>move target out of bounds</code>
  </td><td>The target for mouse interaction is not in the browser’s viewport
   and cannot be brought into that viewport.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-no-such-alert">no such alert</dfn>
  </td><td>400
  </td><td><code>no such alert</code>
  </td><td>An attempt was made to operate on a modal dialog
   when one was not open.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-no-such-element">no such element</dfn>
  </td><td>404
  </td><td><code>no such element</code>
  </td><td>An element could not be located on the page
   using the given search parameters.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-no-such-frame">no such frame</dfn>
  </td><td>400
  </td><td><code>no such frame</code>
  </td><td>A request to switch to a frame
   could not be satisfied because the frame could not be found.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-no-such-window">no such window</dfn>
  </td><td>400
  </td><td><code>no such window</code>
  </td><td>A request to switch to a window
   could not be satisfied because the window could not be found.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-script-timeout">script timeout</dfn>
  </td><td>408
  </td><td><code>script timeout</code>
  </td><td>A script did not complete before its timeout expired.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-session-not-created">session not created</dfn>
  </td><td>500
  </td><td><code>session not created</code>
  </td><td>A new <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> could not be created.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-stale-element-reference">stale element reference</dfn>
  </td><td>400
  </td><td><code>stale element reference</code>
  </td><td>An element <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> failed because
   the referenced <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is no longer attached to the DOM.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-timeout">timeout</dfn>
  </td><td>408
  </td><td><code>timeout</code>
  </td><td>An operation did not complete before its timeout expired.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unable-to-set-cookie">unable to set cookie</dfn>
  </td><td>500
  </td><td><code>unable to set cookie</code>
  </td><td>A request to set a cookie’s value could not be satisfied.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unable-to-capture-screen">unable to capture screen</dfn>
  </td><td>500
  </td><td><code>unable to capture screen</code>
  </td><td>A screen capture was made impossible.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unexpected-alert-open">unexpected alert open</dfn>
  </td><td>500
  </td><td><code>unexpected alert open</code>
  </td><td>A modal dialog was open, blocking this operation.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unknown-command">unknown command</dfn>
  </td><td>404
  </td><td><code>unknown command</code>
  </td><td>A <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> could not be executed
   because the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> is not aware of it.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unknown-error">unknown error</dfn>
  </td><td>500
  </td><td><code>unknown error</code>
  </td><td>An unknown error occurred in the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>
   while processing the <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unknown-method">unknown method</dfn>
  </td><td>405
  </td><td><code>unknown method</code>
  </td><td>The requested <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> matched a known URL
   but did not match an method for that URL.
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-unsupported-operation">unsupported operation</dfn>
  </td><td>500
  </td><td><code>unsupported operation</code>
  </td><td>Indicates that a <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> that should have
   executed properly cannot be supported for some reason.
 </td></tr>
</tbody></table>
</section> <!-- /Handling Errors -->

<section id="protocol-extensions" typeof="bibo:Chapter" resource="#protocol-extensions" property="bibo:hasPart">
<h3 id="h-protocol-extensions" resource="#h-protocol-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.7 </span>Protocol Extensions</span></h3>

<p>The protocol is designed to allow extension to meet vendor-specific needs.
 Commands that are specific to a user agent
 are called <dfn data-dfn-type="dfn" id="dfn-extension-commands">extension commands</dfn>
 and behave no differently than other <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>;
 each has a dedicated HTTP endpoint and a set of <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a>.

</p><p>Each <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a> has an associated
 <dfn data-dfn-type="dfn" id="dfn-extension-command-name">extension command name</dfn>
 that is a lowercased <a href="#dfn-ascii-string" class="internalDFN" data-link-type="dfn">ASCII string</a>,
 and which should bear some resemblance to what the command performs.
 The name is used to form an <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a>’s
 <a data-lt="extension command URL" href="#dfn-url" class="internalDFN" data-link-type="dfn">URL</a>.

</p><p>The <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a>’s <dfn data-dfn-type="dfn" id="dfn-extension-command-url">extension command URL</dfn>
 is a <a href="#dfn-url" class="internalDFN" data-link-type="dfn">URL</a> composed of the <a href="#dfn-extension-prefix" class="internalDFN" data-link-type="dfn">extension prefix</a>,
 followed by "<code>/</code>",
 and the <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a>’s <a data-lt="extension command name" href="#dfn-extension-command-name" class="internalDFN" data-link-type="dfn">name</a>.
 The <a href="#dfn-extension-command-url" class="internalDFN" data-link-type="dfn">extension command URL</a>,
 along with the HTTP method and <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a>,
 is added to the <a href="#dfn-table-of-endpoints" class="internalDFN" data-link-type="dfn">table of endpoints</a>
 and thus follows the same rules for <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">request routing</a>
 as that of other built-in <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>.

</p><aside class="example"><div class="example-title"><span>Example 3</span></div>
 <p>This might lead to a URL of the form
  <code>/session/5d376174-36f0-11e5-9b9a-6bdf200a3f7f/<var>moz</var>/<var>context</var></code>,
  where <var>moz</var> is an <a href="#dfn-extension-prefix" class="internalDFN" data-link-type="dfn">extension prefix</a>
  and the vendor prefix associated with Mozilla,
  and <var>context</var> the <a href="#dfn-extension-command-name" class="internalDFN" data-link-type="dfn">extension command name</a>
  that, in the context of Firefox, allows a <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a>
  to switch between content- and chrome contexts.
  Requesting this URL will call the <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension command</a>’s <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a>.
</p></aside>

<p>The <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>’s <dfn data-dfn-type="dfn" id="dfn-extension-prefix">extension prefix</dfn>
 is a lowercased <a href="#dfn-ascii-string" class="internalDFN" data-link-type="dfn">ASCII string</a> that forms a URL path element,
 separating <a href="#dfn-extension-commands" class="internalDFN" data-link-type="dfn">extension commands</a>
 from other <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>
 to avoid potential resource conflicts with other implementations.
 It is suggested that vendors use their vendor prefixes
 without additional characters as outlined in [<cite><a class="bibref" href="#bib-CSS21">CSS21</a></cite>],
 notably in <a href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">section 4.1.2.2 on <i>vendor keywords</i></a>,
 as the name for this path element.

</p></section> <!-- /Protocol Extensions -->
</section> <!-- /The WebDriver Protocol -->

<section id="capabilities" typeof="bibo:Chapter" resource="#capabilities" property="bibo:hasPart">
<!--OddPage--><h2 id="h-capabilities" resource="#h-capabilities"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>Capabilities</span></h2>

<p>WebDriver <dfn data-dfn-type="dfn" id="dfn-capabilities">capabilities</dfn> allow the <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a>
 to specify what features it requires the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> to fulfill
 to be able to create a <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">new session</a>.

</p><p>When <dfn data-dfn-type="dfn" id="dfn-processing-capabilities">processing capabilities</dfn> with argument <var>parameters</var>
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:

</p><ol>
 <li><p>Let <var>server capabilities</var> be a JSON Object
  with the following entries:

  </p><dl>
   <dt>"<code>specificationLevel</code>"
   </dt><dd>The level of the specification that the user agent supports.

   </dd><dt>"<code>browserName</code>"
   </dt><dd>The lowercase name of the user agent.

   </dd><dt>"<code>browserVersion</code>"
   </dt><dd>The version of the user agent.

   </dd><dt>"<code>platformName</code>"
   </dt><dd>The lowercase name of the platform.

   </dd><dt>"<code>platformVersion</code>"
   </dt><dd>The version of the platform.

   </dd><dt>"<code>acceptSslCerts</code>"
   </dt><dd>Be true if the User Agent can handle
    invalid SSL certifications
    else let it be false.

   </dd><dt>"<code>takesScreenshot</code>"
   </dt><dd>Be true if the user agent can capture a screenshot of the viewport
    described in <a href="#dfn-take-screenshot" class="internalDFN" data-link-type="dfn">Take Screenshot</a>.

   </dd><dt>"<code>takesElementScreenshot</code>"
   </dt><dd>Be true if the user agent can capture a screenshot of an element
    as described in <a href="#dfn-take-element-screenshot" class="internalDFN" data-link-type="dfn">Take Element Screenshot</a>.
  </dd></dl>

 </li><li><p>Let <var>required capabilities</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
  named <code>requiredCapabilities</code> from <var>capabilities</var>.

 </p></li><li>If <var>required capabilities</var> is not a JSON Object,
  set the value to an empty JSON Object.

 </li><li><p>Let <var>desired capabilities</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
  named <code>desiredCapabilities</code> from <var>capabilities</var>.

 </p></li><li>If <var>desired capabilities</var> is not a JSON Object,
  set the value to an empty JSON Object.

 </li><li><p>Let <var>length</var> be the length of <var>required capabilities</var>.

 </p></li><li><p>Let <var>k</var> be 0.

 </p></li><li><p>While <var>k</var> &lt; <var>length</var>:

  </p><ol>
   <li><p>Let <var>capability</var> be the entry
    in <var>required capabilities</var> at index <var>k</var>.

   </p></li><li><p>If the name of the <var>capability</var> is among
    the names of entries in <var>desired capabilities</var>,
    remove the corresponding entry from <var>desired capabilities</var>.

   </p></li><li>Increase <var>k</var> by 1.
  </li></ol>

 </li><li><p>Let <var>unmet capabilities</var> be an empty JSON List.

 </p></li><li><p>Let <var>unprocessed capabilities</var> be a JSON Object
  that contains all entries from <var>required capabilities</var>
  and all entries from <var>desired capabilities</var>.

 </p></li><li><p>Let <var>j</var> be 0.

 </p></li><li><p>Let <var>capabilties length</var> be
  the length of <var>unprocessed capabilities</var>.

 </p></li><li><p>While <var>j</var> &lt; <var>capabilities length</var>:

  </p><ol>
   <li><p>Let <var>unprocessed capability</var> be the entry at index <var>j</var>
    in <var>unprocessed capabilities</var>.

   </p></li><li><p>If during the steps below the <var>unprocessed capability</var>
    equals an entry in <var>required capabilities</var>
    and name of <var>unprocessed capability</var> entry among the names
    of entries in <var>server capabilities</var>
    and the values do not match do the following:

    </p><ol>
     <li><p>Append a string containing the property name
      and the differences between the values.
    </p></li></ol>

   </li><li><p>Let <var>browser name</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>browserName</code> from <var>unprocessed capability</var>.
    If <var>browser name</var> is undefined move to the next step.

   </p></li><li><p>Let <var>browser version</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>browserVersion</code> from <var>unprocessed capability</var>.
    If <var>browser version</var> is undefined move to the next step.

   </p></li><li><p>Let <var>platform name</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>platformName</code> from <var>unprocessed capability</var>.
    If <var>platform name</var> is undefined move to the next step.

   </p></li><li><p>Let <var>platform version</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>platformVersion</code> from <var>unprocessed capability</var>.
    If <var>platform version</var> is undefined move to the next step.

   </p></li><li><p>Let <var>proxy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>proxy</code> from <var>unprocessed capability</var>.
    If <var>proxy</var> is undefined move to the next step.
    If <var>proxy</var> is defined and not a map,
    append a string saying that a JSON Object is required,
    else call <a href="#dfn-set-the-proxy" class="internalDFN" data-link-type="dfn">set the proxy</a> passing in <var>proxy</var>.

   </p></li><li><p>Let <var>page load strategy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
    named <code>pageLoadStrategy</code> from <var>unprocessed capability</var>.
    If <var>page load strategy</var> is undefined,
    then set the entry <code>pageLoadStrategy</code>
    in <var>server capabilities</var> to normal.
  </p></li></ol>

 </li><li><p>If the length of <var>unmet capabilities</var> is not equal to 0,
  return <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a> with data <var>unmet capabilities</var>.

 </p></li><li><p>Return <var>server capabilities</var>.
</p></li></ol>

<p>To <dfn data-dfn-type="dfn" id="dfn-set-the-proxy">set the proxy</dfn> from a JSON Object <var>proxy</var>:

</p><ol>
 <li><p>Let <var>proxy type</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <code>proxyType</code> from <var>proxy</var>.

 </p></li><li><p>Switch on <var>proxy type</var>:

  </p><dl class="switch">
   <dt>"<code>pac</code>"
   </dt><dd><p>If the implementation supports <a href="#dfn-proxy-autoconfiguration" class="internalDFN" data-link-type="dfn">proxy autoconfiguration</a>,
    set the implementation’s autoproxy configuration URL
    to <var>proxy autoconfiguration url</var>.

    </p><p>Otherwise return an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>
     with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

   </p></dd><dt>"<code>noproxy</code>"
   </dt><dd><p>Set the proxy to No Proxy using implementation defined steps.
    If this can not be set during this process return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

   </p></dd><dt>"<code>autodetect</code>"
   </dt><dd><p>Set the proxy to Auto-Detect proxy setting from the network
    using implementation defined steps.
    If this can not be set during this process return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

   </p></dd><dt>"<code>system</code>"
   </dt><dd><p>Set the proxy to use system proxy settings using implementation defined steps.
    If this can not be set during this process return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

   </p></dd><dt>"<code>manual</code>"
   </dt><dd>
    <ol>
     <li><p>Let <var>ftp proxy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>ftpProxy</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>ftp proxy port</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>ftpProxyPort</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>http proxy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>httpProxy</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>http proxy port</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>httpProxyPort</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>ssl proxy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>sslProxy</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>ssl proxy port</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>sslProxyPort</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>socks proxy</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>socksProxy</code> from <var>proxy</var>.

     </p></li><li><p>Let <var>socks proxy port</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
      named <code>socksProxyPort</code> from <var>proxy</var>.

     </p></li><li><p>If <var>socks proxy</var> and <var>socks proxy port</var> is defined:

      </p><ol>
        <li><p>Let <var>socks version</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
         named <code>socksVersion</code> from <var>proxy</var>.

        </p></li><li><p>Let <var>socks username</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
         named <code>socksUsername</code> from <var>proxy</var>.

        </p></li><li><p>Let <var>socks password</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
         named <code>socksPassword</code> from <var>proxy</var>.
      </p></li></ol>

     </li><li><p>Follow implementation defined steps to set the proxy
      using defined variables from previous steps.
      If there are items that can not be set during this process return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.
    </p></li></ol>

   </dd><dt>Otherwise
   </dt><dd><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.
  </p></dd></dl>
</li></ol>
</section> <!-- /Capabilities -->

<section id="sessions" typeof="bibo:Chapter" resource="#sessions" property="bibo:hasPart">
<!--OddPage--><h2 id="h-sessions" resource="#h-sessions"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>Sessions</span></h2>

<p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> is equivalent to a single instantiation of a particular user agent,
 including all its child browsers.
 WebDriver gives each <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> a unique <a href="#dfn-session-id" class="internalDFN" data-link-type="dfn">session ID</a>
 that can be used to differentiate one session from another,
 allowing multiple user agents to be controlled from a single HTTP server,
 and allowing sessions to be routed via a multiplexer
 (known as an <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary node</a>).

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> is started when
 a <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a> is invoked.
 It is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> to send any commands before starting a session,
 or to continue to send commands after
 the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has been closed.
 Maintaining session continuity between requests to
 the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> requires passing a <a href="#dfn-session-id" class="internalDFN" data-link-type="dfn">session ID</a>.

</p><p>A WebDriver <dfn data-dfn-type="dfn" id="dfn-session">session</dfn> represents
 the connection between a <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a> and a specific <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>.
 A <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> that is not an <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary node</a>
 has at most one <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active session</a> at a given time.

</p><div class="issue" id="issue-5"><div class="issue-title" aria-level="3" role="heading" id="h-issue5"><span>Issue 5</span></div><p class="">Need to explain that there must be a relationship
 between the current session and the browser state.

</p></div><p>The <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> is set up at the invocation of a <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a>,
 and torn down at some later point;
 either explicitly by invoking <a href="#dfn-delete-session" class="internalDFN" data-link-type="dfn">Delete Session</a>,
 or implicitly when <a href="#dfn-close-window" class="internalDFN" data-link-type="dfn">Close Window</a> is called
 at the last remaining <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>.

</p><p>A <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> has an associated list of
 <dfn data-dfn-type="dfn" id="dfn-active-sessions">active sessions</dfn>,
 which is a list of all <a href="#dfn-session" class="internalDFN" data-link-type="dfn">sessions</a> that are currently started.

</p><p>Requests, except <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a> requests,
 have an associated <dfn data-dfn-type="dfn" id="dfn-current-session">current session</dfn>,
 which is the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> in which that request's command will run.

</p><p>A <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> has an associated
 <dfn data-dfn-type="dfn" id="dfn-maximum-active-sessions">maximum active sessions</dfn> (an integer)
 that defines the number of <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>
 that are supported.
 This may be “unlimited” for <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary nodes</a>,
 but must be exactly one for a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> that is an <a href="#dfn-endpoint-node" class="internalDFN" data-link-type="dfn">endpoint node</a>.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-session-id">session ID</dfn>
 (a <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a>) used to uniquely identify this session.  Unless
 stated otherwise it is null.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-current-browsing-context">current browsing context</dfn>,
 which is the <a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">browsing context</a> against which <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a> will run.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated
 <dfn data-dfn-type="dfn" id="dfn-current-top-level-browsing-context">current top-level browsing context</dfn>,
 which is the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> if it itself is a <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>,
 or the <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a> for which
 the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is an <a href="#dfn-ancestor-browsing-context" class="internalDFN" data-link-type="dfn">ancestor browsing context</a>.

</p><p>The <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a> is said
 to be <dfn data-dfn-type="dfn" id="dfn-no-longer-open">no longer open</dfn> if it has been <a href="#dfn-a-browsing-context-is-discarded" class="internalDFN" data-link-type="dfn">discarded</a>.

</p><p>Each <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>
 has an associated <dfn data-dfn-type="dfn" id="dfn-window-handle">window handle</dfn>,
 which is a string uniquely identifying that browsing context.
 This string is implementation defined but <em class="rfc2119" title="MUST">MUST</em> not be "current".

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-session-script-timeout">session script timeout</dfn>
 that specifies a time to wait for scripts to run.
 Unless stated otherwise it is 30,000 milliseconds.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-session-page-load-timeout">session page load timeout</dfn>
 that specifies a time to wait for the page loading to complete.
 Unless stated otherwise it is 300,000 milliseconds.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-session-implicit-wait-timeout">session implicit wait timeout</dfn>
 that specifies a time to wait for the implicit element location strategy
 when locating elements using Find Element and Find Elements.
 Unless stated otherwise it is zero milliseconds.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated <dfn data-dfn-type="dfn" id="dfn-page-loading-strategy">page loading strategy</dfn>,
 which is one of <i>none</i>, <i>normal</i>, and <i>eager</i>.
 Unless stated otherwise, it is <i>normal</i>.

</p><p>A <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> has an associated unexpected user prompt handler.

</p><p>When asked to <dfn data-dfn-type="dfn" id="dfn-close-the-session">close the session</dfn>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must take the following steps:

</p><ol>
 <li><p>Set the <a href="#dfn-webdriver-active-flag" class="internalDFN" data-link-type="dfn">webdriver-active flag</a> to false.

 </p></li><li><p><a href="#dfn-close-a-browsing-context" class="internalDFN" data-link-type="dfn">Close</a> any <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing contexts</a>
  associated with the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a>,
  without <a href="#dfn-prompt-to-unload-a-document" class="internalDFN" data-link-type="dfn">prompting to unload</a>.

 </p></li><li><p>Remove the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a> from <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>.

 </p></li><li><p>Perform any implementation-specific cleanup steps.
</p></li></ol>

<p>Closing a <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> might cause the associated browser process to be killed.
 It is assumed that any implementation-specific cleanup steps
 are performed <em>after</em> the response has been sent back to the client
 so that the <a href="#dfn-connection" class="internalDFN" data-link-type="dfn">connection</a> is not prematurely closed.

</p><section id="new-session" typeof="bibo:Chapter" resource="#new-session" property="bibo:hasPart">
<h3 id="h-new-session" resource="#h-new-session"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1 </span>New Session</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-new-session">New Session</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 creates a new WebDriver <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> with the <a href="#dfn-endpoint-node" class="internalDFN" data-link-type="dfn">endpoint node</a>.
 If the <a href="#dfn-maximum-active-sessions" class="internalDFN" data-link-type="dfn">maximum active sessions</a> has been reached,
 that is if the <a href="#dfn-endpoint-node" class="internalDFN" data-link-type="dfn">endpoint node</a> already has a <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>,
 there is a problem processing the given <a href="#dfn-capabilities" class="internalDFN" data-link-type="dfn">capabilities</a>,
 or the provisioning of a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> is impossible,
 a <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><p>If the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> is an <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary node</a>,
 they are allowed to freely use the <a href="#dfn-capabilities" class="internalDFN" data-link-type="dfn">capabilities</a> data
 e.g. to select a specific browser to test based on
 a combination of the required
 and desired capabilities.
 Typically the <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">New Session</a> response from the <a href="#dfn-endpoint-node" class="internalDFN" data-link-type="dfn">endpoint node</a>
 selected in this process will then be relayed directly to the <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a>,
 as outlined in step 1 of the <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> is an <a href="#dfn-intermediary-node" class="internalDFN" data-link-type="dfn">intermediary node</a>,
  take implementation-defined steps that either result in
  returning an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a>,
  or in returning a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data
  that is isomorphic to that returned by <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote ends</a>
  according to the rest of this algorithm.

 </p></li><li><p>If the <a href="#dfn-maximum-active-sessions" class="internalDFN" data-link-type="dfn">maximum active sessions</a> is equal to
  the length of the list of <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a>.

 </p></li><li><p>If there is a <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a>.

 </p></li><li><p>Let <var>capabilities</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
  named "<code>capabilities</code>" from the <var>parameters</var> argument.

 </p></li><li><p>Let <var>capabilities result</var> be the result of <a href="#dfn-processing-capabilities" class="internalDFN" data-link-type="dfn">processing capabilities</a>
  with <var>capabilities</var> as an argument.

 </p></li><li><p>If <var>capabilities result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-session-not-created" class="internalDFN" data-link-type="dfn">session not created</a>.

 </p></li><li><p>Let <var>capabilities</var> be <var>capabilities result</var>’s data.

 </p></li><li><p>Let <var>session id</var> be the result of generating a UUID.

 </p></li><li><p>Let <var>session</var> be a new <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a>
  with the <a href="#dfn-session-id" class="internalDFN" data-link-type="dfn">session ID</a> of <var>session id</var>.

 </p></li><li><p>Set the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a> to <var>session</var>.

 </p></li><li><p>Append <var>session</var> to <a href="#dfn-active-sessions" class="internalDFN" data-link-type="dfn">active sessions</a>.

 </p></li><li><p>Let <var>body</var> be a JSON Object initialised with:

  </p><dl>
   <dt>"<code>sessionId</code>"
   </dt><dd>The value of <var>session id</var>.

   </dd><dt>"<code>capabilities</code>"
   </dt><dd>The value of <var>resultant capabilities</var>.
  </dd></dl>

 </li><li><p>Initialise the following if not set while <a href="#dfn-processing-capabilities" class="internalDFN" data-link-type="dfn">processing capabilities</a>:

  </p><ol>
   <li><p>Set the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-session-script-timeout" class="internalDFN" data-link-type="dfn">session script timeout</a> to 30,000 milliseconds.
   </p></li><li><p>Set the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> to 300,000 milliseconds.
   </p></li><li><p>Set the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-session-implicit-wait-timeout" class="internalDFN" data-link-type="dfn">session implicit wait timeout</a> to 0 (zero) milliseconds.
   </p></li><li><p>Set the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-page-loading-strategy" class="internalDFN" data-link-type="dfn">page loading strategy</a> to normal.
   </p></li><li><p>Set the <a href="#dfn-webdriver-active-flag" class="internalDFN" data-link-type="dfn">webdriver-active flag</a> to true.</p>
  </li></ol>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section>

<section id="delete-session" typeof="bibo:Chapter" resource="#delete-session" property="bibo:hasPart">
<h3 id="h-delete-session" resource="#h-delete-session"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.2 </span>Delete Session</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-delete-session">Delete Session</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> <a href="#dfn-close-a-browsing-context" class="internalDFN" data-link-type="dfn">closes</a>
 any <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing contexts</a> associated with the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>,
 terminates the <a href="#dfn-connection" class="internalDFN" data-link-type="dfn">connection</a>,
 and finally <a data-lt="close the session" href="#dfn-close-a-browsing-context" class="internalDFN" data-link-type="dfn">closes</a> the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
  <li><p><a href="#dfn-close-the-session" class="internalDFN" data-link-type="dfn">Close the session</a>.
  </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Delete Session -->

<section id="set-timeout" typeof="bibo:Chapter" resource="#set-timeout" property="bibo:hasPart">
<h3 id="h-set-timeout" resource="#h-set-timeout"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.3 </span>Set Timeout</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/timeouts</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-set-timeout">Set Timeout</dfn> command sets timeouts
 associated with the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>.
 The timeouts that can be controlled are
 the <a href="#dfn-session-script-timeout" class="internalDFN" data-link-type="dfn">session script timeout</a>,
 the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a>,
 and the <a href="#dfn-session-implicit-wait-timeout" class="internalDFN" data-link-type="dfn">session implicit wait timeout</a>.

</p><p>The following <dfn data-dfn-type="dfn" id="dfn-table-of-session-timeouts">table of session timeouts</dfn>
 lists pairs of different timeouts that may be changed
 with the string codes used to identify them:

</p><table class="simple">
 <tbody><tr>
  <th>Type
  </th><th>Identifier
 </th></tr>

 <tr>
  <td><a href="#dfn-session-script-timeout" class="internalDFN" data-link-type="dfn">session script timeout</a>
  </td><td>"<code>script</code>"
 </td></tr>

 <tr>
  <td><a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a>
  </td><td>"<code>page load</code>"
 </td></tr>

 <tr>
  <td><a href="#dfn-session-implicit-wait-timeout" class="internalDFN" data-link-type="dfn">session implicit wait timeout</a>
  </td><td>"<code>implicit</code>"
 </td></tr>
</tbody></table>

<p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> for
 the <a href="#dfn-set-timeout" class="internalDFN" data-link-type="dfn">Set Timeout</a> command are:

</p><ol>
 <li><p>For each row in the <a href="#dfn-table-of-session-timeouts" class="internalDFN" data-link-type="dfn">table of session timeouts</a>,
  enumerated as <var>type</var> and <var>identifier</var>:

  </p><ol>
   <li><p>If <var>parameters</var> does not have
    an <a href="#dfn-own-property" class="internalDFN" data-link-type="dfn">own property</a> <var>identifier</var>,
    continue to the next entry.

   </p></li><li><p>Let <var>timeout</var> be the result of
    <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> using <var>identifier</var>
    from <var>parameters</var>.

   </p></li><li><p>If <var>timeout</var> is of the
   <code><a href="#dfn-number" class="internalDFN" data-link-type="dfn">Number</a></code> type
   and a non-negative integer,
   set the <var>type</var> timeout to
   <var>timeout</var>’s value in milliseconds.

   </p><p>Otherwise, return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with
    <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.
  </p></li></ol>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
</p></li></ol>
</section> <!-- /Set Timeout -->
</section> <!-- /Sessions -->

<section id="navigation" typeof="bibo:Chapter" resource="#navigation" property="bibo:hasPart">
<!--OddPage--><h2 id="h-navigation" resource="#h-navigation"><span property="xhv:role" resource="xhv:heading"><span class="secno">7. </span>Navigation</span></h2>
<p>The <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a> in this section allow navigation of
 the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> to new URLs
 and introspection of the document currently loaded in this <a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">browsing context</a>.

</p><p>For commands that cause a new document to load,
 the point at which the <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> returns
 is determined by the session’s page load strategy.
 A value of <code>normal</code> causes the command
 to return after the <code>load</code> event fires on the new page,
 a value of <code>eager</code> causes it to return
 after <code>DOMContentLoaded</code> fires,
 and a value of <code>none</code> causes it to return immediately.

</p><p>Navigation actions are also affected by the value of
 the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a>,
 which determines the maximum time that commands will block
 before returning with a <a href="#dfn-timeout" class="internalDFN" data-link-type="dfn">timeout</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

</p><section id="get" typeof="bibo:Chapter" resource="#get" property="bibo:hasPart">
<h3 id="h-get" resource="#h-get"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.1 </span>Get</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td id="post-url">/session/{<var>session id</var>}/url</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get">Get</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> is used
 to cause the user agent to navigate
 the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> a new location.
 From a user’s point of view,
 it is as if they have entered a <a href="#dfn-url" class="internalDFN" data-link-type="dfn">URL</a> into the address bar
 of the browser’s chrome.</p>

<aside class="example"><div class="example-title"><span>Example 4</span></div>
 <p>To navigate the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
  of the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a> with ID <i>1</i> to <code>http://example.com/</code>,
  the <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a> would POST to <i>/session/1/url</i> with the body:

 </p><pre class="highlight prettyprint prettyprinted" style=""><span class="pun">{</span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.com/"</span><span class="pun">}</span></pre>
</aside>

<p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>url</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named "<code>url</code>"
  from the <var>parameters</var> argument.

 </p></li><li><p>If <var>url</var> is undefined,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p></li><li><p><a href="#dfn-navigate" class="internalDFN" data-link-type="dfn">Navigate</a> the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> to <var>url</var>.
  If this navigation results in a HTTP 401 response,
  the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must proceed with the steps below,
  irrespective of how the authentication challenge is handled.

 </p></li><li><p>If the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-page-loading-strategy" class="internalDFN" data-link-type="dfn">page loading strategy</a>
  is none jump to the next step in this overall set of steps.

  </p><p>Otherwise:

  </p><ol>
   <li><p>Let <var>readiness target</var> be "<code>interactive</code>"
    if the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s <a href="#dfn-page-loading-strategy" class="internalDFN" data-link-type="dfn">page loading strategy</a> is eager,
    or "<code>complete</code>" if it is normal.

   </p></li><li><p>Wait for the current document readiness to reach <var>readiness target</var>,
    or for the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> milliseconds to pass,
    whichever occurs sooner.

   </p></li><li><p>If the previous step completed by the load timeout being reached,
    and the browser is not currently displaying an alert,
    <!-- perhaps? Not sure if this is what the spec is trying to say -->
    return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-timeout" class="internalDFN" data-link-type="dfn">timeout</a>.
  </p></li></ol>

 </li><li><p>Set the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>
  to the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>

<div class="issue" id="issue-6"><div class="issue-title" aria-level="4" role="heading" id="h-issue6"><span>Issue 6</span></div><div class="">
 <p>Figure out if next paragraph is actually required:

 </p><blockquote>
  <p>When a page contains a META tag with the "http-equiv" attribute set to "refresh",
   a response <em class="rfc2119" title="MUST">MUST</em> be returned if the timeout is greater than 1 second
   and the other criteria for determining whether a page is loaded are met.
   When the refresh period is 1 second or less
   and the page loading strategy is "normal" or "conservative"
   implementations <em class="rfc2119" title="MUST">MUST</em> wait for the refresh to complete before responding.
 </p></blockquote>
</div></div>

</section> <!-- /Get -->

<section id="get-current-url" typeof="bibo:Chapter" resource="#get-current-url" property="bibo:hasPart">
<h3 id="h-get-current-url" resource="#h-get-current-url"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2 </span>Get Current Url</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/url</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-current-url">Get Current Url</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 returns the URL of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>url</var> be the <a data-lt="url serialiser" href="#dfn-url-serialiser" class="internalDFN" data-link-type="dfn">serialisation</a>
  of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>’s
  <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>’s <a href="#dfn-document-url" class="internalDFN" data-link-type="dfn">document URL</a>.

 </p></li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" property set to <var>url</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>data</var>.</p></li>
</ol>
</section>

<section id="back" typeof="bibo:Chapter" resource="#back" property="bibo:hasPart">
<h3 id="h-back" resource="#h-back"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.3 </span>Back</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/back</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-back">Back</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 causes the browser to traverse one step backward
 in the joint session history of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p><a href="#dfn-traverse-the-history-by-a-delta" class="internalDFN" data-link-type="dfn">Traverse the history by a delta</a> –1
  for the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.

 </p></li><li><p>If the task queued by that algorithm aborted before
  <a href="#dfn-traverse-the-history" class="internalDFN" data-link-type="dfn">traversing the history</a>, return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.

 </p></li><li><p>Otherwise, wait until the <a href="#dfn-current-entry" class="internalDFN" data-link-type="dfn">current entry</a>
  in the session history has changed,
  or for the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> milliseconds to pass,
  whichever occurs sooner.

  </p><div class="issue" id="issue-7"><div class="issue-title" aria-level="4" role="heading" id="h-issue7"><span>Issue 7</span></div><p class="">This doesn’t actually wait for the page to load
   if traversing the session history kicks off a navigation.

 </p></div></li><li><div class="issue" id="issue-8"><div class="issue-title" aria-level="4" role="heading" id="h-issue8"><span>Issue 8</span></div><p class="">Perhaps? Not sure if this is what the spec is trying to say?

  </p></div><p>If the previous step completed by the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> being reached,
   and the browser is not currently displaying an alert,
   return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-timeout" class="internalDFN" data-link-type="dfn">timeout</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Back -->

<section id="forward" typeof="bibo:Chapter" resource="#forward" property="bibo:hasPart">
<h3 id="h-forward" resource="#h-forward"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.4 </span>Forward</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/forward</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-forward">Forward</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 causes the browser to traverse one step forwards
 in the joint session history of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p><a href="#dfn-traverse-the-history-by-a-delta" class="internalDFN" data-link-type="dfn">Traverse the history by a delta</a> 1
  for the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.

 </p></li><li><p>If the task queued by that algorithm aborted before
  <a href="#dfn-traverse-the-history" class="internalDFN" data-link-type="dfn">traversing the history</a>,
  return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.

 </p></li><li><p>Otherwise, wait until the <a href="#dfn-current-entry" class="internalDFN" data-link-type="dfn">current entry</a>
  in the session history has changed,
  or for the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> milliseconds to pass,
  whichever occurs sooner.

  </p><div class="issue" id="issue-9"><div class="issue-title" aria-level="4" role="heading" id="h-issue9"><span>Issue 9</span></div><p class="">This doesn't actually wait for the page to load
   if traversing the session history kicks off a navigation.

 </p></div></li><li><div class="issue" id="issue-10"><div class="issue-title" aria-level="4" role="heading" id="h-issue10"><span>Issue 10</span></div><p class="">Perhaps? Not sure if this is what the spec is trying to say.

  </p></div><p>If the previous step completed by the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> being reached,
   and the browser is not currently displaying an alert,
   return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-timeout" class="internalDFN" data-link-type="dfn">timeout</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Forward -->

<section id="refresh" typeof="bibo:Chapter" resource="#refresh" property="bibo:hasPart">
<h3 id="h-refresh" resource="#h-refresh"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.5 </span>Refresh</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/refresh</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-refresh">Refresh</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 causes the browser to reload the page in in <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><div class="issue" id="issue-11"><div class="issue-title" aria-level="4" role="heading" id="h-issue11"><span>Issue 11</span></div><p class="">Not sure if this needs to consider the reload override flag.

  </p></div><p><a href="#dfn-navigate" class="internalDFN" data-link-type="dfn">Navigate</a> the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
   to the same resource as its <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>,
   with <a href="#dfn-replacement-enabled" class="internalDFN" data-link-type="dfn">replacement enabled</a>.
 </p></li>

 <li><p>If the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s page load strategy is none,
  jump to the next step in this overall set of steps.

  </p><p>Otherwise:

  </p><ol>
   <li><p>Let <var>readiness target</var> be "<code>interactive</code>"
    if the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>’s page load strategy is eager,
    or "<code>complete</code>" if it is normal.

   </p></li><li><p>Wait for the current document readiness to reach <var>readiness target</var>,
    or for the <a href="#dfn-session-page-load-timeout" class="internalDFN" data-link-type="dfn">session page load timeout</a> milliseconds to pass,
    whichever occurs sooner.

   </p></li><li><div class="issue" id="issue-12"><div class="issue-title" aria-level="4" role="heading" id="h-issue12"><span>Issue 12</span></div><p class="">Perhaps? Not sure if this is what the spec is trying to say.

    </p></div><p>If the previous step completed by the load timeout being reached,
     and the browser is not currently displaying an alert,
     return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-timeout" class="internalDFN" data-link-type="dfn">timeout</a>.
  </p></li></ol>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Refresh -->

<section id="get-title" typeof="bibo:Chapter" resource="#get-title" property="bibo:hasPart">
<h3 id="h-get-title" resource="#h-get-title"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.6 </span>Get Title</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/title</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-title">Get Title</dfn> command returns the <a href="#dfn-document-title" class="internalDFN" data-link-type="dfn">document title</a>
 of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
 equivalent to calling <code>window.top.document.title</code>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>title</var> be the value of the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>'s
  <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>'s <a href="#dfn-document-title" class="internalDFN" data-link-type="dfn">title</a>.

 </p></li><li><p>Let <var>data</var> be a new JSON Object.

 </p></li><li><p>Set the property "<code>value</code>" of <var>data</var>
  to the value of <var>title</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>data</var>.
</p></li></ol>
</section> <!-- /Get Title -->
</section>

<section id="invalid-ssl-certificates" typeof="bibo:Chapter" resource="#invalid-ssl-certificates" property="bibo:hasPart">
<!--OddPage--><h2 id="h-invalid-ssl-certificates" resource="#h-invalid-ssl-certificates"><span property="xhv:role" resource="xhv:heading"><span class="secno">8. </span>Invalid SSL Certificates</span></h2>

<div class="issue" id="issue-13"><div class="issue-title" aria-level="3" role="heading" id="h-issue13"><span>Issue 13</span></div><p class=""><strong>Warning:</strong>
 This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><table class="simple">
 <tbody><tr><td>Capability Name</td> <td>Type</td></tr>
 <tr><td>secureSsl</td> <td>boolean</td></tr>
</tbody></table>

<p>WebDriver implementations <em class="rfc2119" title="MUST">MUST</em> support users
 accessing sites served via HTTPS.
 Access to those sites using self-signed or invalid certificates,
 and where the certificate does not match the serving domain
 <em class="rfc2119" title="MUST">MUST</em> be the same as if the HTTPS was configured properly.

</p><div class="note"><div class="note-title" aria-level="3" role="heading" id="h-note1"><span>Note</span></div><p class="">The reason for this is that implementations of this spec are often used for testing.
 It's a sorry fact that many QA engineers and testers are asked
 to verify that apps work on sites that have insecure HTTPS configurations.

</p></div><p>The exception to requirement is if the <a href="#dfn-capabilities" class="internalDFN" data-link-type="dfn">Capabilities</a>
 used to initialize has the WebDriver session had
 the capability <code>secureSsl</code> set to true.
 In this case, implementations <em class="rfc2119" title="MAY">MAY</em> choose to make accessing a site
 with bad HTTPS configurations cause a <code>WebDriverException</code> to be thrown.
 Remote end implementations <em class="rfc2119" title="MUST">MUST</em>
 return an <a href="#dfn-unknown-error" class="internalDFN" data-link-type="dfn">unknown error</a> <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> in this case.
 If this is the case, the <a href="#dfn-capabilities" class="internalDFN" data-link-type="dfn">Capabilities</a> describing the session
 <em class="rfc2119" title="MUST">MUST</em> also set the <code>secureSsl</code> capability to "true".
</p></section> <!-- /Invalid SSL Certificates -->

<section id="command-contexts" typeof="bibo:Chapter" resource="#command-contexts" property="bibo:hasPart">
<!--OddPage--><h2 id="h-command-contexts" resource="#h-command-contexts"><span property="xhv:role" resource="xhv:heading"><span class="secno">9. </span>Command Contexts</span></h2>

<p>Many WebDriver <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a> happen in the context of either
 the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> or <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.
 The <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is represented in the protocol
 by its associated <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handle</a>.
 A <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a> is selected
 using the <a href="#dfn-switch-to-window" class="internalDFN" data-link-type="dfn">Switch To Window</a> command.
 Once this is done, a specific browsing context can be selected
 using the <a href="#dfn-switch-to-frame" class="internalDFN" data-link-type="dfn">Switch to Frame</a> command.

</p><div class="note"><div class="note-title" aria-level="3" role="heading" id="h-note2"><span>Note</span></div><p class="">The use of the term “window” to
 refer to a <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>
 is legacy and doesn’t correspond with either
 the operating system notaion of a “window”
 or the DOM <code>Window</code> object.

</p></div><div class="note"><div class="note-title" aria-level="3" role="heading" id="h-note3"><span>Note</span></div><p class="">In accordance with
 the <a href="http://www.w3.org/TR/html5/editing.html#focus">focus</a>
 section of the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] specification,
 commands are unaffected by whether
 the operating system window has focus or not.

</p></div><section id="get-window-handle" typeof="bibo:Chapter" resource="#get-window-handle" property="bibo:hasPart">
<h3 id="h-get-window-handle" resource="#h-get-window-handle"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1 </span>Get Window Handle</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/window</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-window-handle">Get Window Handle</dfn> command returns
 the <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handle</a> for the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.
 It can be used as an argument to <a href="#dfn-switch-to-window" class="internalDFN" data-link-type="dfn">Switch To Window</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>data</var> be a new JSON Object.

 </p></li><li><p>Set the property "<code>value</code>" on <var>data</var>
  to the value of the <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handle</a> associated with
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

 </p></li><li>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>data</var>.
</li></ol>
</section> <!-- /Get Window Handle -->

<section id="close-window" typeof="bibo:Chapter" resource="#close-window" property="bibo:hasPart">
<h3 id="h-close-window" resource="#h-close-window"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2 </span>Close Window</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}/window</td>
 </tr>
</tbody></table>

<p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> for the <dfn data-dfn-type="dfn" id="dfn-close-window">Close Window</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><div class="issue" id="issue-14"><div class="issue-title" aria-level="4" role="heading" id="h-issue14"><span>Issue 14</span></div><p class="">This can prompt unload,
  in which case the operation really failed.

  </p></div><p><a href="#dfn-close-a-browsing-context" class="internalDFN" data-link-type="dfn">Close</a> the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

 </p></li><li><p>If there are no more open <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing contexts</a>,
  then <a href="#dfn-close-the-session" class="internalDFN" data-link-type="dfn">close the session</a>.

 </p></li><li>Return the result of running the <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a>
  for the <a href="#dfn-get-window-handles" class="internalDFN" data-link-type="dfn">Get Window Handles</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>.
</li></ol>
</section> <!-- /Close Window -->

<section id="switch-to-window" typeof="bibo:Chapter" resource="#switch-to-window" property="bibo:hasPart">
<h3 id="h-switch-to-window" resource="#h-switch-to-window"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.3 </span>Switch To Window</span></h3>

<table class="simple jsoncommand">
  <tbody><tr>
    <th>HTTP Method</th>
    <th>Path Template</th>
  </tr>
  <tr>
    <td>POST</td>
    <td>/session/{<var>session id</var>}/window</td>
  </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-switch-to-window">Switch To Window</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 is used to select the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
 for the current <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a>,
 i.e. the one that will be used for processing <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><div class="issue" id="issue-15"><div class="issue-title" aria-level="4" role="heading" id="h-issue15"><span>Issue 15</span></div><p class="">This needs further work:

</p></div><ol>
 <li><p>Let <var>handle</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named "<code>handle</code>"
  from the <var>parameters</var> argument.

 </p></li><li><p>If <var>handle</var> is equal to the associated <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handle</a>
  for some <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a> in the <a href="#dfn-current-session" class="internalDFN" data-link-type="dfn">current session</a>.

 </p></li><li><p>Set the <a href="#dfn-session" class="internalDFN" data-link-type="dfn">session</a>’s <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
  to that browsing context, and return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.

 </p></li><li><p>Otherwise, return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.
</p></li></ol>
</section> <!-- /Switch To Window -->

<section id="get-window-handles" typeof="bibo:Chapter" resource="#get-window-handles" property="bibo:hasPart">
<h3 id="h-get-window-handles" resource="#h-get-window-handles"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.4 </span>Get Window Handles</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/window/handles</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-window-handles">Get Window Handles</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 returns a list of <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handles</a>
 for every open <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>.
 The order in which the window handles are returned is arbitary.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>Let <var>handles</var> be a JSON List.

 </p></li><li><p>For each <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a> in the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>,
  push the associated <a href="#dfn-window-handle" class="internalDFN" data-link-type="dfn">window handle</a> onto <var>handles</var>.

 </p></li><li><p>Let <var>body</var> be a JSON object
  with the property "<code>value</code>" set to <var>handles</var>.

 </p></li><li>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</li></ol>

<aside class="example"><div class="example-title"><span>Example 5</span></div>
 <p>In order to determine whether or not a particular interaction
  with the browser opens a new window,
  one can obtain the set of window handles before the interaction is performed
  and compare it with the set after the action is performed.
</p></aside>
</section> <!-- /Get Window Handles -->

<section id="switch-to-frame" typeof="bibo:Chapter" resource="#switch-to-frame" property="bibo:hasPart">
<h3 id="h-switch-to-frame" resource="#h-switch-to-frame"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.5 </span>Switch To Frame</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/frame</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-switch-to-frame">Switch To Frame</dfn> command is used to select
 the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> or a <a href="#dfn-child-browsing-context" class="internalDFN" data-link-type="dfn">child browsing context</a>
 of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> to use as the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>
 for subsequent <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>id</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named "<code>id</code>"
  from the <var>parameters</var> argument.

 </p></li><li><p>Run the substeps of the first matching condition:

  </p><dl class="switch">
   <dt><var>id</var> is null
   </dt><dd>
    <ol>
     <li><p>Set the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> to
      the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.
    </p></li></ol>

   </dd><dt><var>id</var> is a <code>Number</code> object
   </dt><dd>
    <ol>
     <li><p>If <var>id</var> is less than 0 or greater than 2<sup>16</sup> – 1,
      return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-frame" class="internalDFN" data-link-type="dfn">no such frame</a>.

     </p></li><li><p>Let <var>window</var> be the <a href="#dfn-associated-window" class="internalDFN" data-link-type="dfn">associated window</a>
      of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>.

     </p></li><li><p>If <var>id</var> is not
      a <a href="#dfn-supported-property-indices" class="internalDFN" data-link-type="dfn">supported property index</a> of <var>window</var>,
      return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-frame" class="internalDFN" data-link-type="dfn">no such frame</a>.

     </p></li><li><p>Let <var>child window</var> be the <code>WindowProxy</code> object
      obtained by <a href="#dfn-determine-the-value-of-an-indexed-property" class="internalDFN" data-link-type="dfn">determining the value of an indexed property</a>
      of <var>window</var> with index <var>id</var>.

     </p></li><li><p>Set the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> to
      <var>new window</var>’s browsing context.</p></li>
    </ol>

   </dd><dt><var>id</var> <a href="#dfn-represents-a-web-element" class="internalDFN" data-link-type="dfn">represents a web element</a>
   </dt><dd>
    <ol>
     <li><div class="issue" id="issue-16"><div class="issue-title" aria-level="4" role="heading" id="h-issue16"><span>Issue 16</span></div><p class="">Note that representing a web element
      will have to do the same document checks, or something.

      </p></div><p>Let <var>element</var> be the result of <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a>
       by <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> <var>id</var>.

     </p></li><li><p>If <var>element</var> is not a <code>frame</code>
      or <code>iframe</code> element,
      return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-frame" class="internalDFN" data-link-type="dfn">no such frame</a>.

     </p></li><li><p>Set the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> to element’s
      <a href="#dfn-nested-browsing-context" class="internalDFN" data-link-type="dfn">nested browsing context</a>.
    </p></li></ol>

  </dd><dt>Otherwise</dt>
  <dd>
   <ol>
    <li><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-frame" class="internalDFN" data-link-type="dfn">no such frame</a>.
   </p></li></ol>
 </dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>

<div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note4"><span>Note</span></div><p class="">WebDriver is not bound by the same origin policy,
 so it is always possible to switch into child browsing contexts,
 even if they are different origin to the current browsing context.
</p></div></section> <!-- /Switch To Frame -->

<section id="switch-to-parent-frame" typeof="bibo:Chapter" resource="#switch-to-parent-frame" property="bibo:hasPart">
<h3 id="h-switch-to-parent-frame" resource="#h-switch-to-parent-frame"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.6 </span>Switch To Parent Frame</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/frame/parent</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-switch-to-parent-frame">Switch to Parent Frame</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 sets the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> for future <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>
 to the parent of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is not equal to
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
  set the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> to
  the <a href="#dfn-parent-browsing-context" class="internalDFN" data-link-type="dfn">parent browsing context</a> of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Switch To Parent Frame -->

<section id="resizing-and-positioning-windows" typeof="bibo:Chapter" resource="#resizing-and-positioning-windows" property="bibo:hasPart">
<h3 id="h-resizing-and-positioning-windows" resource="#h-resizing-and-positioning-windows"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7 </span>Resizing and Positioning Windows</span></h3>

<p>WebDriver provides <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>
 for interacting with the operating system window
 containing the current browsing context.
 Because different operating system's window managers provide different abilities,
 not all of the commands in this section can be supported by all <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote ends</a>.
 Where a <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> is not supported,
 an <a href="#dfn-unsupported-operation" class="internalDFN" data-link-type="dfn">unsupported operation</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><section id="get-window-size" typeof="bibo:Chapter" resource="#get-window-size" property="bibo:hasPart">
<h4 id="h-get-window-size" resource="#h-get-window-size"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7.1 </span>Get Window Size</span></h4>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{sessionId}/window/size</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-window-size">Get Window Size</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 returns the size of the operating system window corresponding
 to the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><div class="issue" id="issue-17"><div class="issue-title" aria-level="5" role="heading" id="h-issue17"><span>Issue 17</span></div><p class="">Can this whole operation be unsupported?

</p></div><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
   return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>width</var> be the width in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>
  of the operating system window containing
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
  including any browser chrome and externally drawn window decorations.

 </p></li><li><p>Let <var>height</var> be the height in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>
  of the operating system window containing
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
  including any browser chrome and any externally drawn window decorations.

 </p></li><li><p>Let <var>body</var> be a new JSON Object initialised with:

  </p><dl>
   <dt>"<code>width</code>"
   </dt><dd>The value of <var>width</var>.

   </dd><dt>"<code>height</code>"
   </dt><dd>The value of <var>height</var>.
  </dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>

<div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note5"><span>Note</span></div><p class="">In some user agents the dimensions of the browser
 including window decorations are provided by
 the proprietary <code>window.outerWidth</code>
 and <code>window.outerHeight</code> properties.
</p></div></section> <!-- /Get Window Size -->

<section id="set-window-size" typeof="bibo:Chapter" resource="#set-window-size" property="bibo:hasPart">
<h4 id="h-set-window-size" resource="#h-set-window-size"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7.2 </span>Set Window Size</span></h4>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/size</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-set-window-size">Set Window Size</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 alters the size of the operating system window
 corresponding to the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>If the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> does not support
  the <a href="#dfn-set-window-size" class="internalDFN" data-link-type="dfn">Set Window Size</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> for
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> for any reason,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unsupported-operation" class="internalDFN" data-link-type="dfn">unsupported operation</a>.

 </p></li><li><p>Let <var>width</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <code>width</code>
  from the <var>parameters</var> argument.

 </p></li><li><p>If <var>width</var> is not an integer, or is less than 0,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p></li><li><p>Let <var>height</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <code>height</code>
  from the <var>parameters</var> argument.

 </p></li><li><p>If <var>height</var> is not an integer, or is less than 0,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p><div class="issue" id="issue-18"><div class="issue-title" aria-level="5" role="heading" id="h-issue18"><span>Issue 18</span></div><p class="">Window sizes outside the allowed range.

 </p></div></li><li><p>Set the width, in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>,
  of the operating system window containing
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
  including any browser chrome and externally drawn window decorations
  to a value that is as close as possible to <var>width</var>.

 </p></li><li><p>Set the height, in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>,
  of the operating system window containing
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>,
  including any browser chrome and externally drawn window decorations
  to a value that is as close as possible to <var>height</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>

<div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note6"><span>Note</span></div><p class="">The specification does not guarantee
 that the resulting window size will exactly match that which was requested.
 In particular the implementation is expected to clamp values
 that are larger than the physical screen dimensions,
 or smaller than the minimum window size.
 Particular implemetations may have other limitations
 such as not being able to resize in single-pixel increments.
</p></div></section> <!-- /Set Window Size -->

<section id="maximize-window" typeof="bibo:Chapter" resource="#maximize-window" property="bibo:hasPart">
<h4 id="h-maximize-window" resource="#h-maximize-window"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7.3 </span>Maximize Window</span></h4>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/maximize</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-maximize-window">Maximize Window</dfn> command
 invokes the window manager-specific “maximize” operation, if any,
 on the window containing the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.
 This typically increases the window to the maximum available size
 without going full-screen.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>If the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> does not support
  the <a href="#dfn-maximize-window" class="internalDFN" data-link-type="dfn">Maximize Window</a> command
  for the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> for any reason,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unsupported-operation" class="internalDFN" data-link-type="dfn">unsupported operation</a>.

 </p></li><li><p>Run the implementation-specific steps
  to increase the dimensions of the operating system level window
  containing the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
  to the maximum available size allowed by the window manager.

 </p></li><li>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</li></ol>
</section> <!-- /Maximize Window -->

<section id="fullscreen-window" typeof="bibo:Chapter" resource="#fullscreen-window" property="bibo:hasPart">
<h4 id="h-fullscreen-window" resource="#h-fullscreen-window"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7.4 </span>Fullscreen Window</span></h4>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/window/fullscreen</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-fullscreen-window">Fullscreen Window</dfn> command
 invokes the window manager-specific “full screen” operation, if any,
 on the window containing the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.
 This typically increases the window to the size of the physical display
 and can hide browser UI elements such as toolbars.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>If the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> does not support
  the <a href="#dfn-fullscreen-window" class="internalDFN" data-link-type="dfn">Fullscreen Window</a> command
  for the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> for any reason,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unsupported-operation" class="internalDFN" data-link-type="dfn">unsupported operation</a>.

 </p></li><li><p>Run the implementation-specific steps,
   which should have the effect of making the dimensions of
   the window containing the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>
   as close as possible to the dimensions of the display containing the window,
   and may hide browser-provided UI such as toolbars.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Fullscreen Window -->

</section> <!-- /Switch To Window -->
</section> <!-- /Command Contexts -->

<section id="elements" typeof="bibo:Chapter" resource="#elements" property="bibo:hasPart">
<!--OddPage--><h2 id="h-elements" resource="#h-elements"><span property="xhv:role" resource="xhv:heading"><span class="secno">10. </span>Elements</span></h2>

<p>A <dfn data-dfn-type="dfn" id="dfn-web-element">web element</dfn> is an abstraction used to identify an <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 when it is transported across the <a href="#protocol">protocol</a>,
 between <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote</a>- and <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local</a> ends.

</p><p>The <dfn data-dfn-type="dfn" id="dfn-web-element-identifier">web element identifier</dfn> is a constant
 with the string "<code>element-6066-11e4-a52e-4f735466cecf</code>".

</p><p>Each <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> has an associated <dfn data-dfn-type="dfn" id="dfn-web-element-reference">web element reference</dfn> (a <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a>)
 that uniquely identifies the the element across all <a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">browsing contexts</a>.
 The <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a> for every <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 representing the same <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is the same.

</p><p>An ECMAScript <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a> <dfn data-dfn-type="dfn" id="dfn-represents-a-web-element">represents a web element</dfn>
 if it has a <a href="#dfn-web-element-identifier" class="internalDFN" data-link-type="dfn">web element identifier</a> <a href="#dfn-own-property" class="internalDFN" data-link-type="dfn">own property</a>
 holding a <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> value.

</p><p>Each <a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">browsing context</a> has an associated list of
 <dfn data-dfn-type="dfn" id="dfn-known-elements">known elements</dfn>.
 When the <a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">browsing context</a> is <a href="#dfn-a-browsing-context-is-discarded" class="internalDFN" data-link-type="dfn">discarded</a>,
 the list of <a href="#dfn-known-elements" class="internalDFN" data-link-type="dfn">known elements</a> is discarded along with it.

</p><p>To <dfn data-dfn-type="dfn" id="dfn-get-a-known-element">get a known element</dfn>
 by a <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> <var>reference</var>,
 return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with the <a href="#dfn-known-elements" class="internalDFN" data-link-type="dfn">known element</a>
 which <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a> matches <var>reference</var>.
 If there are none, return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>
 with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-element" class="internalDFN" data-link-type="dfn">no such element</a>.

</p><p>To <dfn data-dfn-type="dfn" id="dfn-create-a-web-element-reference">create a web element reference</dfn>
 for an <a href="#dfn-element" class="internalDFN" data-link-type="dfn"><var>element</var></a>:

</p><ol>
 <li><p>For each <var>known element</var>
  of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-known-elements" class="internalDFN" data-link-type="dfn">known elements</a>:

  </p><ol>
   <li><p>If <var>known element</var> <a href="#dfn-equals" class="internalDFN" data-link-type="dfn">equals</a> <var>element</var>,
    return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with <var>known element</var>’s <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a>.
  </p></li></ol>

 </li><li><p>Let <var>new reference</var> be the result of generating a new UUID.

 </p></li><li><p>Set <var>element</var>’s <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a>
  to <var>new reference</var>.

 </p></li><li><p>Append <var>element</var> to
  the <a href="#dfn-known-elements" class="internalDFN" data-link-type="dfn">known elements</a> of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data
  <var>element</var>’s <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a>.
</p></li></ol>

<p>When asked to
 <dfn data-dfn-type="dfn" id="dfn-serialize-the-element">serialize the element</dfn>
 <var>element</var>:

</p><ol>
 <li><p>Let <var>object</var> be a new JSON Object with properties:

  </p><dl>
   <dt><a href="#dfn-web-element-identifier" class="internalDFN" data-link-type="dfn">web element identifier</a>
   </dt><dd><p>Value of <var>element</var>’s <a href="#dfn-web-element-reference" class="internalDFN" data-link-type="dfn">web element reference</a>.
  </p></dd></dl>

 </li><li><p>Return <var>object</var>.
</p></li></ol>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-deserialize-the-web-element">deserialize the web element</dfn>
 by a JSON Object <var>object</var> that <a href="#dfn-represents-a-web-element" class="internalDFN" data-link-type="dfn">represents a web element</a>:

</p><ol>
 <li><p>If <var>object</var> has no <a href="#dfn-own-property" class="internalDFN" data-link-type="dfn">own property</a> <a href="#dfn-web-element-identifier" class="internalDFN" data-link-type="dfn">web element identifier</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p></li><li><p>Let <var>reference</var> be the result of
  <a data-lt="getting a property" href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting</a>
  the <a href="#dfn-web-element-identifier" class="internalDFN" data-link-type="dfn">web element identifier</a> property
  from <var>object</var>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> <var>reference</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>element</var>.
</p></li></ol>

<p>A <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">stale element</a> is a reference to a <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a>
 that has been disconnected from the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s DOM.
 To determine if an <var>element</var> <dfn data-dfn-type="dfn" id="dfn-is-stale">is stale</dfn>,
 run the following substeps:

</p><ol>
 <li><p>Let <var>document</var> be
  the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a>.

 </p></li><li><p>If <var>element</var> is <a href="#dfn-not-in-the-same-tree" class="internalDFN" data-link-type="dfn">not in the same tree</a> as <var>document</var>,
  return true.

 </p></li><li><p>Otherwise return false.
</p></li></ol>

<p>An <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is
 <dfn data-dfn-type="dfn" id="dfn-scrolled-into-view">scrolled into view</dfn>
 by calling <a href="#dfn-scrollintoview" class="internalDFN" data-link-type="dfn">scrollIntoView()</a>.

</p><section id="element-displayedness" typeof="bibo:Chapter" resource="#element-displayedness" property="bibo:hasPart">
<h3 id="h-element-displayedness" resource="#h-element-displayedness"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.1 </span>Element Displayedness</span></h3>

<p>The visibility of an <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is guided
 by what is perceptually visible to the human eye.
 In this context, an <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>'s displayedness
 does not relate to the <a href="#dfn-visibility" class="internalDFN" data-link-type="dfn"><code>visibility</code></a>
 or <a href="#dfn-display" class="internalDFN" data-link-type="dfn"><code>display</code></a> style properties.

</p><p>The approach used by WebDriver to ascertain an <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>'s visibility
 is based on crude approximations about its nature and relationship in the tree.
 An <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is in general to be considered visible
 if any part of it is drawn on the canvas within the bounderies of the viewport.

</p><p>When asked to
 <dfn data-dfn-type="dfn" id="dfn-normalize-style-pixel-values-to-floating-point">normalize style pixel values to floating point</dfn>
 for a value <var>s</var> of the type string:

</p><ol>
 <li><p>Let <var>trimmed string</var> be a substring of <var>s</var>
  where the suffix "<code>px</code>" is removed.

 </p></li><li><p>Let <var>pixels</var> be the result of parsing
  <var>trimmed string</var> as a float.

 </p></li><li><p>If <var>pixels</var> is not a valid float
  or the previous operation did not succeed, return <code>0.0</code>.

 </p></li><li><p>Round off <var>pixels</var> using a ceiling function
  so that it has no more than four decimals.

 </p></li><li><p>Return <var>pixels</var>.
</p></li></ol>

<div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note7"><span>Note</span></div><p class="">To <a href="#dfn-normalize-style-pixel-values-to-floating-point" class="internalDFN" data-link-type="dfn">normalize style pixel values to floating point</a>
 is almost equivalent to calling <a href="#dfn-parsefloat" class="internalDFN" data-link-type="dfn">parseFloat</a>
 from [<cite><a class="bibref" href="#bib-ECMA-262">ECMA-262</a></cite>] with the exception that
 non-valid float return values are returned as <code>0.0</code>.

</p></div><p>The <dfn data-dfn-type="dfn" id="dfn-element-displayed">element displayed</dfn> algorithm
 is a boolean state where true signifies that the element is displayed
 and false signifies that the element is not displayed.
 To compute the state on <var>element</var>:

</p><ol>
 <li><p>If the attribute <code>hidden</code> is set, return false.

 </p></li><li><p>If the computed value of the <code>display</code> style
  property is "none", return false.

    </p></li><li><div class="issue" id="issue-19"><div class="issue-title" aria-level="4" role="heading" id="h-issue19"><span>Issue 19</span></div><p class="">Not really sure what this means, needs review:

     </p></div><p>If it has a [<cite><a class="bibref" href="#bib-CSS3-2D-TRANSFORMS">CSS3-2D-TRANSFORMS</a></cite>] or [<cite><a class="bibref" href="#bib-CSS3-3D-TRANSFORMS">CSS3-3D-TRANSFORMS</a></cite>]
      style property that gives a negative X or Y coordinates to the canvas, return false.

 </p></li><li><p>If <var>element</var> is the document's root element,
  that is <code>document.documentElement</code>:

  </p><ol>
   <li><p>If the computed value of the <code>background-color</code>
    property is "transparent", run these substeps:

    </p><ol>
     <li><p>If <var>element</var> is an HTML <code>HTML</code>
      element [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>], and the computed value of the
      <code>background-color</code> style property of the first
      <code>body</code> element descendant of the element in
      <a href="#dfn-tree-order" class="internalDFN" data-link-type="dfn">tree order</a>, relative to that element, is also "transparent",
      return false.

      Otherwise return true.
    </p></li></ol>
  </li></ol>

 </li><li><p>If <var>element</var> is an <code>option</code>
  or <code>optgroup</code> element,
  and <var>element</var>'s parent node is a <code>select</code> element:

  </p><ol>
   <li><p>Apply the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayed</a> algorithm
    on <var>element</var>'s parent node.

   </p></li><li><p>If the return value is false, abort these steps and return that value.
  </p></li></ol>

 </li><li><p>If <var>element</var> is a <code>map</code> element:

  </p><ol>
   <li><p>Let <var>any images visible</var> be a boolean
    initially set to false.

   </p></li><li><p>For each <code>img</code> element, <var>image element</var>,
    in the document with a <code>name</code> attribute matching
    the value of <var>element</var>'s <code>usemap</code>
    attribute, run these substeps:

    </p><ol>
     <li><p>Run the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayed</a> algorithm on <var>image element</var>
      and set <var>any images visible</var> to <var>any images visible</var> bitwise OR its return value.
    </p></li></ol>

   </li><li><p>If <var>any images visible</var> is true,
    abort these steps and return its value.
 </p></li></ol>

 </li><li><p>If <var>element</var> is an <code>area</code> element:

  </p><ol>
   <li><p>For each ancestral element <var>parent</var>,
    in <a href="#dfn-tree-order" class="internalDFN" data-link-type="dfn">tree order</a>:

   </p><ol>
    <li><p>If <var>parent</var> is a <code>map</code> element,
     apply the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayed</a> algorithm on it.

    </p></li><li><p>If the return value is false,
     abort these steps and return that value.

    </p></li><li><p>Otherwise apply step 7.1 on <var>parent</var>.
   </p></li></ol>
  </li></ol>

 </li><li><p>If <var>element</var> is a [<cite><a class="bibref" href="#bib-DOM">DOM</a></cite>] <a href="#dfn-text-node" class="internalDFN" data-link-type="dfn">text node</a>,
  return true.

 </p></li><li><p>If it has equal to or more than one direct descendant elements:

  </p><ol>
   <li><p>Let <var>visible children</var> be a boolean initially set to false.

   </p></li><li><p>For each direct descendant element <var>child</var>:

   </p><ol>
    <li><p>Let <var>rectangle</var> be <var>child</var>’s <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">bounding rectangle</a>.

    </p></li><li><p>If the value of the <code>height</code> property of <var>rectangle</var> is
     greater than zero <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>,
     and the value of the <code>width</code> property of <var>rectangle</var>
     is greater than zero <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>:

     </p><ol>
      <li><p>Set <var>visible children</var> to <var>visible children</var> bitwise OR true.
     </p></li></ol>
   </li></ol>
  </li></ol>

 </li><li><p>For each ancestral element <var>parent</var>, in <a href="#dfn-tree-order" class="internalDFN" data-link-type="dfn">tree order</a>:

  </p><ol>
   <li><p>Apply the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayed</a> algorithm to <var>parent</var>.

   </p></li><li><p>If the return value is false, abort these steps and return that value.

   </p></li><li><p>If <var>parent</var> is a block element box and the
    computed values of either <code>overflow-x</code>
    or <code>overflow-y</code> is "hidden":

   </p><ol>
    <li><div class="issue" id="issue-20"><div class="issue-title" aria-level="4" role="heading" id="h-issue20"><span>Issue 20</span></div><p class=""><code>DOMRectList</code> has disappeared from [<cite><a class="bibref" href="#bib-GEOMETRY-1">GEOMETRY-1</a></cite>]
     and been replaced by <code>ArrayClass</code>,
     but there is no reference to it.

     </p></div><p>Let <var>parent dimensions</var> be the <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">rectangle</a>
     that is the first element of the <code>DOMRectList</code>
     array returned by calling <a href="#dfn-getclientrects" class="internalDFN" data-link-type="dfn">getClientRects</a> on <var>parent</var>.

    </p></li><li><p>Let <var>element dimensions</var> be the <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">rectangle</a>
     that is the first element of the <code>DOMRectList</code>
     array returned by calling <a href="#dfn-getclientrects" class="internalDFN" data-link-type="dfn">getClientRects</a> on <var>element</var>.

    </p></li><li><p>Let <var>parent style</var> be the computed style of <var>parent</var>.

    </p></li><li><p>Return false if any the following conditions evaluate to false:

    </p><ul>
     <li><p><var>element dimension</var>'s <code>top</code>
      is less than (<var>parent dimension</var>'s <code>bottom</code>
      − the <a href="#dfn-normalize-style-pixel-values-to-floating-point" class="internalDFN" data-link-type="dfn">normalized style pixel float value</a>
      of <var>parent style</var>'s <code>borderBottomWidth</code>).

     </p></li><li><p><var>element dimension</var>'s <code>bottom</code>
      is less than (<var>parent dimension</var>'s <code>top</code>
      − the <a href="#dfn-normalize-style-pixel-values-to-floating-point" class="internalDFN" data-link-type="dfn">normalized style pixel float value</a>
      of <var>parent style</var>'s <code>borderTopWidth</code>).

     </p></li><li><p><var>element dimension</var>'s <code>left</code>
      is less than (<var>parent dimension</var>'s <code>right</code>
      − the <a href="#dfn-normalize-style-pixel-values-to-floating-point" class="internalDFN" data-link-type="dfn">normalized style pixel float value</a>
      of <var>parent style</var>'s <code>borderRightWidth</code> casted as a float).

     </p></li><li><p><var>element dimension</var>'s <code>right</code>
      is less than (<var>parent dimension</var>'s <code>left</code>
      − the <a href="#dfn-normalize-style-pixel-values-to-floating-point" class="internalDFN" data-link-type="dfn">normalized style pixel float value</a>
      of <var>parent style</var>'s <code>borderLeftWidth</code> casted as a float).
   </p></li></ul>

   </li><li><p>Run step 10 on the parent elements of <var>parent</var>, if any.
  </p></li></ol>
 </li></ol>

 </li><li><p>Return true.
</p></li></ol>
</section> <!-- /Element Displayedness -->

<section id="get-active-element" typeof="bibo:Chapter" resource="#get-active-element" property="bibo:hasPart">
<h3 id="h-get-active-element" resource="#h-get-active-element"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.2 </span>Get Active Element</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/active</td>
 </tr>
</tbody></table>

<p><dfn data-dfn-type="dfn" id="dfn-get-active-element">Get Active Element</dfn> returns
 the <a href="https://html.spec.whatwg.org/#dom-document-activeelement">active element</a>
 of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
 <a href="https://dom.spec.whatwg.org/#concept-element">document element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>active element</var> be the <a href="#dfn-active-element" class="internalDFN" data-link-type="dfn">active element</a>
  of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a>.

 </p></li><li><p>Let <var>active web element</var> be the
  <a href="#dfn-serialize-the-element" class="internalDFN" data-link-type="dfn">serialization of the element</a> <var>active element</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>active web element</var>.
</p></li></ol>
</section> <!-- /Get Active Element -->
</section> <!-- /Elements -->

<section id="element-retrieval" typeof="bibo:Chapter" resource="#element-retrieval" property="bibo:hasPart">
<!--OddPage--><h2 id="h-element-retrieval" resource="#h-element-retrieval"><span property="xhv:role" resource="xhv:heading"><span class="secno">11. </span>Element Retrieval</span></h2>

<p>The Find Element and Find Elements <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>
 allows look up of individual and a collection of <a href="#dfn-element" class="internalDFN" data-link-type="dfn">elements</a>, respectively.
 Elements are <a data-lt="serialize the element" href="#dfn-serialize-the-element" class="internalDFN" data-link-type="dfn">serialised</a>
 and returned as web elements.
 <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">Web element</a> references are needed to interact with individual elements.

</p><p>An <dfn data-dfn-type="dfn" id="dfn-element-location-strategy">element location strategy</dfn>
 is an <a href="#dfn-enumerated-attribute" class="internalDFN" data-link-type="dfn">enumerated attribute</a>
 which decides what technique should be used
 to search for <a href="#dfn-element" class="internalDFN" data-link-type="dfn">elements</a> in the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>.
 The following table lists the keywords and states defined for this attribute:

</p><table class="simple">
 <tbody><tr>
  <th>State
  </th><th>Keyword
 </th></tr>

 <tr>
  <td>CSS selector
  </td><td>"<code>css selector</code>"
 </td></tr>

 <tr>
  <td>Link text selector
  </td><td>"<code>link text</code>"
 </td></tr>

 <tr>
  <td>Partial link text selector
  </td><td>"<code>partial link text</code>"
 </td></tr>

 <tr>
  <td>XPath selector
  </td><td>"<code>xpath</code>"
 </td></tr>
</tbody></table>

<div class="issue" id="issue-21"><div class="issue-title" aria-level="3" role="heading" id="h-issue21"><span>Issue 21</span></div><p class=""><strong>Warning:</strong>
 This rest of this section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><section id="css-selectors" typeof="bibo:Chapter" resource="#css-selectors" property="bibo:hasPart">
<h3 id="h-css-selectors" resource="#h-css-selectors"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.1 </span>CSS Selectors</span></h3>

<p>Strategy name: css selector</p>

<p>If a browser supports the
<a href="http://dev.w3.org/2006/webapi/selectors-api/">CSS Selectors API</a> ([<cite><a class="bibref" href="#bib-SELECTORS-API">SELECTORS-API</a></cite>]) it <em class="rfc2119" title="MUST">MUST</em> support locating elements by
CSS Selector. If the browser does not support the browser CSS Selector spec it <em class="rfc2119" title="MAY">MAY</em> choose to implement locating
by this mechanism. If the browser can support locating elements by CSS Selector, it <em class="rfc2119" title="MUST">MUST</em> set the "cssSelector" capability to boolean true when responding to the <a href="#newsession">newSession()</a>. Elements <em class="rfc2119" title="MUST">MUST</em> be returned in the same order as if "<code>querySelectorAll</code>" had been called with the <code>Locator</code>'s <code>value</code>. Compound selectors are allowed.</p>
</section> <!-- /CSS Selector -->

<section id="ecmascript" typeof="bibo:Chapter" resource="#ecmascript" property="bibo:hasPart">
<h3 id="h-ecmascript" resource="#h-ecmascript"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.2 </span>ECMAScript</span></h3>

<p>Finding elements by ecmascript is covered in the <a href="#ecmascript">ecmascript part of this spec</a>.
</p></section>

<section id="link-text" typeof="bibo:Chapter" resource="#link-text" property="bibo:hasPart">
<h3 id="h-link-text" resource="#h-link-text"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.3 </span>Link Text</span></h3>

<p>Strategy name: link text</p>

<p>This strategy <em class="rfc2119" title="MUST">MUST</em> be supported by all WebDriver implementations. </p>

<p>This strategy <em class="rfc2119" title="MUST">MUST</em> return all <a href="http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">"a"</a> elements with visible text exactly and case sensitively equal to the term being searched for.</p>

<div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note8"><span>Note</span></div><div class="">
      <p>This is equivalent to:</p>
      <pre>            elements = driver.find_elements(by = By.TAG_NAME, value = "a")
            result = []
            for element in elements:
              text = element.text
              if text == search_term:
                result.append(element)
          </pre>
          <p>Where "search_term" is the link text being searched for, and "result" contains the list of elements to return.</p>
    </div></div>
</section> <!-- /Link Text -->

<section id="partial-link-text" typeof="bibo:Chapter" resource="#partial-link-text" property="bibo:hasPart">
<h3 id="h-partial-link-text" resource="#h-partial-link-text"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.4 </span>Partial Link Text</span></h3>

<p>Strategy name: partial link text</p>

<p>This strategy <em class="rfc2119" title="MUST">MUST</em> be supported by all WebDriver implementations.</p>

<p>This strategy is very similar to <a href="#link-text">link text</a>, but rather than matching the entire string, only a subset needs to match. That is, this <em class="rfc2119" title="MUST">MUST</em> return all <a href="http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">"a"</a> elements with visible text that partially or completely and case sensitively matches the term being searched for.</p>

<div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note9"><span>Note</span></div><div class="">
      <p>This is equivalent to:</p>
      <pre>            elements = driver.find_elements(by = By.TAG_NAME, value = "a")
            result = []
            for element in elements:
              text = element.text
              if text.search(seach_term) != -1:
                result.append(element)
          </pre>
          <p>Where "search_term" is the link text being searched for, and "result" contains the list of elements to return.</p>
    </div></div>
</section> <!-- /Partial Link Text -->

<section id="xpath" typeof="bibo:Chapter" resource="#xpath" property="bibo:hasPart">
<h3 id="h-xpath" resource="#h-xpath"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.5 </span>XPath</span></h3>
<p>Strategy name: xpath</p>
<p>All WebDriver implementations <em class="rfc2119" title="MUST">MUST</em> support finding elements by XPath 1.0 [<cite><a class="bibref" href="#bib-XPATH">XPATH</a></cite>] with the <a href="http://dev.w3.org/html5/spec/Overview.html#interactions-with-xpath-and-xslt">edits from section 3.3</a> of the [<cite><a class="bibref" href="#bib-html51">html51</a></cite>] specification made. If no native support is present in the browser, a pure JS implementation <em class="rfc2119" title="MAY">MAY</em> be used. When called, the returned values <em class="rfc2119" title="MUST">MUST</em> be equivalent of calling "<a href="http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate">evaluate</a>" function from [<cite><a class="bibref" href="#bib-DOM-LEVEL-3-XPATH">DOM-LEVEL-3-XPATH</a></cite>] with the result type set to <a href="http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-SNAPSHOT-TYPE">ORDERED_NODE_SNAPSHOT_TYPE</a> (7).</p>
</section> <!-- /XPath -->

<p>When the <a href="#findelement">findElement()</a> or <a href="#findelements">findElements()</a> WebDriver Command is called the
following must be <var>parameters</var> after the local end has made a request to the remote end:

</p><ol>
 <li>Let <var>using</var> contain the <a href="#element-location-strategies">Element Location Strategy</a>.
 If it is not a valid stategy:
  <ul>
   <li>Set the HTTP Response status code to 500</li>
   <li>Let <var>status</var> be equal to <code><a href="#status-invalid-selector">Invalid Selector</a></code></li>
   <li>Let <var>value</var> be a statement that the strategy is invalid. It <em class="rfc2119" title="MAY">MAY</em> return a list of valid search strategies.</li>
  </ul>
 </li>
 <li>Let <var>value</var> contain a string that will be passed to the <a href="#element-location-strategies">Element Location Strategy</a> call.
 If <var>value</var> is an empty string or null:
  <ul>
   <li>Set the HTTP Response status code to 500</li>
   <li>Let <var>status</var> be equal to <a href="#status-invalid-selector">Invalid Selector</a></li>
   <li>Let <var>value</var> to a stating that the strategy is invalid. It <em class="rfc2119" title="MAY">MAY</em> return a list of valid search strategies.</li>
  </ul>
 </li>
 <li>Call the relevant <a href="#element-location-strategies">Element Location Strategy</a> and return what is described in <a href="#findelement">findElement()</a> or <a href="#findelements">findElements()</a> WebDriver Command described below.</li>
</ol>

<section id="find-element" typeof="bibo:Chapter" resource="#find-element" property="bibo:hasPart">
<h3 id="h-find-element" resource="#h-find-element"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.6 </span>Find Element</span></h3>

<div class="issue" id="issue-22"><div class="issue-title" aria-level="4" role="heading" id="h-issue22"><span>Issue 22</span></div><p class=""><strong>Warning:</strong>
 This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><p>
</p><table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/element</td>
 </tr>
</tbody></table>

<ol>
 <li>Let <var>id</var> be an identifier for a DOMElement returned from <a href="#element-location-strategies">Element Location Strategy</a>.
   If a NodeList is returned, the first element in the NodeList <em class="rfc2119" title="MUST">MUST</em> be used.
   <p>If <var>id</var> is empty:
     </p><ul>
       <li>Let the HTTP response status code be 501</li>
       <li>Let <var>status</var> contain the error <code><a href="#status-no-such-element">no such element</a></code></li>
       <li>Let <var>value</var> contain the details of the search contained in <var>using</var> and <var>value</var> above.</li>
     </ul>
   <p>If an error is returned from <a href="#element-location-strategies">Element Location Strategy</a> do the following.(todo describe how the error is returned)
     </p><ul>
       <li>Let the HTTP response status code be 501</li>
       <li>Let <var>status</var> contain the error <code><a href="#status-invalid-selector">invalid selector</a></code></li>
       <li>Let <var>value</var> contain the details of the search contained in <var>using</var> and <var>value</var> above.</li>
     </ul>
 </li>
 <li>Let <var>result</var> be equal to <code>{"element-6066-11e4-a52e-4f735466cecf": <var>id</var>}</code></li>
 <li>Return <var>result</var>. The object returned will look like the following:
<pre>{
"value": {"element-6066-11e4-a52e-4f735466cecf": id}
}</pre>
 </li>
</ol>

<p>When searching from an element from another element the following algorithm should be used:

</p><table class="simple jsoncommand">
 <tbody><tr>
   <th>HTTP Method</th>
   <th>Path Template</th>
 </tr>
 <tr>
   <td>POST</td>
   <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/element</td>
 </tr>
</tbody></table>

<ol>
 <li>Let <var><a href="#uri-template-element">element</a></var> be the start node for the query in the <a href="#element-location-strategies">Element Location Strategy</a></li>
 <li>Let <var>id</var> be a <a href="#webelement-unique-identifier">unique identifier</a> for the DOMElement returned from <a href="#element-location-strategies">Element Location Strategy</a>.
   If a NodeList is returned, the first DOMElement in the NodeList <em class="rfc2119" title="MUST">MUST</em> be used.
   <p>If <var>id</var> is empty:
     </p><ul>
       <li>Let the HTTP response status code be 501</li>
       <li>Let <var>status</var> contain the error <code><a href="#status-no-such-element">no such element</a></code></li>
       <li>Let <var>value</var> contain the details of the search contained in <var>using</var> and <var>value</var> above.</li>
     </ul>
   <p>If an error is returned from <a href="#element-location-strategies">Element Location Strategy</a> do the following.(todo describe how the error is returned)
     </p><ul>
       <li>Let the HTTP response status code be 501</li>
       <li>Let <var>status</var> contain the error <code><a href="#status-invalid-selector">invalid selector</a></code></li>
       <li>Let <var>value</var> contain the details of the search contained in <var>using</var> and <var>value</var> above.</li>
     </ul>
 </li>
 <li>Let <var>result</var> be equal to <code>{"element-6066-11e4-a52e-4f735466cecf": <var>id</var>}</code></li>
 <li>Return <var>result</var>. The object returned will look like the following:
<pre>{
"value": {"element-6066-11e4-a52e-4f735466cecf": id}
}</pre>
 </li>
</ol>
</section> <!-- /Find Element -->

<section id="find-elements" typeof="bibo:Chapter" resource="#find-elements" property="bibo:hasPart">
<h3 id="h-find-elements" resource="#h-find-elements"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.7 </span>Find Elements</span></h3>

<div class="issue" id="issue-23"><div class="issue-title" aria-level="4" role="heading" id="h-issue23"><span>Issue 23</span></div><p class=""><strong>Warning:</strong> This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model, and uses old concepts and definitions.  Please do not rely on it yet.

</p></div><p>When there is a need to find multiple elements on a document that we can return to the local end we use the following algorithm:

</p><table class="simple jsoncommand">
 <tbody><tr>
   <th>HTTP Method</th>
   <th>Path Template</th>
 </tr>
 <tr>
   <td>POST</td>
   <td>/session/{<var>session id</var>}/elements</td>
 </tr>
</tbody></table>

<ol>
 <li>Let <var>result</var> be equal to an empty list</li>
 <li>Let <var>queryResult</var> be a NodeList returned from <a href="#element-location-strategies">Element Location Strategy</a></li>
 <li>Repeat for every value in <var>queryResult</var> if not an empty set else return <var>result</var>
     <ol>
       <li>Let <var>id</var> be the <a href="#webelement-unique-identifier">unique identifier</a> for the DOMElement.</li>
       <li>Append <code>{"element-6066-11e4-a52e-4f735466cecf": <var>id</var>}</code> to <var>result</var></li>
     </ol>
 </li>
 <li>Return <var>result</var>. The object returned will look like the following:
<pre>{
"value": [{"element-6066-11e4-a52e-4f735466cecf": id}, {"element-6066-11e4-a52e-4f735466cecf": id}]
}</pre>
 </li>
</ol>

<p>When there is a need to search from an element to find the next WebElement we use the following algorithm:

</p><table class="simple jsoncommand">
 <tbody><tr>
   <th>HTTP Method</th>
   <th>Path Template</th>
 </tr>
 <tr>
   <td>POST</td>
   <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/elements</td>
 </tr>
</tbody></table>

<ol>
 <li>Let <var>result</var> be equal to an empty list.</li>
 <li>Let <var><a href="#uri-template-element">element</a></var> be the start node for the query in the <a href="#element-location-strategies">Element Location Strategy</a></li>
 <li>Let <var>queryResult</var> be a NodeList returned from <a href="#element-location-strategies">Element Location Strategy</a></li>
 <li>Repeat for every value in <var>queryResult</var> if not an empty set else return <var>result</var>
     <ol>
       <li>Let <var>id</var> be the <a href="#webelement-unique-identifier">unique identifier</a> for the DOMElement.</li>
       <li>Append <code>{"element-6066-11e4-a52e-4f735466cecf": <var>id</var>}</code> to <var>result</var></li>
     </ol>
 </li>
 <li>Return <var>result</var>. The object returned will look like the following:
<pre>{
"value": [{"element-6066-11e4-a52e-4f735466cecf": id}, {"element-6066-11e4-a52e-4f735466cecf": id}]
}</pre></li>
</ol>
</section> <!-- /Find Elements -->
</section> <!-- /Element Retrieval -->

<section id="element-state" typeof="bibo:Chapter" resource="#element-state" property="bibo:hasPart">
<!--OddPage--><h2 id="h-element-state" resource="#h-element-state"><span property="xhv:role" resource="xhv:heading"><span class="secno">12. </span>Element State</span></h2>

<p>To <dfn data-dfn-type="dfn" id="dfn-calculate-the-absolute-position">calculate the absolute position</dfn> of <a href="#dfn-element" class="internalDFN" data-link-type="dfn"><var>element</var></a>:

</p><ol>
 <li><p>Let <var>x</var> be 0.

 </p></li><li><p>Let <var>y</var> be 0.

 </p></li><li><p>While <var>element</var>’s <a href="#dfn-offsetparent" class="internalDFN" data-link-type="dfn">offsetParent</a> is not null:

  </p><ol>
   <li><p>Set <var>x</var> to (<var>x</var> +
    <var>element</var>’s <a href="#dfn-offsetleft" class="internalDFN" data-link-type="dfn">offsetLeft</a>).

   </p></li><li><p>Set <var>y</var> to (<var>y</var> +
    <var>element</var>’s <a href="#dfn-offsettop" class="internalDFN" data-link-type="dfn">offsetTop</a>).

   </p></li><li><p>Set <var>element</var> to <var>element</var>’s <a href="#dfn-offsetparent" class="internalDFN" data-link-type="dfn">offsetParent</a>.
  </p></li></ol>

 </li><li><p>Return a pair of (<var>x</var>, <var>y</var>).
</p></li></ol>

<p>When a <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> is said to be <dfn data-dfn-type="dfn" id="dfn-not-in-the-same-tree">not in the same tree</dfn>
 as another <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a>, <var>other</var>,
 the following steps must be taken:

</p><ol>
 <li><p>If the <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a>’s <a href="#dfn-ownerdocument" class="internalDFN" data-link-type="dfn">ownerDocument</a> attribute
  is not <var>other</var>, return true.

 </p></li><li><p>If the result of calling the <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a>’s
  <a href="#dfn-comparedocumentposition" class="internalDFN" data-link-type="dfn">compareDocumentPosition</a> with <var>other</var> as argument
  is <a href="#dfn-document_position_disconnected" class="internalDFN" data-link-type="dfn">DOCUMENT_POSITION_DISCONNECTED</a> (1),
  return true.

 </p></li><li><p>Return false.
</p></li></ol>

<section id="is-element-displayed" typeof="bibo:Chapter" resource="#is-element-displayed" property="bibo:hasPart">
<h3 id="h-is-element-displayed" resource="#h-is-element-displayed"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.1 </span>Is Element Displayed</span></h3>

<div class="issue" id="issue-24"><div class="issue-title" aria-level="4" role="heading" id="h-issue24"><span>Issue 24</span></div><div class="">
 <p>There is concern that WebDriver should not involve itself
  in determining <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayedness</a>
  for reasons concerning the inability to guarantee correctness
  and that the definitions will work on future platform features.

 </p><p>Specifically this relates to the lack of hit-testing primitives
  for the web platform, and to emerging technologies such as
  web components and shadow DOM.
</p></div></div>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/displayed</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-is-element-displayed">Is Element Displayed</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 is used to determine the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayedness</a>
 of a <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a>
  <a data-lt="document type" href="#dfn-document-type" class="internalDFN" data-link-type="dfn">type</a> is not
  "<code>xml</code>", let <var>visible</var> be a boolean initially set to false

 </p><p>Otherwise Let <var>visible</var> be equal to true and jump to the last step
    of this algorithm.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> parameter <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <var>element</var> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Apply the <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayed</a> algorithm to
  <var>element</var> and set <var>visible</var> to its
  return value.

 </p></li><li><p>Let <var>body</var> be a new JSON Object
  with the "<code>value</code>" member
  set to <var>element displayed</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Is Element Displayed -->

<section id="is-element-selected" typeof="bibo:Chapter" resource="#is-element-selected" property="bibo:hasPart">
<h3 id="h-is-element-selected" resource="#h-is-element-selected"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.2 </span>Is Element Selected</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/selected</td>
 </tr>
</tbody></table>

<p><dfn data-dfn-type="dfn" id="dfn-is-element-selected">Is Element Selected</dfn> determines
 if the referenced <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is selected or not.
 This operation only makes sense on <a href="#dfn-input" class="internalDFN" data-link-type="dfn"><code><code>input</code></code></a> elements
 of the <a href="#dfn-checkbox" class="internalDFN" data-link-type="dfn">Checkbox</a>- and <a href="#dfn-radio-button" class="internalDFN" data-link-type="dfn">Radio Button</a> states,
 or <a href="#dfn-option" class="internalDFN" data-link-type="dfn"><code><code>option</code></code></a> elements.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Let <var>selected</var> be the value
  corresponding to the first matching statement:

  </p><dl class="switch">
   <dt><var>element</var> is an <a href="#dfn-input" class="internalDFN" data-link-type="dfn"><code><code>input</code></code></a>
    with a <a href="#dfn-type-attribute" class="internalDFN" data-link-type="dfn"><code>type</code> attribute</a>
    in the <a href="#dfn-checkbox" class="internalDFN" data-link-type="dfn">Checkbox</a>- or <a href="#dfn-radio-button" class="internalDFN" data-link-type="dfn">Radio Button</a> state
   </dt><dd><p>The result of <var>element</var>’s <a href="#dfn-checkedness" class="internalDFN" data-link-type="dfn">checkedness</a>.

   </p></dd><dt><var>element</var> is
    an <a href="#dfn-option" class="internalDFN" data-link-type="dfn"><code><code>option</code></code></a> element
   </dt><dd><p>The result of <var>element</var>’s <a href="#dfn-selectedness" class="internalDFN" data-link-type="dfn">selectedness</a>.

   </p></dd><dt>Otherwise
   </dt><dd>False.
  </dd></dl>

 </li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" member set to <var>selected</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Is Element Selected -->

<section id="get-element-attribute" typeof="bibo:Chapter" resource="#get-element-attribute" property="bibo:hasPart">
<h3 id="h-get-element-attribute" resource="#h-get-element-attribute"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.3 </span>Get Element Attribute</span></h3>

<table class="simple jsoncommand">
  <tbody><tr>
    <th>HTTP Method</th>
    <th>Path Template</th>
  </tr>
  <tr>
    <td>GET</td>
    <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/attribute/{<var>name</var>}</td>
  </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-element-attribute">Get Element Attribute</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 will return the <a href="#dfn-attribute" class="internalDFN" data-link-type="dfn">attribute</a> of a <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:
</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>If <var>name</var> is undefined,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

  </p></li><li>Let <var>result</var> be the result of the first appropriate step below:

   <dl class="switch">
     <dt><p>If <var>name</var> is a <a href="#dfn-boolean-attribute" class="internalDFN" data-link-type="dfn">boolean attribute</a>:
     </p></dt><dd><p>The first matching statement if the element <a href="#dfn-hasattribute" class="internalDFN" data-link-type="dfn">has the attribute</a>:
       </p><dl class="switch">
         <dt><code>true</code>
         </dt><dd><p>'true'.
         </p></dd><dt>Otherwise
         </dt><dd><p><code>Null</code>.
      </p></dd></dl>
      </dd><dt><p>Otherwise:
      </p></dt><dd><p>The result of <a href="#dfn-get-an-attribute-by-name" class="internalDFN" data-link-type="dfn">getting an attribute by name</a> <var>name</var>.
   </p></dd></dl>
   </li><li><p>Let <var>body</var> be a JSON Object
    with the "<code>value</code>" member set to <var>result</var>.

   </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Get Element Attribute -->

<section id="get-element-property" typeof="bibo:Chapter" resource="#get-element-property" property="bibo:hasPart">
<h3 id="h-get-element-property" resource="#h-get-element-property"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.4 </span>Get Element Property</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/property/{<var>name</var>}</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-element-property">Get Element property</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 will return the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> of a <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <var>element</var> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Let <var>property</var> be the result of calling
  the <a href="#dfn-getproperty" class="internalDFN" data-link-type="dfn">[[GetProperty]]</a> internal method
  of <var>element</var> with property name <var>name</var>.

 </p></li><li><p>Let <var>result</var> be the value of
  <var>property</var> if not undefined, or null.

 </p></li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" property set to <var>result</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Get Element Property -->

<section id="get-element-css-value" typeof="bibo:Chapter" resource="#get-element-css-value" property="bibo:hasPart">
<h3 id="h-get-element-css-value" resource="#h-get-element-css-value"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.5 </span>Get Element CSS Value</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/css/{<var>property name</var>}</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-element-css-value">Get Element CSS Value</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 retrieves the <a href="#dfn-computed-value" class="internalDFN" data-link-type="dfn">computed value</a>
 of the given CSS property of the given <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> parameter <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <var>element</var> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Let <var>computed value</var> be
  the <a href="#dfn-computed-value" class="internalDFN" data-link-type="dfn">computed value</a> of parameter <var>property name</var>
  from <var>element</var>’s style declarations if the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
   <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a> <a data-lt="document type" href="#dfn-document-type" class="internalDFN" data-link-type="dfn">type</a> is not "<code>xml</code>",
   else let it be "".

 </p></li><li><p>Let <var>body</var> be a JSON Object with
  the "<code>value</code>" member set to <var>computed value</var>.

 </p></li><li>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</li></ol>
</section> <!-- /Get CSS Value -->

      <section id="getelementtext" typeof="bibo:Chapter" resource="#getelementtext" property="bibo:hasPart">
        <!-- getElementText() -->
        <h3 id="h-getelementtext" resource="#h-getelementtext"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.6 </span>getElementText()</span></h3>
        <div class="issue" id="issue-25"><div class="issue-title" aria-level="4" role="heading" id="h-issue25"><span>Issue 25</span></div><p class=""><strong>Warning:</strong>
         This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
         and uses old concepts and definitions.
         Please do not rely on it yet.

         </p></div><div class="issue" id="issue-26"><div class="issue-title" aria-level="4" role="heading" id="h-issue26"><span>Issue 26</span></div><p class="">There is concern that element text visibility
          is not something WebDriver should define
          because there does not exist enough platform primitives
          to future-proof it.
          Specifically this relates to technologies such as
          web components and shadow DOM.
          Note that a decision on this matter will also affect
          the future of the elements selector strategies
          for link text and partial link text.

          </p></div><p>
            </p><table class="simple jsoncommand">
              <tbody><tr>
                <th>HTTP Method</th>
                <th>Path Template</th>
              </tr>
              <tr>
                <td>GET</td>
                <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/text</td>
              </tr>
            </tbody></table>
            <p>The following definitions are used in this section:
          </p><dl>
              <dt id="text.whitespace">Whitespace</dt>
              <dd>Any text that matches the ECMAScript regular expression class <code>\s</code>.

              </dd><dt id="text.whitespace-nbsp">Whitespace excluding non-breaking spaces</dt>
              <dd>Any text that matches the ECMAScript regular expression <code>[^\S\xa0]</code>

              </dd><dt id="text.blocklevel">Block level element</dt>
              <dd>A block-level element is one which is not a table cell, and whose effective CSS display style is not in the set ['inline', 'inline-block', 'inline-table', 'none', 'table-cell', 'table-column', 'table-column-group']</dd>

              <dt id="text.horizontal">Horizontal whitespace characters</dt>
              <dd>Horizontal whitespace characters are defined by the ECMAScript regular expression <code>[\x20\t\u2028\u2029]</code>.</dd>
             </dl>

         <p>The expected return value is roughly what a text-only browser would display. The algorithm for determining this text is as follows:</p>

         <p>Let <code>lines</code> equal an empty array. Then:
         </p><ol>
            <li>if the element is in the <code>head</code> element of the document, return an empty string otherwise carry on with the algorithm below.</li>
             <li><span id="text.1">For</span> each descendent of node, at time of execution, in order:
                 <ol>
                     <li>Get whitespace, text-transform, and then, if descendent is:
                         <ul>
                             <li>a node which is not <a href="#determining-if-displayed">displayed</a>, do nothing</li>
                             <li>a [<cite><a class="bibref" href="#bib-DOM">DOM</a></cite>] <a href="http://www.w3.org/TR/2012/WD-dom-20120105/#interface-text">text node</a> let <code>text</code> equal the <code>nodeValue</code> property of descendent. Then:
                                 <ol>
                                     <li>Remove any zero-width spaces (\u200b, \u200e, \u200f), form feeds (\f) or vertical tab feeds (\v) from <code>text</code>.</li>
                                     <li>Canonicalize any recognized single newline sequence in <code>text</code> to a single newline (greedily matching <code>(\r\n|\r|\n)</code> to a single \n)</li>
                                     <li>If the parent's effective CSS whitespace style is 'normal' or 'nowrap' replace each newline (\n) in <code>text</code> with a single space character (\x20). If the parent's effective CSS whitespace style is 'pre' or 'pre-wrap' replace each <a href="#text.horizontal">horizontal whitespace character</a> with a non-breaking space character (\xa0). Otherwise replace each sequence of <a href="#text.horizontal">horizontal whitespace characters</a> except non-breaking spaces (\xa0) with a single space character</li>
                                     <li>Apply the parent's effective CSS text-transform style as per the <a href="http://www.w3.org/TR/CSS21/text.html#propdef-text-transform">CSS 2.1 specification</a> ([<cite><a class="bibref" href="#bib-CSS21">CSS21</a></cite>])</li>
                                     <li>If <code>last(lines)</code> ends with a space character and <code>text</code> starts with a space character, trim the first character of <code>text</code>.</li>
                                     <li>Append <code>text</code> to <code>last(lines)</code> in-place</li>
                                 </ol>
                             </li>
                             <li>an element which is <a href="#determining-if-displayed">displayed</a>. If the element is a:
                                 <ul>
                                     <li>BR element: Push '' to <code>lines</code> and continue</li>
                                     <li><a href="#text.blocklevel">Block-level</a> element and if <code>last(lines)</code> is not '', push '' to <code>lines</code>.</li>
                                 </ul>
                             And then recurse depth-first to <a href="#text.1">step 1</a> at the beginning of the algorithm with descendent set to the current element</li>
                             <li>If element is a TD element, or the effective CSS display style is 'table-cell', and last(lines) is not '', and <code>last(lines)</code> does not end with whitespace append a single space character to <code>last(lines)</code> [Note: Most innerText implementations append a \t here]</li>
                             <li>If element is a block-level element: push '' to <code>lines</code></li>
                         </ul>
                     </li>
                 </ol>
             </li>
             <li>The string <em class="rfc2119" title="MUST">MUST</em> then have the white space normalised as defined in the [<cite><a class="bibref" href="#bib-XPATH">XPATH</a></cite>] <a href="http://www.w3.org/TR/xpath/#function-normalize-space">normalize-space function</a> which is then returned.</li>
         </ol>
         <p>If the <code><a href="widl-WebElement-ELEMENT">ELEMENT</a></code> does not represent a <a href="http://w3c.github.io/dom/#element">Document <code>element</code></a>, or it represents a <a href="http://w3c.github.io/dom/#element">Document <code>element</code></a> that is no longer attached to the document's <a href="http://w3c.github.io/dom/#concept-node-tree">node tree</a>, then the WebDriver implementation <em class="rfc2119" title="MUST">MUST</em> immediately abort the command and return a <code title="stale-element-reference"><a href="#status-stale-element-reference">stale element reference</a></code> error. If the <a href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top level browsing context</a> currently receiving commands is no longer open a <code><a href="#no-such-window">no such window</a></code> error <em class="rfc2119" title="MUST">MUST</em> be raised.
       </p></section>

<section id="get-element-tag-name" typeof="bibo:Chapter" resource="#get-element-tag-name" property="bibo:hasPart">
<h3 id="h-get-element-tag-name" resource="#h-get-element-tag-name"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.7 </span>Get Element Tag Name</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/name</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-element-tag-name">Get Element Tag Name</dfn> command
 returns the qualified tag name name of the given <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference parameter <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>element result</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data.

 </p></li><li><p>If <var>element</var> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Let <var>qualified name</var> be the result of getting
  <var>element</var>’s <a href="#dfn-tagname" class="internalDFN" data-link-type="dfn">tagName</a> content <a href="#dfn-attribute" class="internalDFN" data-link-type="dfn">attribute</a>.

 </p></li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" member set to <var>qualified name</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Get Element Tag Name -->

<section id="get-element-rect" typeof="bibo:Chapter" resource="#get-element-rect" property="bibo:hasPart">
<h3 id="h-get-element-rect" resource="#h-get-element-rect"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.8 </span>Get Element Rect</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/rect</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-element-rect">Get Element Rect</dfn> command returns
 the dimensions and coordinates of the given <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>.
 The returned value is a dictionary with the following members:

</p><dl>
 <dt><dfn data-dfn-type="dfn" id="dfn-x">x</dfn>
 </dt><dd>X axis position of the top-left corner of the <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>
  relative to the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
  <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a> in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>.

 </dd><dt><dfn data-dfn-type="dfn" id="dfn-y">y</dfn>
 </dt><dd>Y axis position of the top-left corner of the <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>
  relative to the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
  <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a> in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>.

 </dd><dt><dfn data-dfn-type="dfn" id="dfn-height">height</dfn>
 </dt><dd>Height of the <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>’s
  <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">bounding rectangle</a> in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>.

 </dd><dt><dfn data-dfn-type="dfn" id="dfn-width">width</dfn>
 </dt><dd>Width of the <a href="#dfn-web-element" class="internalDFN" data-link-type="dfn">web element</a>’s
  <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">bounding rectangle</a> in <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>.
</dd></dl>

<p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference parameter <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>element result</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data.

 </p></li><li><p>If the <var>element</var> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p><a href="#dfn-calculate-the-absolute-position" class="internalDFN" data-link-type="dfn">Calculate the absolute position</a> of <var>element</var>
  and let it be <var>coordinates</var>.

 </p></li><li><p>Let <var>rect</var> be <var>element</var>’s
  <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">bounding rectangle</a>.

 </p></li><li><p>Let <var>body</var> be a new JSON Object initialised with:

  </p><dl>
   <dt>"<code>x</code>"
   </dt><dd>The first value of <var>coordinates</var>.

   </dd><dt>"<code>y</code>"
   </dt><dd>The second value of <var>coordinates</var>.

   </dd><dt>"<code>width</code>"
   </dt><dd>Value of <var>rect</var>’s <a href="#dfn-rectangle-width-dimension" class="internalDFN" data-link-type="dfn">width dimension</a>.

   </dd><dt>"<code>height</code>"
   </dt><dd>Value of <var>rect</var>’s <a href="#dfn-rectangle-height-dimension" class="internalDFN" data-link-type="dfn">height dimension</a>.
  </dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Get Element Rect -->

<section id="is-element-enabled" typeof="bibo:Chapter" resource="#is-element-enabled" property="bibo:hasPart">
<h3 id="h-is-element-enabled" resource="#h-is-element-enabled"><span property="xhv:role" resource="xhv:heading"><span class="secno">12.9 </span>Is Element Enabled</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/enabled</td>
 </tr>
</tbody></table>

<p><dfn data-dfn-type="dfn" id="dfn-is-element-enabled">Is Element Enabled</dfn> determines
 if the referenced <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is enabled or not.
 This operation only makes sense on form controls.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a> and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
  let <var>element</var> be <var>element result</var>’s data.

  </p><p>Otherwise, return <var>element result</var>.

 </p></li><li><p>If <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> <a href="#dfn-is-stale" class="internalDFN" data-link-type="dfn">is stale</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-stale-element-reference" class="internalDFN" data-link-type="dfn">stale element reference</a>.

 </p></li><li><p>Let <var>enabled</var> be a boolean initially set to true
  if the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
  <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a> <a data-lt="document type" href="#dfn-document-type" class="internalDFN" data-link-type="dfn">type</a>
  is not "<code>xml</code>".

  </p><p>Otherwise, let <var>enabled</var> to false
   and jump to the last step of this algorithm.

 </p></li><li><p>Set <var>enabled</var> to false if a form control is <a href="#dfn-disabled" class="internalDFN" data-link-type="dfn">disabled</a>.

 </p></li><li><p>Let <var>body</var> be a JSON object
  with the "<code>value</code>" member set to <var>enabled</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Is Element Enabled -->
</section> <!-- /Element State -->

<section id="element-interaction" typeof="bibo:Chapter" resource="#element-interaction" property="bibo:hasPart">
<!--OddPage--><h2 id="h-element-interaction" resource="#h-element-interaction"><span property="xhv:role" resource="xhv:heading"><span class="secno">13. </span>Element Interaction</span></h2>

<p>The element interaction <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a>
 provide a high-level instruction set for manipulating form controls.
 Unlike the Actions interface,
 they will implicitly <a data-lt="scroll into view" href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scroll elements into view</a>
 and check for <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">element displayedness</a>.

</p><section id="element-click" typeof="bibo:Chapter" resource="#element-click" property="bibo:hasPart">
<h3 id="h-element-click" resource="#h-element-click"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.1 </span>Element Click</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/click</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-element-click">Element Click</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scrolls into view</a> the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 and then attempts to click the centre of its visible area.
 In case the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
 an <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>element result</var> be the result of <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a>
  by <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data
  if it is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
  Otherwise return <var>element result</var>.

 </p></li><li><p>If <var>element</var> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a>.

 </p></li><li><p><a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">Scroll into view</a> the <var>element</var>.

 </p></li><li><div class="issue" id="issue-27"><div class="issue-title" aria-level="4" role="heading" id="h-issue27"><span>Issue 27</span></div><p class="">Get the element’s bounding box and calculate centre position.

 </p></div></li><li><div class="issue" id="issue-28"><div class="issue-title" aria-level="4" role="heading" id="h-issue28"><span>Issue 28</span></div><p class="">Run interaction steps on coordinate.

 </p></div></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Element Click -->

<section id="element-tap" typeof="bibo:Chapter" resource="#element-tap" property="bibo:hasPart">
<h3 id="h-element-tap" resource="#h-element-tap"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.2 </span>Element Tap</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/tap</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-element-tap">Element Tap</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scrolls into view</a> the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 and then attempts to tap the centre of its visible area.
 In case the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
 an <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>element result</var> be the result of <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a>
  by <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data
  if it is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
  Otherwise return <var>element result</var>.

 </p></li><li><p>If <var>element</var> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a>.

 </p></li><li><p><a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">Scroll into view</a> the <var>element</var>.

 </p></li><li><div class="issue" id="issue-29"><div class="issue-title" aria-level="4" role="heading" id="h-issue29"><span>Issue 29</span></div><p class="">Get the element’s bounding box and calculate centre position.

 </p></div></li><li><div class="issue" id="issue-30"><div class="issue-title" aria-level="4" role="heading" id="h-issue30"><span>Issue 30</span></div><p class="">Run interaction steps on coordinate.

 </p></div></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Element Tap -->

<section id="element-clear" typeof="bibo:Chapter" resource="#element-clear" property="bibo:hasPart">
<h3 id="h-element-clear" resource="#h-element-clear"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.3 </span>Element Clear</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/clear</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-element-clear">Element Clear</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scrolls into view</a> the form control <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 and then attempts to clear its text content or reset it to its default state.
 In case the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
 an <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><div class="issue" id="issue-31"><div class="issue-title" aria-level="4" role="heading" id="h-issue31"><span>Issue 31</span></div><p class="">Should this also work for <code>contenteditable</code> elements?

</p></div><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>element result</var> be the result of <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a>
  by <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data
  if it is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
  Otherwise return <var>element result</var>.

 </p></li><li><p>If <var>element</var> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a>.

 </p></li><li><p><a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">Scroll into view</a> the <var>element</var>.

 </p></li><li><div class="issue" id="issue-32"><div class="issue-title" aria-level="4" role="heading" id="h-issue32"><span>Issue 32</span></div><p class="">Clear element’s text content or reset to default state.

 </p></div></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Element Clear -->

<section id="element-send-keys" typeof="bibo:Chapter" resource="#element-send-keys" property="bibo:hasPart">
<h3 id="h-element-send-keys" resource="#h-element-send-keys"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.4 </span>Element Send Keys</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/sendKeys</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-element-send-keys">Element Send Keys</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scrolls into view</a> the form control <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 and then sends the provided keys to the element.
 In case the <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
 an <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> is returned.

</p><div class="issue" id="issue-33"><div class="issue-title" aria-level="4" role="heading" id="h-issue33"><span>Issue 33</span></div><p class="">Should this also work for <code>contenteditable</code> elements?

</p></div><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>element result</var> be the result of <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a>
  by <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference <var>element id</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data
  if it is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
  Otherwise return <var>element result</var>.

 </p></li><li><p>If <var>element</var> is <a href="#dfn-element-displayed" class="internalDFN" data-link-type="dfn">not displayed</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a>.

 </p></li><li><p><a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">Scroll into view</a> the <var>element</var>.

 </p></li><li><div class="issue" id="issue-34"><div class="issue-title" aria-level="4" role="heading" id="h-issue34"><span>Issue 34</span></div><p class="">Interact with the element.

 </p></div></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- Element Send Keys -->
</section> <!-- /Element Interaction -->

<section id="executing-script" typeof="bibo:Chapter" resource="#executing-script" property="bibo:hasPart">
<!--OddPage--><h2 id="h-executing-script" resource="#h-executing-script"><span property="xhv:role" resource="xhv:heading"><span class="secno">14. </span>Executing Script</span></h2>

<div class="issue" id="issue-35"><div class="issue-title" aria-level="3" role="heading" id="h-issue35"><span>Issue 35</span></div><aside class="">
 <p>Open questions: What happens if a user's JS triggers a modal dialog?
  Blocking seems like a reasonable idea,
  but there is an assumption that WebDriver is not threadsafe.

 </p><p>What happens to unhandled JS errors?
  Caused by a user's JS?
  Caused by JS on a page?
  How does a user of the API obtain the list of errors?
  Is that list cleared upon read?
</p></aside></div>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-json-deserialize">JSON deserialize</dfn>
 with argument <var>value</var>,
 and optional argument <var>seen</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:

</p><ol>
 <li><p>If <var>seen</var> was not provided,
  let <var>seen</var> be an empty set.

 </p></li><li><p>Jump to the first appropriate step below:

  </p><dl>
   <dt>If <var>value</var> is <code>null</code>,
    or has type <a href="#dfn-boolean" class="internalDFN" data-link-type="dfn">Boolean</a>,
    <a href="#dfn-number" class="internalDFN" data-link-type="dfn">Number</a>
    or <a href="#dfn-string" class="internalDFN" data-link-type="dfn">String</a>:
   </dt><dd><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>value</var>.

   </p></dd><dt>If <var>value</var> is an <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a>
    that <a href="#dfn-represents-a-web-element" class="internalDFN" data-link-type="dfn">represents a web element</a>:
   </dt><dd><p>Return the result of running
    the <a href="#dfn-deserialize-the-web-element" class="internalDFN" data-link-type="dfn">deserialize the web element</a> algorithm with object <var>value</var>.

   </p></dd><dt>If <var>value</var> if <var>value</var> is an <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a> object
    or an <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a> object:
   </dt><dd><p>Return the result of running the <a href="#dfn-clone-an-object" class="internalDFN" data-link-type="dfn">clone an object</a> algorithm
    with arguments <var>value</var> and <var>seen</var>,
    and the <a href="#dfn-json-deserialize" class="internalDFN" data-link-type="dfn">JSON deserialize</a> algorithm as the clone algorithm.

   </p></dd><dt>Otherwise:</dt>
   <dd><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.
  </p></dd></dl>
 </li>
</ol>

<p>When required to make a <dfn data-dfn-type="dfn" id="dfn-json-clone">JSON clone</dfn> with argument <var>value</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:

</p><ol>
 <li><p>Let <var>seen</var> be an empty set.

 </p></li><li><p>Return the result of calling the <a href="#dfn-internal-json-clone-algorithm" class="internalDFN" data-link-type="dfn">internal JSON clone algorithm</a>
  with arguments <var>value</var> and <var>seen</var>.
</p></li></ol>

<p>When required to run the <dfn data-dfn-type="dfn" id="dfn-internal-json-clone-algorithm">internal JSON clone algorithm</dfn>
 with arguments <var>value</var> and <var>seen</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must return the value
 of the first matching statement, matching on <var>value</var>:

</p><dl class="switch">
 <dt><a href="#dfn-undefined" class="internalDFN" data-link-type="dfn">undefined</a>
 </dt><dt><a href="#dfn-null" class="internalDFN" data-link-type="dfn">null</a>
 </dt><dd><p><a href="#dfn-success" class="internalDFN" data-link-type="dfn">Success</a> with data null.

 </p></dd><dt>type <a href="#dfn-boolean" class="internalDFN" data-link-type="dfn">Boolean</a>
 </dt><dt>type <a href="#dfn-number" class="internalDFN" data-link-type="dfn">Number</a>
 </dt><dt>type <a href="#dfn-string" class="internalDFN" data-link-type="dfn">String</a>
 </dt><dd><p><a href="#dfn-success" class="internalDFN" data-link-type="dfn">Success</a> with data <var>value</var>.

 </p></dd><dt>instance of <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>
 </dt><dd><p><a href="#dfn-serialize-the-element" class="internalDFN" data-link-type="dfn">Serialize the element</a> with argument <var>value</var>.

 </p></dd><dt>instance of <a href="#dfn-nodelist" class="internalDFN" data-link-type="dfn">NodeList</a>
 </dt><dt>instance of HTMLCollection
 </dt><dt>instance of <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a>
 </dt><dt>instance of <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a>
 </dt><dd>
  <ol>
   <li><p>If <var>value</var> is in <var>seen</var>,
    return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.

   </p></li><li><p>Add <var>value</var> to <var>seen</var>.

   </p></li><li><p>Produce the value of running the <a href="#dfn-clone-an-object" class="internalDFN" data-link-type="dfn">clone an object</a> algorithm
    with arguments <var>value</var> and <var>seen</var>,
    and the <a href="#dfn-internal-json-clone-algorithm" class="internalDFN" data-link-type="dfn">internal JSON clone algorithm</a> as the clone algorithm.
  </p></li></ol>
 </dd>

 <dt>Otherwise</dt>
 <dd><p><a href="#dfn-error" class="internalDFN" data-link-type="dfn">Error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.
</p></dd></dl>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-clone-an-object">clone an object</dfn>
 with arguments <var>value</var> and <var>seen</var>
 and <var>clone algorithm</var>,
 run the following steps:

</p><ol>
 <li><p>Let <var>result</var> be the value of the first matching statement,
  switching on <var>value</var>:

  </p><dl class="switch">
   <dt>instance of <code>NodeList</code>
   </dt><dt>instance of <code>HTMLCollection</code>
   </dt><dt>instance of <code>Array</code>
   </dt><dd><p>A new <code>Array</code> object,
    which <code>length</code> property
    has the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named "<code>length</code>"
    from <var>value</var>.

   </p></dd><dt>Otherwise
   </dt><dd><p>A new <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a> object.
  </p></dd></dl>

 </li><li><p>For each enumerable <a href="#dfn-own-property" class="internalDFN" data-link-type="dfn">own property</a>
  in <var>value</var>, run the following substeps:

  </p><ol>
   <li><p>Let <var>name</var> be the name of the property.

   </p></li><li><p>Let <var>source property value</var> be the result of
    <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <var>name</var> from <var>value</var>.
    If doing so causes script to be run, and that script throws an exception,
    return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.

   </p></li><li><p>Let <var>cloned property result</var> be the result of
    calling the <var>clone algorithm</var> with arguments
    <var>source property value</var> and <var>seen</var>.

   </p></li><li><p>If <var>cloned property result</var> is a <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>,
    set a property of result with
    name <var>name</var> and value equal to <var>cloned property result</var>’s data.

   </p></li><li><p>Otherwise, return <var>cloned property result</var>.
  </p></li></ol>
</li></ol>

<p>The steps for <dfn data-dfn-type="dfn" id="dfn-extracting-the-script-arguments-from-a-request">extracting the script arguments from a request</dfn> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>script</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <code>script</code>
  from the parameters argument.

 </p></li><li><p>If <var>script</var> is not a <a href="#dfn-string" class="internalDFN" data-link-type="dfn">String</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p></li><li><p>Let <var>args</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> named <code>args</code>
  from the parameters argument.

 </p></li><li><p>If <var>args</var> is not an <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a>
  or its <a href="#dfn-class" class="internalDFN" data-link-type="dfn">[[Class]]</a> internal property
  is not <a href="#dfn-array" class="internalDFN" data-link-type="dfn">Array</a> or <a href="#dfn-object" class="internalDFN" data-link-type="dfn">Object</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-argument" class="internalDFN" data-link-type="dfn">invalid argument</a>.

 </p></li><li><p>Let <var>arguments</var> be a <a href="#dfn-list" class="internalDFN" data-link-type="dfn">List</a>
  consisting of a json deserialization of each item
  in <var>args</var> with the order preserved.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>script</var>
  and <var>arguments</var>.
</p></li></ol>

<p>When required to <dfn data-dfn-type="dfn" id="dfn-execute-a-function-body">execute a function body</dfn>
 with arguments <var>body</var> and <var>arguments</var>,
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must run the following steps:

</p><ol>
 <li><p>Let <var>window</var> be the <a href="#dfn-associated-window" class="internalDFN" data-link-type="dfn">associated window</a>
  of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>.

 </p></li><li><p>Let <var>environment settings</var> be
  the <a href="#dfn-environment-settings-object" class="internalDFN" data-link-type="dfn">environment settings object</a> for <var>window</var>.

 </p></li><li><p>Let <var>script environment</var> be
  the <a href="#dfn-script-execution-environment" class="internalDFN" data-link-type="dfn">script execution environment</a>
  for JavaScript obtained from <var>environment settings</var>.

 </p></li><li><p>If <var>body</var> is not parsable as a <a href="#dfn-functionbody" class="internalDFN" data-link-type="dfn">FunctionBody</a>
  or if parsing detects an <a href="#dfn-early-error" class="internalDFN" data-link-type="dfn">early error</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.

 </p></li><li><p>If <var>body</var> begins with a <a href="#dfn-directive-prologue" class="internalDFN" data-link-type="dfn">directive prologue</a>
  that contains a <a href="#dfn-use-strict-directive" class="internalDFN" data-link-type="dfn">use strict directive</a>
  then let <var>strict</var> be true,
  otherwise let <var>strict</var> be false.

 </p></li><li><p>Using the <a href="#dfn-script-execution-environment" class="internalDFN" data-link-type="dfn">script execution environment</a> <var>script environment</var>,
  let <var>function</var> be the result of
  calling <a href="#dfn-create-a-function-object" class="internalDFN" data-link-type="dfn">create a function object</a> with parameter list of
  an empty <a href="#dfn-list" class="internalDFN" data-link-type="dfn">List</a>,
  body <var>body</var>,
  scope of the <a href="#dfn-global-environment" class="internalDFN" data-link-type="dfn">global environment</a>,
  and strict flag <var>strict</var>.

 </p></li><li><p>Let <var>script</var> be a new <a href="#dfn-script" class="internalDFN" data-link-type="dfn">script</a>.

 </p></li><li><p>Let <var>script</var>’s <a href="#dfn-code-entry-point" class="internalDFN" data-link-type="dfn">code entry-point</a>
  be <var>function</var>.

 </p></li><li><p>Let script’s <a href="#dfn-settings-object" class="internalDFN" data-link-type="dfn">settings object</a> object
  be <var>script settings</var>.

 <!-- the stuff from here on down is quite dubious -->
 <!-- this incumbent scripts stuff is in webidl but the references don't
    lead anywhere -->
 <!-- li><p><a href="">Push <var>script</var> onto <a>the stack of
       incumbent scripts</a>.</li-->

 </p></li><li><p>Invoke the <a href="#dfn-call" class="internalDFN" data-link-type="dfn">[[Call]]</a> internal method of <var>function</var>,
  providing <var>window</var> as the this value
  and <var>parameters</var> as the argument values.
  If doing so does not produce an exception,
  let <var>result</var> be <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data set
  to the return value from this function call.
  Otherwise let <var>result</var> be <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>
  with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-javascript-error" class="internalDFN" data-link-type="dfn">javascript error</a>.

 <!-- li><p><a href="">Pop <var>script</var> from <a>the stack of
       incumbent scripts</a>.</p></li -->

 </p></li><li><p>If <var>result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>, return result.

 </p></li><li><p>Otherwise let <var>json data</var> be a <a href="#dfn-json-clone" class="internalDFN" data-link-type="dfn">JSON clone</a>
  of <var>result</var>’s data.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>json data</var>.
</p></li></ol>

<section id="execute-script" typeof="bibo:Chapter" resource="#execute-script" property="bibo:hasPart">
<h3 id="h-execute-script" resource="#h-execute-script"><span property="xhv:role" resource="xhv:heading"><span class="secno">14.1 </span>Execute Script</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/execute/sync</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-execute-script">Execute Script</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 executes a JavaScript function in the context of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>
 and returns the return value of the function.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a>, and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>script arguments</var> be the result of
  <a href="#dfn-extracting-the-script-arguments-from-a-request" class="internalDFN" data-link-type="dfn">extracting the script arguments from a request</a>
  with argument <var>parameters</var>.

 </p></li><li><p>If <var>script arguments</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>script arguments</var>.

 </p></li><li><p>Let <var>body</var> and <var>arguments</var>
  be <var>script arguments</var>’ data.

 </p></li><li><p>Let <var>result</var> be the result of calling <a href="#dfn-execute-a-function-body" class="internalDFN" data-link-type="dfn">execute a function body</a>,
  with arguments <var>body</var> and <var>arguments</var>.

 </p></li><li><p>If <var>result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>, return result.

  </p><p>Otherwise let <var>value</var> be <var>result</var>’s data.

 </p></li><li><p>Let <var>data</var> be a new JSON Object.

 </p></li><li><p>Set the property "<code>value</code>" of <var>data</var>
  to <var>value</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>data</var>.
</p></li></ol>
</section> <!-- /Execute Script -->

<section id="execute-async-script" typeof="bibo:Chapter" resource="#execute-async-script" property="bibo:hasPart">
<h3 id="h-execute-async-script" resource="#h-execute-async-script"><span property="xhv:role" resource="xhv:heading"><span class="secno">14.2 </span>Execute Async Script</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/execute/async</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-execute-async-script">Execute Async Script</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 causes JavaScript to execute as an anonymous function.
 Unlike the <a href="#dfn-execute-script" class="internalDFN" data-link-type="dfn">Execute Script</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>,
 the result of the function is ignored.
 Instead an additional argument is provided as the final argument to the function.
 This is a function that, when called, returns its first argument as the response.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a>, and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>script arguments</var> be the result
  of <a href="#dfn-extracting-the-script-arguments-from-a-request" class="internalDFN" data-link-type="dfn">extracting the script arguments from a request</a>
  with argument <var>parameters</var>.

 </p></li><li><p>If <var>script arguments</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>script arguments</var>.

 </p></li><li><p>Let <var>body</var> and <var>arguments</var>
  be <var>script arguments</var>’ data.

 </p></li><li><div class="issue" id="issue-36"><div class="issue-title" aria-level="4" role="heading" id="h-issue36"><span>Issue 36</span></div><p class="">This next step might not quite set up all the right machinery.

  </p></div><p>Let <var>webdriver callback result</var> be
   a flag which can have three values:
   <code>unset</code>, <code>expired</code>, or <code>set</code>,
   with the <code>set</code> value having associated data.
   Initially it is in the <code>unset</code> state.

 </p></li><li><p>Let <var>callback</var> be a <a href="#dfn-function" class="internalDFN" data-link-type="dfn">function</a>
  whose <a href="#dfn-call" class="internalDFN" data-link-type="dfn">[[Call]]</a> internal method runs
  the <a href="#dfn-execute-async-script-callback" class="internalDFN" data-link-type="dfn">execute async script callback</a> algorithm
  initialized with argument <var>webdriver callback result</var>.

 </p></li><li><p>Append <var>callback</var> to <var>arguments</var>.

 </p></li><li><p>Let <var>result</var> be the result of calling <a href="#dfn-execute-a-function-body" class="internalDFN" data-link-type="dfn">execute a function body</a>
  with arguments <var>body</var> and <var>arguments</var>.

 </p></li><li><p>If <var>result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>, return <var>result</var>.

 </p></li><li><p>Wait for <var>webdriver callback result</var> to enter the <code>set</code> state,
  or for <a href="#dfn-session-script-timeout" class="internalDFN" data-link-type="dfn">session script timeout</a> milliseconds to expire,
  whichever happens sooner.

 </p></li><li><p>If the previous step completed due the <a href="#dfn-session-script-timeout" class="internalDFN" data-link-type="dfn">session script timeout</a> being reached,
  set <var>webdriver callback result</var> to <code>expired</code>
  and return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-script-timeout" class="internalDFN" data-link-type="dfn">script timeout</a>.

 </p></li><li><p>Otherwise, let <var>result</var> be <var>webdriver callback result</var>’s data.

 </p></li><li><p>If <var>result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>, return <var>result</var>.

 </p></li><li><p>Let <var>value</var> be <var>result</var>’s data.

 </p></li><li><p>Let <var>data</var> be a new JSON Object.

 </p></li><li><p>Set the property <code>value</code> of <var>data</var>
  to <var>value</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>data</var>.
</p></li></ol>

<p>The <dfn data-dfn-type="dfn" id="dfn-execute-async-script-callback">execute async script callback</dfn> algorithm
 is initialized with a single argument <var>webdriver callback state</var>.
 It defines a <a href="#dfn-function" class="internalDFN" data-link-type="dfn">function</a> with a single optional argument <var>result</var>.
 When this function is called, the following steps are run:

</p><ol>
 <li><p>If <var>webdriver callback state</var> is not in the <code>unset</code> state,
  return <code>undefined</code>.

 </p></li><li><p>If <var>result</var> is not present,
  let <var>result</var> be <code>null</code>.

 </p></li><li><p>Let <var>json result</var> be a <a href="#dfn-json-clone" class="internalDFN" data-link-type="dfn">JSON clone</a>
  of <var>result</var>.

 </p></li><li><p>Set the <var>webdriver callback state</var>
  to <code>set</code> with data <var>json result</var>.

 </p></li><li><p>Return <code>undefined</code>.
</p></li></ol>
</section> <!-- /Execute Async Script -->
</section> <!-- /Executing Script -->

<section id="cookies" typeof="bibo:Chapter" resource="#cookies" property="bibo:hasPart">
<!--OddPage--><h2 id="h-cookies" resource="#h-cookies"><span property="xhv:role" resource="xhv:heading"><span class="secno">15. </span>Cookies</span></h2>

<p>This section describes the interaction with <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookies</a>
 as described in the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>].

</p><p>To get <dfn data-dfn-type="dfn" id="dfn-all-associated-cookies">all associated cookies</dfn> to a <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a>,
 the user agent must return the enumerated set of cookies
 that meet the requirements set out in the first step of the algorithm in [<cite><a class="bibref" href="#bib-RFC6265">RFC6265</a></cite>] to
 <a href="#dfn-compute-cookie-string" class="internalDFN" data-link-type="dfn">compute <code>cookie-string</code></a>
 for the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s
 <a href="#dfn-document" class="internalDFN" data-link-type="dfn">document</a>’s <a href="#dfn-document-address" class="internalDFN" data-link-type="dfn">address</a> for an ‘HTTP API’.

</p><p>A <dfn data-dfn-type="dfn" id="dfn-serialized-cookie">serialized cookie</dfn> is created by
 assigning the fields of a <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>
 to properties of a new JSON Object:

</p><dl>
 <dt>"<code>name</code>"
 </dt><dd><p><a href="#dfn-cookie-name" class="internalDFN" data-link-type="dfn">cookie name</a>

 </p></dd><dt>"<code>value</code>"
 </dt><dd><p><a href="#dfn-cookie-value" class="internalDFN" data-link-type="dfn">cookie value</a>

 </p></dd><dt>"<code>expiry</code>"
 </dt><dd><p><a href="#dfn-cookie-expiry-time" class="internalDFN" data-link-type="dfn">cookie expiry time</a>

 </p></dd><dt>"<code>domain</code>"
 </dt><dd><p><a href="#dfn-cookie-domain" class="internalDFN" data-link-type="dfn">cookie domain</a>

 </p></dd><dt>"<code>path</code>"
 </dt><dd><p><a href="#dfn-cookie-path" class="internalDFN" data-link-type="dfn">cookie path</a>

 </p></dd><dt>"<code>secure</code>"
 </dt><dd><p><a href="#dfn-cookie-secure-only" class="internalDFN" data-link-type="dfn">cookie secure only</a>

 </p></dd><dt>"<code>http</code>"
 </dt><dd><p><a href="#dfn-cookie-http-only" class="internalDFN" data-link-type="dfn">cookie http only</a>
</p></dd></dl>


<section id="get-cookie" typeof="bibo:Chapter" resource="#get-cookie" property="bibo:hasPart">
<h3 id="h-get-cookie" resource="#h-get-cookie"><span property="xhv:role" resource="xhv:heading"><span class="secno">15.1 </span>Get Cookie</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/cookie/{<var>name</var>}</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-cookie">Get Cookie</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 returns all <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookies</a> associated with the <a href="#dfn-document-address" class="internalDFN" data-link-type="dfn">address</a>
 of the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a>’s <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>.

</p><p>Provided with an optional <var>name</var> parameter,
 the returned set will consist of only a single <a href="#dfn-cookie" class="internalDFN" data-link-type="dfn">cookie</a>
 matching an entry’s <a href="#dfn-cookie-name" class="internalDFN" data-link-type="dfn">cookie name</a> in the <a href="#dfn-cookie-store" class="internalDFN" data-link-type="dfn">cookie store</a>,
 or be empty.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a>, and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>result</var> be an initially empty JSON List.

 </p></li><li><p>For each <var>cookie</var> among <a href="#dfn-all-associated-cookies" class="internalDFN" data-link-type="dfn">all associated cookies</a> of
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>’s
  <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>, matching on <var>name</var>:

  </p><dl class="switch">
   <dt><var>cookie</var>’s <code>cookie-name</code>
   </dt><dd><p>Append a <a href="#dfn-serialized-cookie" class="internalDFN" data-link-type="dfn">serialized cookie</a> of <var>cookie</var> to <var>result</var>,
    and break out of the loop.

   </p></dd><dt>undefined
   </dt><dd><p>Append a <a href="#dfn-serialized-cookie" class="internalDFN" data-link-type="dfn">serialized cookie</a> of <var>cookie</var> to <var>result</var>.
  </p></dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>result</var>.
</p></li></ol>
</section> <!-- /Get Cookie -->

<section id="add-cookie" typeof="bibo:Chapter" resource="#add-cookie" property="bibo:hasPart">
<h3 id="h-add-cookie" resource="#h-add-cookie"><span property="xhv:role" resource="xhv:heading"><span class="secno">15.2 </span>Add Cookie</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/cookie</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-add-cookie">Add Cookie</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 adds a single cookie to the cookie storage associated with
 the <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>’s <a href="#dfn-document-address" class="internalDFN" data-link-type="dfn">address</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a>, and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>Let <var>cookie</var> be the result of <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a>
  named "<code>cookie</code>" from the <var>parameters</var> argument.

 </p></li><li><p>If <var>cookie</var> is not a JSON Object,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-set-cookie" class="internalDFN" data-link-type="dfn">unable to set cookie</a>.

 </p></li><li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>’s <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a>
  is a <a href="#dfn-cookie-averse-document-object" class="internalDFN" data-link-type="dfn">cookie-averse <code>Document</code> object</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-invalid-cookie-domain" class="internalDFN" data-link-type="dfn">invalid cookie domain</a>.

 </p></li><li><p>Set the value is <var>cookie-name</var>,
  as defined in [<cite><a class="bibref" href="#bib-RFC6265">RFC6265</a></cite>], to the value of entry with key <var>name</var>.
  If <var>name</var>is undefined,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-set-cookie" class="internalDFN" data-link-type="dfn">unable to set cookie</a>.

 </p></li><li><p>Set the value is <var>cookie-value</var>,
  as defined in [<cite><a class="bibref" href="#bib-RFC6265">RFC6265</a></cite>], to the value of entry with key <var>value</var>.
  If <var>value</var>is undefined,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-set-cookie" class="internalDFN" data-link-type="dfn">unable to set cookie</a>.

 </p></li><li><p>If <var>cookie</var> has an entry with key <var>path</var>
  set attribute-value of the last attribute in the cookie-attribute-list
  with an attribute-name of "Path".

 </p></li><li><p>If <var>cookie</var> has an entry with key <var>domain</var>
  set attribute-value of the last attribute in the cookie-attribute-list
  with an attribute-name of "Domain".

 </p></li><li><p>If <var>cookie</var> has an entry with key <var>secure</var>
  set attribute-value of the last attribute in the cookie-attribute-list
  with an attribute-name of "Secure".

 </p></li><li><p>If <var>cookie</var> has an entry with key <var>expiry</var>
  set attribute-value of the last attribute in the cookie-attribute-list
  with an attribute-name of "Expires".

 </p></li><li><p>Store the contents <var>cookie</var> in the user agent cookie manager
  following the steps described under <a href="#dfn-storage-model" class="internalDFN" data-link-type="dfn">Storage Model</a> in [<cite><a class="bibref" href="#bib-RFC6265">RFC6265</a></cite>].
  If there is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> during this step,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-set-cookie" class="internalDFN" data-link-type="dfn">unable to set cookie</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Add Cookie -->

<section id="delete-cookie" typeof="bibo:Chapter" resource="#delete-cookie" property="bibo:hasPart">
<h3 id="h-delete-cookie" resource="#h-delete-cookie"><span property="xhv:role" resource="xhv:heading"><span class="secno">15.3 </span>Delete Cookie</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>DELETE</td>
  <td>/session/{<var>session id</var>}/cookie/{<var>name</var>}</td>
  </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-delete-cookie">Delete Cookie</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 allows you to delete either a single cookie by parameter <var>name</var>,
 or all the cookies associated with
 the <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>’s <a href="#dfn-document-address" class="internalDFN" data-link-type="dfn">address</a>
 if <var>name</var> is undefined.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-browsing-context" class="internalDFN" data-link-type="dfn">current browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p><a href="#dfn-handle-any-user-prompts" class="internalDFN" data-link-type="dfn">Handle any user prompts</a>, and return its value if it is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>.

 </p></li><li><p>For each <var>cookie</var> among <a href="#dfn-all-associated-cookies" class="internalDFN" data-link-type="dfn">all associated cookies</a> of
  the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>’s <a href="#dfn-active-document" class="internalDFN" data-link-type="dfn">active document</a>, if:

  </p><dl class="switch">
   <dt><var>name</var> is undefined
   </dt><dt><var>name</var> is equal to <var>cookie</var>’s <code>cookie-name</code>
   </dt><dd><p>Add an attribute to the <code>attribute-list</code> of <var>cookie</var>
    with <code>attribute-name</code> of <code>Expires</code>,
    and set its value to a time in the past.
  </p></dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Delete Cookie -->
</section> <!-- /Cookies -->

<section id="interactions" typeof="bibo:Chapter" resource="#interactions" property="bibo:hasPart">
<!--OddPage--><h2 id="h-interactions" resource="#h-interactions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16. </span>Interactions</span></h2>

<div class="issue" id="issue-37"><div class="issue-title" aria-level="3" role="heading" id="h-issue37"><span>Issue 37</span></div><p class=""><strong>Warning:</strong>
 This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><p>The WebDriver API offers two ways of interacting with elements,
 either with a set of low-level "do as I say" actions, or a
 high-level "do as I mean" set of actions. The former are offered to
 allow precise emulation of user input. The latter are offered as a
 convenience to cover the common case, and can conceivably be
 implemented on top of the lower level primitive operations.

</p><p>Interactions can be used to emulate single input actions as well as
 multiple, simultaneous actions.

  <br>
  </p><h2 id="terms">Terms:</h2>
  <br>
  <b>(NOTE: these are by no means the final terms, I needed them to make the prose easier to follow)</b>
  <br>
  <br>
  <dfn data-dfn-type="dfn" id="dfn-low-level-action">low-level action:</dfn> The smallest operation an input source can do. These are used to build chains of actions. Example: keyDown
  <br>
  <dfn data-dfn-type="dfn" id="dfn-action-chain">action chain:</dfn> A chain of low-level actions
  <br>
  <dfn data-dfn-type="dfn" id="dfn-input-source">input source:</dfn> The source from which the inputs will originate. <em class="rfc2119" title="MUST">MUST</em> support 'keyboard', 'mouse' and 'touch'
  <br>
  <b>source:</b> The object currently acting on the source. For example, in a 'touch' environment, if two fingers are acting on a touchscreen, you will have two sources of input.
  <br>
  <section typeof="bibo:Chapter" resource="#interactable" property="bibo:hasPart">
    <h3 id="interactable" resource="#interactable"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.1 </span>Interactable elements</span></h3>
    <p>User actions that operate on an element require the element to be interactable. The following conditions must be met for the element to be considered interactable:
    </p><ul>
      <li>The element <em class="rfc2119" title="MUST">MUST</em> be displayed, as defined in <a href="#determining-if-displayed">section 10.1</a>.</li>
      <li>The element <em class="rfc2119" title="MUST NOT">MUST NOT</em> be disabled. "Disabled" is defined as:
      <ul>
        <li>If the current document is being processed as an HTML document, the element <em class="rfc2119" title="MUST">MUST</em> be considered disabled if it does not support
        the <a href="http://www.w3.org/TR/html401/interact/forms.html#adef-disabled">disabled</a>
        attribute (according to the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] spec), or if the
        disabled attribute is set in the case where that attribute is present.</li>
      </ul>
      </li>
    </ul>
    </section>

    <section id="low-level-actions" typeof="bibo:Chapter" resource="#low-level-actions" property="bibo:hasPart">
      <h3 id="h-low-level-actions" resource="#h-low-level-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2 </span>Low-Level Actions</span></h3>
      <br>
      The low level actions provide a mechanism for precisely stating how a user can interact with the browser.
      This is achieved by sending a chain of low-level commands to a single endpoint.
      For example, if you wish to automate a drag and drop action in a browser, you would chain
      the pointerDown, pointerMove, pointerUp and release commands together.
      <br>
      <br>
      The remote end will receive the action chain, execute them, and will return a response to the local end once the entire
      action sequence has been dispatched.
      <br>
      <br>
      The set of actions available to you is depending on the input source. For example, on a keyboard
      you want to have a keyDown action to simulate pressing a specific key on the keyboard, but this
      is not a valid action on a touchscreen, where we care about pointer actions relative to coordinates or webelements.
      <br>
      <div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note10"><span>Note</span></div><p class="">
        <a href="http://www.w3.org/TR/DOM-Level-3-Events/#glossary-activation-trigger">Activation triggers</a> generated by the WebDriver API User <em class="rfc2119" title="SHOULD">SHOULD</em> be indistinguishable from those generated by a real user
        interacting with the browser. In particular, the dispatched events will have the <a href="http://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a> attribute set to true. The most robust way to dispatch these events is by creating them in the browser implementation itself. Sending OS-specific input messages to the browser's window has the disadvantage that the browser being automated may not be properly isolated from a user accidentally modifying input source state; use of an OS-level accessibility API has the disadvantage that the browser's window must be focused, and as a result, multiple tests cannot run in parallel.
      </p></div>
      <br>
      <section typeof="bibo:Chapter" resource="#actions-endpoint" property="bibo:hasPart">
        <h4 id="actions-endpoint" resource="#actions-endpoint"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1 </span>Actions Endpoint</span></h4>
        <section id="sending-an-action" typeof="bibo:Chapter" resource="#sending-an-action" property="bibo:hasPart">
          <h5 id="h-sending-an-action" resource="#h-sending-an-action"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.1 </span>Sending an Action</span></h5>
          <table class="simple jsoncommand">
            <tbody><tr>
            <th>HTTP Method</th>
              <th>Path Template</th>
            </tr>
            <tr>
              <td>POST</td>
              <td>/session/{<var>session id</var>}/actions</td>
            </tr>
          </tbody></table>
          <br>
          The 'actions' endpoint expects a list of objects as input. Each object in this list <em class="rfc2119" title="MUST">MUST</em> contain the fellowing members:
          <br>
          <br>
          <b>Source</b>
          <br>
          <br>
          <div class="issue" id="issue-38"><div class="issue-title" aria-level="6" role="heading" id="h-issue38"><span>Issue 38</span></div><p class="">Use symbols?
          </p></div><p>The "source" member will hold a string value to represent the input source. Implementations <em class="rfc2119" title="MUST">MUST</em> support "keyboard", "mouse", and "touch", and can be extended for any other input source.
          <br>
          <br>
          <b>id</b>
          <br>
          <br>
          This is a locally-assigned unique identifier. It will be used by the remote end to differentiate dispatched actions. For example, if you have a "touch" action with id "1" to represent one finger actively pressed on a screen, then you can dispatch another "touch" action with id "2" to represent a second finger on a screen, acting simultaneously.
          <br>
          <br>
          <b>actions</b>
          <br>
          <br>
          This holds a list of objects, where each object represents a low-level command. The list order dictates the order in which each command will be dispatched. Each command <em class="rfc2119" title="MUST">MUST</em> have a 'name' member, whose value will hold the name of the command. More information on each command is in the action <a href="#action-commands">commands</a> section.
          <br>
          <br>
          So the structure will look as follows:
          </p><pre>            [
              {
                "source": "string",
                "id": "string",
                "actions": [
                          { "name": "string: name of action primitive",
                            ... parameters to action commands...
                          },
                ]
              }
            ]
          </pre>
          <br>
          A list of dictionary objects are used so that we may use this same endpoint for <a href="#parallel-actions">parallel actions</a>.
          <br>
          There is one endpoint for all input source's action chains.
        </section>
        <section id="releasing-all-actions" typeof="bibo:Chapter" resource="#releasing-all-actions" property="bibo:hasPart">
          <h5 id="h-releasing-all-actions" resource="#h-releasing-all-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.2 </span>Releasing all actions</span></h5>
          <table class="simple jsoncommand">
            <tbody><tr>
            <th>HTTP Method</th>
              <th>Path Template</th>
            </tr>
            <tr>
              <td>DELETE</td>
              <td>/session/{<var>session id</var>}/actions</td>
            </tr>
          </tbody></table>
          <br>
          <br>
          Use this command to clear all actions that are currently being performed. ALL actions currently being performed <em class="rfc2119" title="MUST">MUST</em> be cancelled via pointerCancel if it is a "mouse" or "touch" source or via keyUp if it is a "keyboard" source.
          <br>
          <br>
          <b>NOTE: 'release' as a single command was removed since 'keyUp' and 'pointerUp'/'pointerCancel' exist and 'release' conflates them</b>
        </section>
        <section typeof="bibo:Chapter" resource="#action-commands" property="bibo:hasPart">
          <h5 id="action-commands" resource="#action-commands"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.3 </span>Actions</span></h5>
          This section describes the objects that are part of the "actions" member of the JSON structure sent to the "actions" endpoint.
          <section id="general-actions" typeof="bibo:Chapter" resource="#general-actions" property="bibo:hasPart">
            <h6 id="h-general-actions" resource="#h-general-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.3.1 </span>General Actions</span></h6>
            All input sources <em class="rfc2119" title="MUST">MUST</em> implement the following action:
            <br>
            <br>
            <b>pause</b>
            <br>
            <br>
            <div class="issue" id="issue-39"><div class="issue-title" aria-level="7" role="heading" id="h-issue39"><span>Issue 39</span></div><p class="">Or <em class="rfc2119" title="MAY">MAY</em>, since we can default to 0 on remote end?
            </p></div><p>The "pause" action <em class="rfc2119" title="MUST">MUST</em> take in a parameter named "duration" which will be the time to wait either in milliseconds or using a symbol. This action is used to indicate a period of time to wait between actions, and will also be used to indicate a period of inaction in <a href="#parallel-actions">parallel action chains</a>.
            <br>
            <br>
            If you wish to use a system specific wait period, please use the following symbols:
              </p><ul>
                <li><b>"CONTEXT"</b> - wait for contextmenu</li>
                <li><b>"CHAINED_EVENT"</b> - wait period to join related events. For example, this should be used to join events for doubleclicking.</li>
              </ul>
              <br>
              The remote end is responsible for translating these symbols to the platform specific periods.

          </section>
          <section id="keyboard-actions" typeof="bibo:Chapter" resource="#keyboard-actions" property="bibo:hasPart">
            <h6 id="h-keyboard-actions" resource="#h-keyboard-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.3.2 </span>Keyboard Actions</span></h6>
            The following are actions that must be implemented for the "keyboard" input source. Their names will be used as the value to the "name" member of the data sent to the 'actions' endpoint. Each actions parameters are additional members to the object that "name" is a member of.
            <br>
            <br>
            <b>keyDown</b>
            <br>
            <br>
            The "keyDown" requires a parameter named "code" whose value will be one of the codes from the <a href="#character-types">character types</a> table. This action will send a "keyDown" event, with the specified key as a target.
            <br>
            <br>
            <b>keyUp</b>
            <br>
            <br>
            The "keyUp" requires a parameter named "code" whose value will be one of the codes from the <a href="#character-types">character types</a> table. This action will send a "keyUp" event, with the specified key as a target.
            <br>
          </section>

          <section id="pointer-actions" typeof="bibo:Chapter" resource="#pointer-actions" property="bibo:hasPart">
            <h6 id="h-pointer-actions" resource="#h-pointer-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.3.3 </span>Pointer Actions</span></h6>
            <p>The following are actions that must be implemented for both "mouse" and "touch" input sources. Any future pointer-based source must implement these actions.
            </p><p><b>NOTE: conflating mouse and touch causes the pointerMove/pointerDown to events to be confusing and lacks verisimilitude:</b> If you want to tap at element1, then that would mean 'put finger down on element1, remove finger from element1', for a tap, we have to decide if we want to send 'pointerMove, pointerDown, pointerUp' or 'pointerDown, pointerUp'. The latter matches the touch events sent (touchStart,touchEnd), and makes sense for touchscreens because there is no active button state (http://www.w3.org/TR/pointerevents/#glossary) until you dispatch a touchstart. sending a JSON structure with pointerMove, pointerDown, pointerUp for something that gets mapped to touchstart/touchend feels inelegant. We can enforce the following instead:
            </p><ul>
            <li>if the "source" is mouse, then pointerMove,pointerDown,pointerUp  is sent over the wire
            </li><li>if the "source" is touch, then pointerDown,pointerUp is sent over the wire.
            </li><li>if the "source" is anything else (stylus, or other), it will be defined later.
            </li></ul>
            <p>The ramifications of this proposal would be that pointerDown must accept the parameters that pointerMove does (ie: ELEMENT, etc.).
            </p><p><b>pointerMove</b>
            </p><p>The "pointerMove" action is used to move the pointer to a specific location on a page. In "mouse" sources, this would dispatch a "mouseMove" event. In "touch" sources, then if there is an active pointerDown action, this will generate a "touchmove" or "pointermove" event. For "touch" sources, pointerMove must not be called before pointerDown, since pointer sources only have move events once they are active on the screen.
            </p><p>When sending a "pointerMove", one of the following parameter sets <em class="rfc2119" title="MUST">MUST</em> be used:
            </p><ul>
              <li><b>"ELEMENT"</b> - "ELEMENT" will hold a WebElement's id, and this will dispatch the event to the center of that element, unless the following set of parameters is also included:
              <ul>
                <li><b>"x"</b> - Integer, the x-coordinate relative to the top-left corner of the target WebElement. If this is not specifed, the midpoint of the width is used</li>
                <li><b>"y"</b> - Integer, the y-coordinate relative to the top-left corner of the target WebElement. If this is not specifed, the midpoint of the height is used</li>
              </ul>
              <ul>
                <li><b>"x" and "y"</b> - Integers, the coordinates relative to the top-left corner of the ???.
              </li></ul>
            <div class="issue" id="issue-40"><div class="issue-title" aria-level="7" role="heading" id="h-issue40"><span>Issue 40</span></div><p class="">Viewport, or top-left of root element?
            </p></div></li></ul>
            <p><b>pointerDown</b>
            </p><p>The "pointerDown" action is used to start an interaction on the page. In "mouse" sources, this would mean "mouseDown", in "touch" sources, this would mean "touchstart" or "pointerdown".
            </p><p>For "touch" sources, the following parameters must be passed:
            </p><ul>
              <li><b>"ELEMENT"</b> - "ELEMENT" will hold a WebElement's id, and this will dispatch the event to the center of that element, unless the following optional set of parameters is also included:
              <ul>
                <li><b>"x"</b> - Integer, the x-coordinate relative to the top-left corner of the target WebElement. If this is not specifed, the midpoint of the width is used</li>
                <li><b>"y"</b> - Integer, the y-coordinate relative to the top-left corner of the target WebElement. If this is not specifed, the midpoint of the height is used</li>
              </ul>
            </li></ul>
            <p>For "mouse" sources, the following parameter must be passed:
            </p><ul>
              <li><b>"BUTTON"</b> - "BUTTON" will hold a value describing which mouse button should be depressed.
               <p class="issuee">Link to button chart
            </p></li></ul>
            <p><b>pointerUp</b>
            </p><p>The "pointerUp" action is used to start an interaction on the page. In "mouse" sources, this would mean "mouseUp", in "touch" sources, this would mean dispatching an event like "touchend" or "pointerup".
            </p><p>Takes no parameters
            </p><p><b>pointerCancel</b>
            </p><p>The "pointerMove" action is used to cancel an active pointer on the page. In "mouse" sources, this would mean "mouseUp", in "touch" sources, it implies cancelling the current action if possible by dispatching an event like "touchcancel" or "pointercancel".
          </p></section>

<section id="parallel-actions" typeof="bibo:Chapter" resource="#parallel-actions" property="bibo:hasPart">
<h6 id="h-parallel-actions" resource="#h-parallel-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.2.1.3.4 </span>Parallel Actions</span></h6>

<p>Parallel actions are those that have
 more than one action acting simultaneously on the browser.
 An example of this is using multiple fingers
 to operate on a tablet screen at the same time.

</p><p>Dispatching a parallel action also uses
 the <a href="#actions-endpoint">actions endpoint</a>.
 In order to send a parallel action,
 append multiple dictionaries to the list of dictionary objects.
 Each dictionary will hold all the actions from one input source.
 The list of actions each dictionary contains will be executed together in ticks,
 by stepping through each input source's action list
 in order and executing each step simultaneously.

</p><p>The best way to understand this is through an example.
 Imagine we have two fingers acting on a touchscreen.
 One finger will press down on element1
 at the same moment that another finger presses down on element2.
 Once these actions are done, the first finger will wait 5 seconds
 while the other finger moves to element3.
 Then both fingers release from the touchscreen.

</p><p>To execute these actions,
 we must send the "actions" endpoint two dictionary objects
 in the JSON list of dictionaries, one for each finger.
 We must use the "id" key of each object to uniquely identify each finger.
 The "actions" key will hold all the actions the input source will take.

</p><p>The JSON for this set of actions is as follows:

</p><p></p><pre>[
  {
    "source": "touch",
    "id": "1",
    "actions": [
              { "name": "pointerDown",
                "ELEMENT": "element1"
              },
              { "name": "pause",
                "duration": 0
              },
              { "name": "pointerUp"
              }
    ]
  },
  {
    "source": "touch",
    "id": "2",
    "actions": [
              { "name": "pointerDown",
                "ELEMENT": "element2"
              },
              { "name": "pointerMove",
                "ELEMENT": "element3"
              },
              { "name": "pointerUp"
              }
    ]
  }
]</pre>

<p>When the remote end receives this,
 it will look at each input source's action lists.
 It will dispatch the first action of each source together,
 then the second actions together, and lastly, the final actions together.

</p><p>The diagram below displays when each action gets executed.
 "Source 1" is the first finger, and "source 2" is the second.

</p><p><img src="graphics/note1actions.svg" alt="">

</p><p>There is no limit to the number of input sources,
 and there is no restriction regarding the length of each input's action list.
 Meaning, there is no requirement that all action lists have to be the same length.
 It is possible for one input source's action list
 may have more actions than another.
 As an example, imagine having two fingers on a touchscreen.
 The first finger will press on element1 while the second presses on element2,
 then the first will release the touchscreen while the second finger moves to element3,
 and finally the second finger releases from the touchscreen.
 In this case, the action list for the first finger contains 2 actions (pointerDown, pointerUp),
 and the action list for the second finger contains 3 (pointerDown, pointerMove, pointerUp).
 In this case, the JSON will look like this:

</p><p></p><pre>[
  {
    "source": "touch",
    "id": "1",
    "actions": [
              { "name": "pointerDown",
                "ELEMENT": "element1"
              },
              { "name": "pointerUp"
              }
    ]
  },
  {
    "source": "touch",
    "id": "2",
    "actions": [
              { "name": "pointerDown",
                "ELEMENT": "element2"
              },
              { "name": "pointerMove",
                "ELEMENT": "element3"
              },
              { "name": "pointerUp"
              }
    ]
  }
]</pre>

<p>And the execution of each action will be done as follows:

</p><p><img src="graphics/note4actions.svg" alt="">

</p><p>Specific timing for the actions can also be expressed.
 The "pause" action can be used to either a) indicate
 a specific amount of time an input source must wait, or b)
 can be used to signify that the current input source must wait
 until all other actions in the tick are completed.
 For the former case, the current tick being executed must wait
 for the longest pause to complete.
 For example, in this diagram:

</p><p><img src="graphics/note2actions.svg" alt="">

</p><p>The remote end will dispatch the pointerDown actions in the first tick.
 In the second tick, since source 1 declares a pause of 5 seconds,
 the remote end will dispatch the pointerUp event for source 2,
 and will wait 5 seconds before moving on to executing the third tick.

</p><p>In the event that one tick contains multiple pause durations,
 the remote end will wait the maximum duration
 before moving on to executing the next tick.

</p><p>As noted before, "pause" can be used to signify inaction during a tick.
 If "pause" is declared without a time period,
 then the input source will not have any actions executed in the containing tick.
 As an example:

</p><p><img src="graphics/note3actions.svg" alt="">

</p><p>During tick 2, source 1 will have its pointerMove action dispatched,
 while source 2 will do nothing.
</p></section> <!-- /Parallel Actions -->
</section> <!-- /Actions -->
</section> <!-- /Actions Endpoint -->
</section> <!-- /Low-Level Actions -->

    <section id="high-level-commands" typeof="bibo:Chapter" resource="#high-level-commands" property="bibo:hasPart">
      <h3 id="h-high-level-commands" resource="#h-high-level-commands"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3 </span>High Level Commands</span></h3>
        <p>These higher level commands <em class="rfc2119" title="SHOULD">SHOULD</em> be built on top of the low level commands, and implement a user friendly way of interacting with a page in a way that models common user expectations.

        </p><section typeof="bibo:Chapter" resource="#high-level-click" property="bibo:hasPart">
          <h4 id="high-level-click" resource="#high-level-click"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.1 </span>Clicking</span></h4>
          <section id="click" typeof="bibo:Chapter" resource="#click" property="bibo:hasPart">
            <!-- click() -->
            <h5 id="h-click" resource="#h-click"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.1.1 </span>click()</span></h5>
            <table class="simple jsoncommand">
              <tbody><tr>
                <th>HTTP Method</th>
                <th>Path Template</th>
              </tr>
              <tr>
                <td>POST</td>
                <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/click</td>
              </tr>
            </tbody></table>
            <p>Click in the middle of the WebElement instance. The middle of the element is defined as the middle of the box returned by
            calling <code><a href="http://www.w3.org/TR/cssom-view/#the-getclientrects()-and-getboundingclientrect()-methods">getBoundingClientRect</a></code>
            on the underlying document Element, according to the [<cite><a class="bibref" href="#bib-CSSOM-VIEW">CSSOM-VIEW</a></cite>] spec. If
            the element is outside the <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a>
            (according to the [<cite><a class="bibref" href="#bib-CSS21">CSS21</a></cite>] spec), the implementation <em class="rfc2119" title="SHOULD">SHOULD</em> bring the
            element into view first. The implementation <em class="rfc2119" title="MAY">MAY</em> invoke <code>scrollIntoView</code> on
            the underlying document Element. The element <em class="rfc2119" title="MUST">MUST</em> be <a href="#determining-if-displayed">displayed</a>. See the note below for when the element is obscured by another element.
            Exceptions:
            </p><ul>
              <li>Links (A elements): Clicking happens in the middle of the first
                <a href="#determining-if-displayed">displayed</a> bounding client rectangle. This is to overcome overflowing links where the middle of the bounding client rectangle does not actually fall on a clickable part of the link.</li>
              <li>SELECT elements without the "multiple" attribute set.
                Clicking on the select element <em class="rfc2119" title="SHOULD">SHOULD</em> open the drop down menu. The next
                click, on any element, <em class="rfc2119" title="MUST">MUST</em> close this menu.</li>
              <li>Clicking directly on an OPTION element (without clicking on the
                parent SELECT element previously) <em class="rfc2119" title="MUST">MUST</em> open a selection menu, as if the
                SELECT option was clicked first, then click on the OPTION before finally
                closing the SELECT element's menu. The SELECT menu <em class="rfc2119" title="MUST">MUST</em> be closed
                once the action is complete.</li>
            </ul>
            <p>The possible errors for this command:
            </p><ul>
              <li><code><a href="#status-stale-element-reference">stale element reference</a></code> if the given element is no longer in the <a href="http://dom.spec.whatwg.org/#in-a-document">document</a>.</li>
              <li><code><a href="#status-element-not-visible">element not visible</a></code> if the element is hidden and thus cannot be interacted with.</li>
              <li><code><a href="#status-move-target-out-of-bounds">move target out of bounds</a></code> if the element cannot be scrolled into view.</li>
            </ul>

          <p>This command <em class="rfc2119" title="MUST">MUST</em> use either the mouse or touch mechanisms for
            emulating the user input. In the case where the browser being automated
            supports only mouse input or both mouse and touch input, the low-level
            mouse mechanisms <em class="rfc2119" title="MUST">MUST</em> be used. If the browser only supports touch input,
            the low level touch inputs <em class="rfc2119" title="MUST">MUST</em> be used.</p>

          <div class="note"><div class="note-title" aria-level="6" role="heading" id="h-note11"><span>Note</span></div><p class="">As the goal is to emulate users as closely as possible, the
            implementation <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> allow clicking on elements that are obscured by
            other elements. If the implementation forbids clicking on obscured elements,
            an <code><a href="#status-element-not-visible">element not visible</a></code> response <em class="rfc2119" title="MUST">MUST</em> be returned and this <em class="rfc2119" title="SHOULD">SHOULD</em> have an
            explanatory message explaining the reason. The implementation <em class="rfc2119" title="SHOULD">SHOULD</em> try to
            scroll the element into view, but in case it is fully obscured, it <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> be clickable.

           </p></div><div class="issue" id="issue-41"><div class="issue-title" aria-level="6" role="heading" id="h-issue41"><span>Issue 41</span></div><p class="">Add details of interactable
          </p></div></section>
        </section>
        <section id="touch" typeof="bibo:Chapter" resource="#touch" property="bibo:hasPart">
          <h4 id="h-touch" resource="#h-touch"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.2 </span>Touch</span></h4>
          <p>This section defines the low level commands used when manipulating touch-enabled devices. These are the building blocks of touch interaction chains.</p>
          <!--<p>NOTE: would like to add pressure/tilt, but that isn't in Touch Events (http://www.w3.org/TR/touch-events/), will have to wait for Pointer Event adoption</p>-->
          <table class="simple">
            <tbody><tr><td>Capability Name</td><td>Type</td></tr>
            <tr><td><span id="capability-touchEnabled">touchEnabled</span></td><td>boolean</td></tr>
          </tbody></table>
          <br>
          <br>
          <section id="void-tap" typeof="bibo:Chapter" resource="#void-tap" property="bibo:hasPart">
            <!-- Tap -->
            <h5 id="h-void-tap" resource="#h-void-tap"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.2.1 </span>void tap ()</span></h5>
            <table class="simple jsoncommand">
              <tbody><tr>
                <th>HTTP Method</th>
                <th>Path Template</th>
              </tr>
              <tr>
                <td>POST</td>
                <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/tap</td>
              </tr>
            </tbody></table>
            <p>Tap in the middle of the WebElement. The middle of the element is defined as the middle of the box returned by
              calling <code><a href="http://www.w3.org/TR/cssom-view/#the-getclientrects()-and-getboundingclientrect()-methods">getBoundingClientRect</a></code>
              on the underlying document Element, according to the [<cite><a class="bibref" href="#bib-CSSOM-VIEW">CSSOM-VIEW</a></cite>] spec. If
              the element is outside the <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a>
              (according to the [<cite><a class="bibref" href="#bib-CSS21">CSS21</a></cite>] spec), the implementation <em class="rfc2119" title="SHOULD">SHOULD</em> bring the
              element into view first. The implementation <em class="rfc2119" title="MAY">MAY</em> invoke <code>scrollIntoView</code> on
              the underlying document Element.
              Exceptions:
              </p><ul>
                <li>Links (A elements): Clicking happens in the middle of the first
                  <a href="#determining-if-displayed">displayed</a> bounding client rectangle. This is to overcome overflowing links where the middle of the bounding client rectangle does not actually fall on a clickable part of the link.</li>
                <li>SELECT elements without the "multiple" attribute set.
                  Clicking on the select element <em class="rfc2119" title="SHOULD">SHOULD</em> open the drop down menu. The next
                  click, on any element, <em class="rfc2119" title="MUST">MUST</em> close this menu.</li>
                <li>Clicking directly on an OPTION element (without clicking on the
                  parent SELECT element previously) <em class="rfc2119" title="MUST">MUST</em> open a selection menu, as if the
                  SELECT option was clicked first, then click on the OPTION before finally
                  closing the SELECT element's menu. The SELECT menu <em class="rfc2119" title="MUST">MUST</em> be closed
                  once the action is complete.</li>
              </ul>
              <p>The possible errors for this command:
              </p><ul>
                <li><code><a href="#status-stale-element-reference">stale element reference</a></code> if the given element is no longer in the <a href="http://dom.spec.whatwg.org/#in-a-document">document</a>.</li>
                <li><code><a href="#status-move-target-out-of-bounds">move target out of bounds</a></code> if the element cannot be scrolled into view.</li>
              </ul>
            </section>
        </section>
      <section typeof="bibo:Chapter" resource="#typing_keys" property="bibo:hasPart">
        <h4 id="typing_keys" resource="#typing_keys"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.3 </span>Typing keys</span></h4>
        <p>A requirement for key-based interaction with an element is that it is
          <a href="#interactable">interactable</a>. Typing into an element is permitted if one of the following conditions is met:
            </p><ul>
              <li>The element is <a href="http://dev.w3.org/html5/spec/editing.html#focus">focusable</a> as defined in the editing section of the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] spec.</li>
              <li>The element is allowed to be the <code><a href="http://www.w3.org/html/wg/drafts/html/master/editing.html#dom-document-activeelement">activeElement</a></code>. In
              addition to focusable elements, this allows typing to the <code>BODY</code> element.</li>
              <li>In an HTML document, the element is <a href="http://dev.w3.org/html5/spec/editing.html#attr-contenteditable">editable</a> as a result of having its <code>contentEditable</code> attribute set or the containing document is in <code>designMode</code>.</li>
              <li>The underlying browser implementation would allow keyboard input to
              directed to the element (eg. an HTML document with a DIV marked as being
              contentEditable)</li>
            </ul>
        <p>Prior to any keyboard interaction, an attempt to shift focus to the
        element <em class="rfc2119" title="MUST">MUST</em> be attempted if the element does not currently have the focus. This is the case if one of the following
        holds:
        </p><ul>
          <li>The element is not already the document's <code><a href="http://www.w3.org/html/wg/drafts/html/master/editing.html#dom-document-activeelement">activeElement</a></code>.</li>
          <li>The owner document of the element to be interacted with is not the focused document.</li>
        </ul>
        <p>In case focusing is needed, the implementation <em class="rfc2119" title="MUST">MUST</em> follow the <a href="http://dev.w3.org/html5/spec/editing.html#focus-management"><b>focusing steps</b></a> as described in the focus management section of the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] spec. The focus <em class="rfc2119" title="MUST NOT">MUST NOT</em> leave the element at the end of the interaction, other than as a result of the interaction itself (i.e. when the tab key is sent).
        </p>
        <section id="clear" typeof="bibo:Chapter" resource="#clear" property="bibo:hasPart">
          <h5 id="h-clear" resource="#h-clear"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.3.1 </span>clear()</span></h5>
          <p>Clear a TEXTAREA or text INPUT element's value.
            </p><table class="simple jsoncommand">
              <tbody><tr>
                <th>HTTP Method</th>
                <th>Path Template</th>
              </tr>
              <tr>
                <td>POST</td>
                <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/clear</td>
              </tr>
            </tbody></table>
        </section>
        <section id="sendkeys" typeof="bibo:Chapter" resource="#sendkeys" property="bibo:hasPart">
          <!-- sendKeys() -->
          <h5 id="h-sendkeys" resource="#h-sendkeys"><span property="xhv:role" resource="xhv:heading"><span class="secno">16.3.3.2 </span>sendKeys()</span></h5>
          <p>
            </p><table class="simple jsoncommand">
              <tbody><tr>
                <th>HTTP Method</th>
                <th>Path Template</th>
              </tr>
              <tr>
                <td>POST</td>
                <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/value</td>
              </tr>
            </tbody></table>
            <p> Let <var>value</var> be an array of characters that will be typed into a WebElement.

            </p><p>Sends a sequence of keyboard events representing the keys in the value parameter.
            </p><p>Caret positioning: If focusing was needed, after following the focusing steps, the caret <em class="rfc2119" title="MUST">MUST</em> be positioned at the end of the text currently in the element. At the end of the interaction, the caret <em class="rfc2119" title="MUST">MUST</em> be positioned at the end of the typed text sequence, unless the keys sent position it otherwise (e.g. using the LEFT key).</p>
            <p>There are four different types of keys that are emulated:
            </p><ul>
              <li>Character literals - lower-case symbols.</li>
              <li>Uppercase letters and symbols requiring the SHIFT key for typing.</li>
              <li>Modifier keys</li>
              <li>Special keys</li>
            </ul>
            The rest of this section details the values used to represent the different keys, as well as the expected behaviour for each key type.
        </section>
        <p>When emulating user input, the implementation <em class="rfc2119" title="MUST">MUST</em> generate
        the same sequence of events that would have been produced if a real user was
        sitting in front of the keyboard and typing the sequence of characters. In
        cases where there is more than one way to type this sequence, the
        implementation <em class="rfc2119" title="MUST">MUST</em> choose one of the valid ways. For example, typing <code>AB</code> may be achieved by:
        </p><ul>
          <li>Holding down the Shift key</li>
          <li>Pressing the letter 'a'</li>
          <li>Pressing the letter 'b'</li>
          <li>Releasing the Shift key</li>
        </ul>
        Alternatively, it can be achieved by:
        <ul>
          <li>Holding down the Shift key</li>
          <li>Pressing the letter 'a'</li>
          <li>Releasing the Shift key</li>
          <li>Holding down the Shift key</li>
          <li>Pressing the letter 'b'</li>
          <li>Releasing the Shift key</li>
        </ul>
        <p>Or by simply turning on the CAPS LOCK first.</p>
        <p>
        The implementation <em class="rfc2119" title="MAY">MAY</em> use the following algorithm to generate the events.
        If the implementation is using a different algorithm, it <em class="rfc2119" title="MUST">MUST</em> adhere to the
        requirements listed below.
        </p><p>For each key, <var>key</var> in <var>value</var>, do
        </p><ol>
          <li>If <var>key</var> is a lower-case symbol:
          <ol>
            <li>If the Shift key is not pressed:
              <ol>
                <li>Generate a sequence of <code>keydown</code>, <code>keypress</code> and <code>keyup</code> events with
                <var>key</var> as
                the character to emulate</li>
              </ol>
            </li>
            <li>else (The Shift key is pressed)
              <ol>
                <li>let <var>uppercaseKey</var> be the upper-case character matching
                <var>key</var></li>
                <li>Generate a sequence of <code>keydown</code>, <code>keypress</code> and <code>keyup</code> events with
                <var>uppercaseKey</var> as the character to emulate</li>
              </ol>
            </li>
          </ol>
        </li>
        <li>Else if <var>key</var> is an upper-case symbol:
          <ol>
            <li>If the Shift key is not pressed:
            <ol>
              <li>Generate a <code>keydown</code> event of the Shift key.
              </li><li>Generate a sequence of <code>keydown</code>, <code>keypress</code> and <code>keyup</code> events with
              <var>key</var> as
              the character to emulate</li>
              <li>Generate a <code>keyup</code> event of the Shift key.
            </li></ol>
          </li>
          <li>else (The Shift key is pressed)
            <ol>
              <li>Generate a sequence of <code>keydown</code>, <code>keypress</code> and <code>keyup</code> events with
              <var>key</var> as the character to emulate</li>
            </ol>
          </li>
        </ol>
      </li>
      <li>Else if <var>key</var> represents a modifier key:
        <ol>
          <li>let <var>modifier</var> be the modifier key represented by
          <var>key</var></li>
          <li>If <var>modifier</var> is currently held down:
        <ol>
      <li>Generate a <code>keyup</code> event of <var>modifier</var></li>
    </ol>
  </li>
  <li>Else:
    <ol>
      <li>Generate a <code>keydown</code> event of <var>modifier</var></li>
    </ol>
  </li>
  <li>Maintain this key state and use it to modify the input until it is pressed again.</li>
</ol>
      </li>
      <li>Else if <var>key</var> represents the NULL key:
      <ol>
        <li>Generate <code>keyup</code> events of all modifier keys currently held
        down.</li>
        <li>All modifier keys are now assumed to be released.</li>
      </ol>
      </li>
      <li>Else if <var>key</var> represents a special key:
      <ol>
        <li>Translate <var>key</var> to the special key it represents</li>
        <li>Generate a sequence of <code>keydown</code>, <code>keypress</code> and <code>keyup</code> events for the special key.</li>
      </ol>
      </li>
    </ol>
    <p>Once keyboard input is complete, an implicit <var>NULL</var> key is sent unless the
    final character is the <var>NULL</var> key.</p>
    <p> <!-- Pseudo-code --></p>
    <p>Any implementation <em class="rfc2119" title="MUST">MUST</em> comply with these requirements:
    </p><ul>
      <li>For uppercase letters and symbols that require the Shift key to be
      pressed, there are two options:
      <ul>
        <li>A single Shift <code>keydown</code> event is generated before the entire
        sequence of uppercase letters.</li>
        <li>Before each such letter or symbol, a Shift <code>keydown</code> event is
        generated. After each letter or symbol, a Shift <code>keyup</code> event is
        generated.</li>
      </ul></li>
      <li>A user-specified Shift press implies capitalization of all following
      characters.</li>
      <li>If a user-specified Shift press precedes uppercase letters and
      symbols, a second Shift <code>keydown</code> event <em class="rfc2119" title="MUST NOT">MUST NOT</em> be generated. In that
      case, a Shift <code>keyup</code> event <em class="rfc2119" title="MUST NOT">MUST NOT</em> be generated implicitly by the
      implementation.</li>
      <li>The <var>NULL</var> key releases all currently held down modifier keys.</li>
      <li>The state of all modifier keys must be reset at the end of each
      <code>sendKeys</code> call and the appropriate <code>keyup</code> events
      generated</li>
    </ul>
    <p> <!-- Algorithm paragraph --></p>
    <h4 id="character-types">Character types</h4>
    <p>The <var>value</var> parameter contains a mix of printable
    characters and pressable keys that aren't text. Pressable keys that aren't
    text are stored in the Unicode PUA (Private Use Area) code points,
    0xE000-0xF8FF. The following table describes the mapping between PUA and
    key:
    </p><table class="simple">
      <tbody><tr>
        <th>Key</th>
        <th>Code</th>
        <th>Type</th>
      </tr>
      <tr><td>NULL</td><td>\uE000</td><td>NULL</td></tr>
      <tr><td>CANCEL</td><td>\uE001</td><td>Special key</td></tr>
      <tr><td>HELP</td><td>\uE002</td><td>Special key</td></tr>
      <tr><td>BACK_SPACE</td><td>\uE003</td><td>Special key</td></tr>
      <tr><td>TAB</td><td>\uE004</td><td>Special key</td></tr>
      <tr><td>CLEAR</td><td>\uE005</td><td>Special key</td></tr>
      <tr><td>RETURN</td><td>\uE006</td><td>Special key</td></tr>
      <tr><td>ENTER</td><td>\uE007</td><td>Special key</td></tr>
      <tr><td>SHIFT</td><td>\uE008</td><td>Modifier</td></tr>
      <tr><td>CONTROL</td><td>\uE009</td><td>Modifier</td></tr>
      <tr><td>ALT</td><td>\uE00A</td><td>Modifier</td></tr>
      <tr><td>PAUSE</td><td>\uE00B</td><td>Special key</td></tr>
      <tr><td>ESCAPE</td><td>\uE00C</td><td>Special key</td></tr>
      <tr><td>SPACE</td><td>\uE00D</td><td>Special key</td></tr>
      <tr><td>PAGE_UP</td><td>\uE00E</td><td>Special key</td></tr>
      <tr><td>PAGE_DOWN</td><td>\uE00F</td><td>Special key</td></tr>
      <tr><td>END</td><td>\uE010</td><td>Special key</td></tr>
      <tr><td>HOME</td><td>\uE011</td><td>Special key</td></tr>
      <tr><td>ARROW_LEFT</td><td>\uE012</td><td>Special key</td></tr>
      <tr><td>ARROW_UP</td><td>\uE013</td><td>Special key</td></tr>
      <tr><td>ARROW_RIGHT</td><td>\uE014</td><td>Special key</td></tr>
      <tr><td>ARROW_DOWN</td><td>\uE015</td><td>Special key</td></tr>
      <tr><td>INSERT</td><td>\uE016</td><td>Special key</td></tr>
      <tr><td>DELETE</td><td>\uE017</td><td>Special key</td></tr>
      <tr><td>SEMICOLON</td><td>\uE018</td><td>Special key</td></tr>
      <tr><td>EQUALS</td><td>\uE019</td><td>Special key</td></tr>
      <tr><td>NUMPAD0</td><td>\uE01A</td><td>Special key</td></tr>
      <tr><td>NUMPAD1</td><td>\uE01B</td><td>Special key</td></tr>
      <tr><td>NUMPAD2</td><td>\uE01C</td><td>Special key</td></tr>
      <tr><td>NUMPAD3</td><td>\uE01D</td><td>Special key</td></tr>
      <tr><td>NUMPAD4</td><td>\uE01E</td><td>Special key</td></tr>
      <tr><td>NUMPAD5</td><td>\uE01F</td><td>Special key</td></tr>
      <tr><td>NUMPAD6</td><td>\uE020</td><td>Special key</td></tr>
      <tr><td>NUMPAD7</td><td>\uE021</td><td>Special key</td></tr>
      <tr><td>NUMPAD8</td><td>\uE022</td><td>Special key</td></tr>
      <tr><td>NUMPAD9</td><td>\uE023</td><td>Special key</td></tr>
      <tr><td>MULTIPLY</td><td>\uE024</td><td>Special key</td></tr>
      <tr><td>ADD</td><td>\uE025</td><td>Special key</td></tr>
      <tr><td>SEPARATOR</td><td>\uE026</td><td>Special key</td></tr>
      <tr><td>SUBTRACT</td><td>\uE027</td><td>Special key</td></tr>
      <tr><td>DECIMAL</td><td>\uE028</td><td>Special key</td></tr>
      <tr><td>DIVIDE</td><td>\uE029</td><td>Special key</td></tr>
      <tr><td>F1</td><td>\uE031</td><td>Special key</td></tr>
      <tr><td>F2</td><td>\uE032</td><td>Special key</td></tr>
      <tr><td>F3</td><td>\uE033</td><td>Special key</td></tr>
      <tr><td>F4</td><td>\uE034</td><td>Special key</td></tr>
      <tr><td>F5</td><td>\uE035</td><td>Special key</td></tr>
      <tr><td>F6</td><td>\uE036</td><td>Special key</td></tr>
      <tr><td>F7</td><td>\uE037</td><td>Special key</td></tr>
      <tr><td>F8</td><td>\uE038</td><td>Special key</td></tr>
      <tr><td>F9</td><td>\uE039</td><td>Special key</td></tr>
      <tr><td>F10</td><td>\uE03A</td><td>Special key</td></tr>
      <tr><td>F11</td><td>\uE03B</td><td>Special key</td></tr>
      <tr><td>F12</td><td>\uE03C</td><td>Special key</td></tr>
      <tr><td>META</td><td>\uE03D</td><td>Special key</td></tr>
      <tr><td>COMMAND</td><td>\uE03D</td><td>Special key</td></tr>
      <tr><td>ZENKAKU_HANKAKU</td><td>\uE040</td><td>Special key</td></tr>
    </tbody></table>
    <p>The keys considered upper-case symbols are either defined by the current keyboard locale or are derived from the US 104 keys Microsoft Windows keyboard layout, which are:
    </p><ul>
      <li>A - Z</li>
      <li>!$^*()+{}:?|~@#%_\" &amp; &lt; &gt;</li>
    </ul>
    <p>When the user input is emulated natively (see note below), the implementation <em class="rfc2119" title="SHOULD">SHOULD</em> use the current keyboard locale to determine which symbols are upper case. In all other cases, the implementation <em class="rfc2119" title="MUST">MUST</em> use the US 104 key Microsoft Windows keyboard layout to determine those symbols.</p>
    <p>The state of the physical keyboard <em class="rfc2119" title="MUST NOT">MUST NOT</em> affect emulated user input.</p>
    <h3 id="internationalized-input">Internationalized input</h3>
    <p>Non-latin symbols: TBD</p>
    <p>Complex scripts using Input Method Editor (IME): TBD</p>
  </section> <!-- sendkeys end -->
 </section> <!-- /High-Level APIs -->
</section> <!-- /Interactions -->

<section id="user-prompts" typeof="bibo:Chapter" resource="#user-prompts" property="bibo:hasPart">
<!--OddPage--><h2 id="h-user-prompts" resource="#h-user-prompts"><span property="xhv:role" resource="xhv:heading"><span class="secno">17. </span>User Prompts</span></h2>

<p><i>Non-normative summary:</i>

</p><p>This chapter describes interaction with various types of <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompts</a>.
 The common denominator for user prompts is that they are
 modal windows requiring users to interact with them
 before the <a href="#dfn-event-loop" class="internalDFN" data-link-type="dfn">event loop</a> is <a href="#dfn-pause" class="internalDFN" data-link-type="dfn">unpaused</a>
 and control is returned to the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>.

</p><p>By default <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompts</a> are not handled automatically
 unless a <a href="#dfn-user-prompt-handler" class="internalDFN" data-link-type="dfn">user prompt handler</a> has been defined.
 When a <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompt</a> appears,
 it is the task of the subsequent <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> to handle it.
 If the subsequent requested <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> is not one listed in this chapter,
 an <a href="#dfn-unexpected-alert-open" class="internalDFN" data-link-type="dfn">unexpected alert open</a> <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> will be returned.

</p><p><a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">User prompts</a> that are spawned
 from <code>onbeforeunload</code> event handlers,
 are <a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">dismissed</a> implicitly upon <a data-lt="get" href="#dfn-get" class="internalDFN" data-link-type="dfn">navigation</a>,
 regardless of the defined <a href="#dfn-user-prompt-handler" class="internalDFN" data-link-type="dfn">user prompt handler</a>.

</p><p>The following <dfn data-dfn-type="dfn" id="dfn-table-of-simple-dialogues">table of simple dialogues</dfn>
 enumerates all supported <a href="#dfn-simple-dialogues" class="internalDFN" data-link-type="dfn">simple dialogues</a>,
 along with the <a href="#dfn-command" class="internalDFN" data-link-type="dfn">commands</a> that are allowed to interact with it
 as a non-normative reference:

</p><table class="simple">
 <tbody><tr>
  <th>Definition
  </th><th>Dialogue
  </th><th>Interactions
 </th></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-alert">Alert</dfn>
  </td><td><a href="#dfn-window.alert" class="internalDFN" data-link-type="dfn">window.<code>alert</code></a>
  </td><td>
   <a href="#dfn-accept-alert" class="internalDFN" data-link-type="dfn">Accept Alert</a><br>
   <a href="#dfn-dismiss-alert" class="internalDFN" data-link-type="dfn">Dismiss Alert</a><br>
   <a href="#dfn-get-alert-text" class="internalDFN" data-link-type="dfn">Get Alert Text</a>
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-confirm">Confirm</dfn>
  </td><td><a href="#dfn-window.confirm" class="internalDFN" data-link-type="dfn">window.<code>confirm</code></a>
  </td><td>
   <a href="#dfn-dismiss-alert" class="internalDFN" data-link-type="dfn">Dismiss Alert</a><br>
   <a href="#dfn-accept-alert" class="internalDFN" data-link-type="dfn">Accept Alert</a><br>
   <a href="#dfn-get-alert-text" class="internalDFN" data-link-type="dfn">Get Alert Text</a>
 </td></tr>

 <tr>
  <td><dfn data-dfn-type="dfn" id="dfn-prompt">Prompt</dfn>
  </td><td><a href="#dfn-window.prompt" class="internalDFN" data-link-type="dfn">window.<code>prompt</code></a>
  </td><td>
   <a href="#dfn-dismiss-alert" class="internalDFN" data-link-type="dfn">Dismiss Alert</a><br>
   <a href="#dfn-accept-alert" class="internalDFN" data-link-type="dfn">Accept Alert</a><br>
   <a href="#dfn-get-alert-text" class="internalDFN" data-link-type="dfn">Get Alert Text</a><br>
   <a href="#dfn-send-alert-text" class="internalDFN" data-link-type="dfn">Send Alert Text</a>
 </td></tr>
</tbody></table>

<div class="issue" id="issue-42"><div class="issue-title" aria-level="3" role="heading" id="h-issue42"><span>Issue 42</span></div><p class="">It’s not clear what interoperability looks like
 for the ability to switch top-level browsing contexts
 whilst a user prompt is present.

</p></div><p>The <dfn data-dfn-type="dfn" id="dfn-current-user-prompt">current user prompt</dfn> is said to be the active <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompt</a>,
 which can be one of the entries on the <a href="#dfn-table-of-simple-dialogues" class="internalDFN" data-link-type="dfn">table of simple dialogues</a>,
 the <a href="#dfn-window.print" class="internalDFN" data-link-type="dfn">window.<code>print</code></a> dialogue,
 or a dialogue spawned by <a href="#dfn-showmodaldialog" class="internalDFN" data-link-type="dfn"><code>showModalDialog()</code></a>
 should this be supported by the user agent.

</p><p>To <dfn data-dfn-type="dfn" id="dfn-dismiss">dismiss</dfn>
 the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
 do so as if the user would click the <b>Cancel</b> or <b>OK</b> button,
 whichever is present, in that order.

</p><p>To <dfn data-dfn-type="dfn" id="dfn-accept">accept</dfn> the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
 do so as if the user would click the <b>OK</b> button.

</p><p>A <dfn data-dfn-type="dfn" id="dfn-user-prompt-handler">user prompt handler</dfn> is an <a href="#dfn-enumerated-attribute" class="internalDFN" data-link-type="dfn">enumerated attribute</a>
 defining what action the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must take
 when a <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompt</a> is encountered.
 The following table lists the keywords and states for the attribute:

</p><table class="simple">
 <tbody><tr>
  <th>Keyword
  </th><th>State
  </th><th>Description
 </th></tr>

 <tr>
  <td>"<code>dismiss</code>"
  </td><td><dfn data-dfn-type="dfn" id="dfn-dismiss-state">Dismiss state</dfn>
  </td><td>All <a href="#dfn-simple-dialogues" class="internalDFN" data-link-type="dfn">simple dialogues</a> encountered should be <a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">dismissed</a>.
 </td></tr>

 <tr>
  <td>"<code>accept</code>"
  </td><td><dfn data-dfn-type="dfn" id="dfn-accept-state">Accept state</dfn>
  </td><td>All <a href="#dfn-simple-dialogues" class="internalDFN" data-link-type="dfn">simple dialogues</a> encountered should be <a href="#dfn-accept" class="internalDFN" data-link-type="dfn">accepted</a>.
 </td></tr>
</tbody></table>

<p>In order to <dfn data-dfn-type="dfn" id="dfn-handle-any-user-prompts">handle any user prompts</dfn>
 a <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must take the following steps:

</p><ol>
 <li><p>If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  abort these steps and return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.

 </p></li><li><p>Match on the <a href="#dfn-user-prompt-handler" class="internalDFN" data-link-type="dfn">user prompt handler</a>:

  </p><dl class="switch">
   <dt><a href="#dfn-dismiss-state" class="internalDFN" data-link-type="dfn">dismiss state</a>
   </dt><dd><p><a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">Dismiss</a> the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>.

   </p></dd><dt><a href="#dfn-accept-state" class="internalDFN" data-link-type="dfn">accept state</a>
   </dt><dd><p><a href="#dfn-accept" class="internalDFN" data-link-type="dfn">Accept</a> the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>.

   </p></dd><dt><a href="#dfn-missing-value-default-state" class="internalDFN" data-link-type="dfn">missing value default state</a>
   </dt><dt>not in the <a href="#dfn-table-of-simple-dialogues" class="internalDFN" data-link-type="dfn">table of simple dialogues</a>
   </dt><dd><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a>
    <a href="#dfn-unexpected-alert-open" class="internalDFN" data-link-type="dfn">unexpected alert open</a>.
  </p></dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a>.
</p></li></ol>

<section id="dismiss-alert" typeof="bibo:Chapter" resource="#dismiss-alert" property="bibo:hasPart">
<h3 id="h-dismiss-alert" resource="#h-dismiss-alert"><span property="xhv:role" resource="xhv:heading"><span class="secno">17.1 </span>Dismiss Alert</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/dismiss</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-dismiss-alert">Dismiss Alert</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">dismisses</a> a <a href="#dfn-simple-dialogues" class="internalDFN" data-link-type="dfn">simple dialogue</a>
 if <a data-lt="current user prompt" href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">present</a>.
 A request to <a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">dismiss</a> an <a href="#dfn-alert" class="internalDFN" data-link-type="dfn">alert</a> <a href="#dfn-user-prompt" class="internalDFN" data-link-type="dfn">user prompt</a>,
 which may not necessarily have a dismiss button,
 has the same effect as <a href="#dfn-accept" class="internalDFN" data-link-type="dfn">accepting</a> it.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-alert" class="internalDFN" data-link-type="dfn">no such alert</a>.

 </p></li><li><p><a href="#dfn-dismiss" class="internalDFN" data-link-type="dfn">Dismiss</a> the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section>

<section id="accept-alert" typeof="bibo:Chapter" resource="#accept-alert" property="bibo:hasPart">
<h3 id="h-accept-alert" resource="#h-accept-alert"><span property="xhv:role" resource="xhv:heading"><span class="secno">17.2 </span>Accept Alert</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/accept</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-accept-alert">Accept Alert</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 <a href="#dfn-accept" class="internalDFN" data-link-type="dfn">accepts</a> a <a href="#dfn-simple-dialogues" class="internalDFN" data-link-type="dfn">simple dialogue</a>
 if <a data-lt="current user prompt" href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">present</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-alert" class="internalDFN" data-link-type="dfn">no such alert</a>.

 </p></li><li><p><a href="#dfn-accept" class="internalDFN" data-link-type="dfn">Accept</a> the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section>

<section id="get-alert-text" typeof="bibo:Chapter" resource="#get-alert-text" property="bibo:hasPart">
<h3 id="h-get-alert-text" resource="#h-get-alert-text"><span property="xhv:role" resource="xhv:heading"><span class="secno">17.3 </span>Get Alert Text</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/alert/text</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-get-alert-text">Get Alert Text</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 returns the message of the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>.
 If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>, it returns with null.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-alert" class="internalDFN" data-link-type="dfn">no such alert</a>.

 </p></li><li><p>Let <var>message</var> be the text message
  associated with the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  or otherwise be null.

 </p></li><li><p>Let <var>body</var> be a JSON Object with the
  "<code>value</code>" property set to <var>message</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section>

<section id="send-alert-text" typeof="bibo:Chapter" resource="#send-alert-text" property="bibo:hasPart">
<h3 id="h-send-alert-text" resource="#h-send-alert-text"><span property="xhv:role" resource="xhv:heading"><span class="secno">17.4 </span>Send Alert Text</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>POST</td>
  <td>/session/{<var>session id</var>}/alert/text</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-send-alert-text">Send Alert Text</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 sets the text field prompt to a given value,
 and only makes sense on <a href="#dfn-window.prompt" class="internalDFN" data-link-type="dfn">window.<code>prompt</code></a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>If there is no <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-alert" class="internalDFN" data-link-type="dfn">no such alert</a>.

 </p></li><li><p>Match on <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>:

  </p><dl class="switch">
   <dt><a href="#dfn-alert" class="internalDFN" data-link-type="dfn">alert</a>
   </dt><dt><a href="#dfn-confirm" class="internalDFN" data-link-type="dfn">confirm</a>
   </dt><dd><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with
    <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-element-not-visible" class="internalDFN" data-link-type="dfn">element not visible</a>.

   </p></dd><dt><a href="#dfn-prompt" class="internalDFN" data-link-type="dfn">prompt</a>
   </dt><dd><p>Do nothing.

   </p></dd><dt>Otherwise
   </dt><dd><p>Return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with
    <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unsupported-operation" class="internalDFN" data-link-type="dfn">unsupported operation</a>.
  </p></dd></dl>

 </li><li><p>Let <var>character array</var> be the result of
  <a href="#dfn-getting-a-property" class="internalDFN" data-link-type="dfn">getting a property</a> <code>message</code>
  from the <var>parameters</var> argument.

 </p></li><li><p>Let <var>message</var> be the result of
  joining together each element in <var>character array</var> to a string.

 </p></li><li><p>Set the <a href="#dfn-current-user-prompt" class="internalDFN" data-link-type="dfn">current user prompt</a>’s text field value
  to the value of <var>message</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Send Alert Text -->
</section> <!-- /User Prompts -->

<section id="screen-capture" typeof="bibo:Chapter" resource="#screen-capture" property="bibo:hasPart">
<!--OddPage--><h2 id="h-screen-capture" resource="#h-screen-capture"><span property="xhv:role" resource="xhv:heading"><span class="secno">18. </span>Screen Capture</span></h2>

<p>Screenshots are a mechanism for providing
 additional visual diagnostic information.
 They work by dumping a snapshot of the <a href="#dfn-initial-viewport" class="internalDFN" data-link-type="dfn">initial viewport</a>’s
 framebuffer as a lossless PNG image.
 It is returned to the <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a> as a Base64 encoded string.

</p><p>WebDriver provides the <a href="#dfn-take-screenshot" class="internalDFN" data-link-type="dfn">Take Screenshot</a> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 to capture the <a href="#dfn-top-level-browsing-context" class="internalDFN" data-link-type="dfn">top-level browsing context</a>’s <a href="#dfn-initial-viewport" class="internalDFN" data-link-type="dfn">initial viewport</a>,
 and a <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a> <a href="#dfn-take-element-screenshot" class="internalDFN" data-link-type="dfn">Take Element Screenshot</a>
 for doing the same with the visible region of an <a href="#dfn-element" class="internalDFN" data-link-type="dfn">element</a>’s
 <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">bounding rectangle</a> after it has been <a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">scrolled into view</a>.

</p><p>In order to <dfn data-dfn-type="dfn" id="dfn-draw-a-bounding-box-from-the-framebuffer">draw a bounding box from the framebuffer</dfn>,
 given a <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">rectangle</a>:

</p><ol>
 <li><p>If either the <a href="#dfn-initial-viewport" class="internalDFN" data-link-type="dfn">initial viewport</a>’s width or height
  is 0 <a href="#dfn-css-reference-pixels" class="internalDFN" data-link-type="dfn">CSS reference pixels</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-capture-screen" class="internalDFN" data-link-type="dfn">unable to capture screen</a>.

 </p></li><li><p>Let <var>paint width</var> be the <a href="#dfn-initial-viewport" class="internalDFN" data-link-type="dfn">initial viewport</a>’s width –
  min(<a href="#dfn-rectangle-x-coordinate" class="internalDFN" data-link-type="dfn">rectangle x coordinate</a>,
  <a href="#dfn-rectangle-x-coordinate" class="internalDFN" data-link-type="dfn">rectangle x coordinate</a> + <a href="#dfn-rectangle-width-dimension" class="internalDFN" data-link-type="dfn">rectangle width dimension</a>).

 </p></li><li><p>Let <var>paint height</var> be the <a href="#dfn-initial-viewport" class="internalDFN" data-link-type="dfn">initial viewport</a>’s height –
  min(<a href="#dfn-rectangle-y-coordinate" class="internalDFN" data-link-type="dfn">rectangle y coordinate</a>,
  <a href="#dfn-rectangle-y-coordinate" class="internalDFN" data-link-type="dfn">rectangle y coordinate</a> + <a href="#dfn-rectangle-height-dimension" class="internalDFN" data-link-type="dfn">rectangle height dimension</a>).

 </p></li><li><p>Let <var>canvas</var> be a new <a href="#dfn-canvas-element" class="internalDFN" data-link-type="dfn"><code>canvas</code> element</a>,
  and set its <a data-lt="canvas width attribute" href="#dfn-width" class="internalDFN" data-link-type="dfn">width</a>
  and <a data-lt="canvas height attribute" href="#dfn-height" class="internalDFN" data-link-type="dfn">height</a>
  to <var>paint width</var> and <var>paint height</var>, respectively.

 </p></li><li><p>Let <var>context</var>, a <a href="#dfn-canvas-context-mode" class="internalDFN" data-link-type="dfn">canvas context mode</a>,
  be the result of invoking the <a href="#dfn-x2d-context-creation-algorithm" class="internalDFN" data-link-type="dfn">2D context creation algorithm</a>
  given <var>canvas</var> as the target.

 </p></li><li><p>Complete implementation specific steps equivalent to
  drawing the region of the framebuffer
  specified by the following coordinates onto <var>context</var>:

  </p><dl>
   <dt>X coordinate
   </dt><dd><a href="#dfn-rectangle-x-coordinate" class="internalDFN" data-link-type="dfn">rectangle x coordinate</a>

   </dd><dt>Y coordinate
   </dt><dd><a href="#dfn-rectangle-y-coordinate" class="internalDFN" data-link-type="dfn">rectangle y coordinate</a>

   </dd><dt>Width
   </dt><dd><var>paint width</var>

   </dd><dt>Height
   </dt><dd><var>paint height</var>
  </dd></dl>

 </li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with <var>canvas</var>.
</p></li></ol>

<p>To <dfn data-dfn-type="dfn" id="dfn-encode-as-base64-a-canvas-element">encode as Base64 a <code>canvas</code> element</dfn>:

</p><ol>
 <li><p>If the <a href="#dfn-canvas-element" class="internalDFN" data-link-type="dfn"><code>canvas</code> element</a>’s bitmap’s
  <a href="#dfn-origin-clean" class="internalDFN" data-link-type="dfn">origin-clean</a> flag is set to false,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-capture-screen" class="internalDFN" data-link-type="dfn">unable to capture screen</a>.

 </p></li><li><p>If the <a href="#dfn-canvas-element" class="internalDFN" data-link-type="dfn"><code>canvas</code> element</a>’s bitmap
  has no pixels (i.e. either its horizontal dimension of its vertical dimension is zero)
  then return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-unable-to-capture-screen" class="internalDFN" data-link-type="dfn">unable to capture screen</a>.

 </p></li><li><p>Let <var>file</var> be
  a <a href="#dfn-a-serialisation-of-the-bitmap-as-a-file" class="internalDFN" data-link-type="dfn">a serialisation of the <code>canvas</code> element’s bitmap as a file</a>,
  using "<code>image/png</code>" as an argument.

 </p></li><li><p>Let <var>data url</var> be a <a href="#dfn-data-url" class="internalDFN" data-link-type="dfn"><code>data:</code> URL</a>
  representing <var>file</var>. [<cite><a class="bibref" href="#bib-RFC2397">RFC2397</a></cite>]

 </p></li><li><p>Let <var>index</var> be the <a href="#dfn-index-of" class="internalDFN" data-link-type="dfn">index of</a> "<code>,</code>"
  in <var>data url</var>.

 </p></li><li><p>Let <var>encoded string</var> be a <a href="#dfn-substring" class="internalDFN" data-link-type="dfn">substring</a>
  of <var>data url</var> using (<var>index</var> + 1) as the <i>start</i> argument.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>encoded string</var>.
</p></li></ol>

<section id="take-screenshot" typeof="bibo:Chapter" resource="#take-screenshot" property="bibo:hasPart">
<h3 id="h-take-screenshot" resource="#h-take-screenshot"><span property="xhv:role" resource="xhv:heading"><span class="secno">18.1 </span>Take Screenshot</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/screenshot</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-take-screenshot">Take Screenshot</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 takes a screenshot of the
 <a href="#">top-level browsing context</a>’s
 <a href="#">viewport</a>.

</p><p>The <a href="#dfn-remote-end-steps" class="internalDFN" data-link-type="dfn">remote end steps</a> are:

</p><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li>Let <var>root rect</var> be the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a>’s
  <a href="#dfn-document-element" class="internalDFN" data-link-type="dfn">document element</a>’s <a href="#dfn-rectangle" class="internalDFN" data-link-type="dfn">rectangle</a>.

 </li><li><p>Let <var>screenshot result</var> be the result of calling
  <a href="#dfn-draw-a-bounding-box-from-the-framebuffer" class="internalDFN" data-link-type="dfn">draw a bounding box from the framebuffer</a>,
  given <var>root rect</var> as an argument.

 </p></li><li><p>If <var>screenshot result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>screenshot result</var>.

 </p></li><li><p>Let <var>canvas</var> be <var>screenshot result</var>’s data.

 </p></li><li><p>Let <var>encoding result</var> be the result of
  <a href="#dfn-encode-as-base64-a-canvas-element" class="internalDFN" data-link-type="dfn">encoding as Base64</a> the <var>canvas</var> element.

 </p></li><li><p>If <var>encoding result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>encoding result</var>.

 </p></li><li><p>Let <var>encoded string</var> be <var>encoding result</var>’s data.

 </p></li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" property set to <var>encoded string</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data null.
</p></li></ol>
</section> <!-- /Take Screenshot -->

<section id="take-element-screenshot" typeof="bibo:Chapter" resource="#take-element-screenshot" property="bibo:hasPart">
<h3 id="h-take-element-screenshot" resource="#h-take-element-screenshot"><span property="xhv:role" resource="xhv:heading"><span class="secno">18.2 </span>Take Element Screenshot</span></h3>

<table class="simple jsoncommand">
 <tbody><tr>
  <th>HTTP Method</th>
  <th>Path Template</th>
 </tr>
 <tr>
  <td>GET</td>
  <td>/session/{<var>session id</var>}/element/{<var>element id</var>}/screenshot</td>
 </tr>
</tbody></table>

<p>The <dfn data-dfn-type="dfn" id="dfn-take-element-screenshot">Take Element Screenshot</dfn> <a href="#dfn-command" class="internalDFN" data-link-type="dfn">command</a>
 takes a screenshot of the visible region encompassed
 by the bounding rectangle of an <a href="#">element</a>,
 after it has been scrolled into view.
</p><div class="issue" id="issue-43"><div class="issue-title" aria-level="4" role="heading" id="h-issue43"><span>Issue 43</span></div><p class="">Microsoft have requested previously that there be a parameter to
  prevent scrolling. Not sure if this is still a requirement.
</p></div><ol>
 <li><p>If the <a href="#dfn-current-top-level-browsing-context" class="internalDFN" data-link-type="dfn">current top-level browsing context</a> is <a href="#dfn-no-longer-open" class="internalDFN" data-link-type="dfn">no longer open</a>,
  return <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a> with <a href="#dfn-error-code" class="internalDFN" data-link-type="dfn">error code</a> <a href="#dfn-no-such-window" class="internalDFN" data-link-type="dfn">no such window</a>.

 </p></li><li><p>Let <var>element result</var> be the result of
  <a href="#dfn-get-a-known-element" class="internalDFN" data-link-type="dfn">getting a known element</a> by
  <a href="#dfn-universally-unique-identifier-uuid" class="internalDFN" data-link-type="dfn">UUID</a> reference parameter <var>element id</var>.

 </p></li><li><p>If <var>element result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>element result</var>.

 </p></li><li><p>Let <var>element</var> be <var>element result</var>’s data.

 </p></li><li><p>Let <var>element rect</var> be <var>element</var>’s
  <a href="https://drafts.fxtf.org/geometry/#rectangle">rectangle</a>.

 </p></li><li><p><a href="#dfn-scrolled-into-view" class="internalDFN" data-link-type="dfn">Scroll into view</a> the <var>element</var>.

 </p></li><li><p>Let <var>screenshot result</var> be the result of calling
  <a href="#dfn-draw-a-bounding-box-from-the-framebuffer" class="internalDFN" data-link-type="dfn">draw a bounding box from the framebuffer</a>,
  given <var>element rect</var> as an argument.

 </p></li><li><p>If <var>screenshot result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>screenshot result</var>.

 </p></li><li><p>Let <var>canvas</var> be <var>screenshot result</var>’s data.

 </p></li><li><p>Let <var>encoding result</var> be the result of
  <a href="#dfn-encode-as-base64-a-canvas-element" class="internalDFN" data-link-type="dfn">encoding as Base64</a> the <var>canvas</var> element.

 </p></li><li><p>If <var>encoding result</var> is an <a href="#dfn-error" class="internalDFN" data-link-type="dfn">error</a>,
  return <var>encoding result</var>.

 </p></li><li><p>Let <var>encoded string</var> be <var>encoding result</var>’s data.

 </p></li><li><p>Let <var>body</var> be a JSON Object
  with the "<code>value</code>" property set to <var>encoded string</var>.

 </p></li><li><p>Return <a href="#dfn-success" class="internalDFN" data-link-type="dfn">success</a> with data <var>body</var>.
</p></li></ol>
</section> <!-- /Take Element Screenshot -->
</section> <!-- /Screen Capture -->


<section class="appendix" id="thread-safety" typeof="bibo:Chapter" resource="#thread-safety" property="bibo:hasPart">
<!--OddPage--><h2 id="h-thread-safety" resource="#h-thread-safety"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Thread Safety</span></h2>

<div class="issue" id="issue-44"><div class="issue-title" aria-level="3" role="heading" id="h-issue44"><span>Issue 44</span></div><p class=""><strong>Warning:</strong>
 This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><p>There is no requirement for <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local</a>
 or <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote</a> implementations to be thread safe.
 <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">Local ends</a> <em class="rfc2119" title="SHOULD">SHOULD</em> support serialized access from multiple threads.
</p></section>

<section class="appendix" id="privacy" typeof="bibo:Chapter" resource="#privacy" property="bibo:hasPart">
<!--OddPage--><h2 id="h-privacy" resource="#h-privacy"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>Privacy</span></h2>

<div class="issue" id="issue-45"><div class="issue-title" aria-level="3" role="heading" id="h-issue45"><span>Issue 45</span></div><p class=""><strong>Warning:</strong>
 This section has not yet been redefined to match the <a href="#dfn-request-routing" class="internalDFN" data-link-type="dfn">routing requests</a> model,
 and uses old concepts and definitions.
 Please do not rely on it yet.

</p></div><p>The following section is non-normative.

</p><p>The local end <em class="rfc2119" title="SHOULD">SHOULD</em> create a new profile when creating a <a href="#dfn-new-session" class="internalDFN" data-link-type="dfn">new session</a>.
 If a new profile can be created it <em class="rfc2119" title="MUST NOT">MUST NOT</em> copy the profile in use
 and <em class="rfc2119" title="MUST">MUST</em> create a fresh profile.
 By creating a new profile the user agent
 will prevent any unexpected behaviour
 when the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> is accessing content.
</p></section>

<section class="appendix" id="security" typeof="bibo:Chapter" resource="#security" property="bibo:hasPart">
<!--OddPage--><h2 id="h-security" resource="#h-security"><span property="xhv:role" resource="xhv:heading"><span class="secno">C. </span>Security</span></h2>

<p>A user agent may rely on a command-line flag
 or a configuration option to test whether to enable WebDriver.
 Another option is to make the user agent initiate or confirm
 the connection through a privileged content document or control widget,
 in case the user agent does not directly implement the HTTP endpoints.

</p><p>To prevent arbitrary machines from connecting and creating <a href="#dfn-session" class="internalDFN" data-link-type="dfn">sessions</a>,
 only connections from loopback devices are allowed by default.
 <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">Remote ends</a> do however support a scenario
 where the <a href="#dfn-local-end" class="internalDFN" data-link-type="dfn">local end</a> runs on a different machine
 from the <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a>.

</p><p>The <a href="#dfn-remote-end" class="internalDFN" data-link-type="dfn">remote end</a> must include a configuration option
 to limit the accepted IP range allowed to connect and make requests.
 The default setting for this should be
 to limit connections to the IPv4 localhost CIDR range <code>127.0.0.0/8</code>
 and the IPv6 localhost address <code>::1</code>. [<cite><a class="bibref" href="#bib-RFC4632">RFC4632</a></cite>]
</p></section>

<section class="appendix" id="acknowledgements" typeof="bibo:Chapter" resource="#acknowledgements" property="bibo:hasPart">
<!--OddPage--><h2 id="h-acknowledgements" resource="#h-acknowledgements"><span property="xhv:role" resource="xhv:heading"><span class="secno">D. </span>Acknowledgements</span></h2>

<p>Many thanks to Robin Berjon for making our lives so much easier with his cool tool.
 Thanks to Jason Leyba, Malcolm Rowe, Ross Patterson, Andrey Botalov, and Berge Schwebs Bjørlo for proof reading
 and suggesting areas for improvement.
 Thanks to Jason Leyba, Eran Messeri, Daniel Wagner-Hall, Malini Das, Luke Inman-Semerau,
 Andreas Tolfsen, James Graham, and John Jansen for contributing sections to this document.
 Also thanks to the following people for their contribution of patches and test cases:

 </p><ul>
  <li>Philippe Le Hegaret
 </li></ul>
</section>
<form style="position: fixed; width: 10em; top: 1em; right: 2em; font-family: Tahoma, sans-serif; font-size: 65%; opacity: 0.8; text-align: right; " action="https://www.w3.org/Bugs/Public/enter_bug.cgi" target="_blank">Select text and <input type="submit" accesskey="f" value="file a bug"><input type="hidden" name="comment" value=""><input type="hidden" name="blocked" value="20860"><input type="hidden" name="product" value="Browser Test/Tools WG"><input type="hidden" name="component" value="WebDriver"> or <a href="http://www.w3.org/Bugs/Public/showdependencytree.cgi?id=20860" target="_blank">view bugs filed</a></form><section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart"><!--OddPage--><h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E. </span>References</span></h2><section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart"><h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">E.1 </span>Normative references</span></h3><dl class="bibliography" resource=""><dt id="bib-CSS-CASCADE-4">[CSS-CASCADE-4]</dt><dd>Elika Etemad; Tab Atkins Jr.. <a href="http://www.w3.org/TR/css-cascade-4/" property="dc:requires"><cite>CSS Cascading and Inheritance Level 4</cite></a>. 8 September 2015. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css-cascade-4/" property="dc:requires">http://www.w3.org/TR/css-cascade-4/</a>
</dd><dt id="bib-CSS-DEVICE-ADAPT">[CSS-DEVICE-ADAPT]</dt><dd>Rune Lillesveen. <a href="http://www.w3.org/TR/css-device-adapt/" property="dc:requires"><cite>CSS Device Adaptation</cite></a>. 15 September 2011. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css-device-adapt/" property="dc:requires">http://www.w3.org/TR/css-device-adapt/</a>
</dd><dt id="bib-CSS21">[CSS21]</dt><dd>Bert Bos; Tantek Çelik; Ian Hickson; Håkon Wium Lie et al. <a href="http://www.w3.org/TR/CSS2" property="dc:requires"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. 7 June 2011. W3C Recommendation. URL: <a href="http://www.w3.org/TR/CSS2" property="dc:requires">http://www.w3.org/TR/CSS2</a>
</dd><dt id="bib-CSS3-2D-TRANSFORMS">[CSS3-2D-TRANSFORMS]</dt><dd>Simon Fraser; Dean Jackson; David Hyatt; Chris Marrin; Edward O'Connor. <a href="http://www.w3.org/TR/css3-2d-transforms/" property="dc:requires"><cite>CSS 2D Transforms</cite></a>. 15 December 2011. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css3-2d-transforms/" property="dc:requires">http://www.w3.org/TR/css3-2d-transforms/</a>
</dd><dt id="bib-CSS3-3D-TRANSFORMS">[CSS3-3D-TRANSFORMS]</dt><dd>Dean Jackson; David Hyatt; Chris Marrin. <a href="http://www.w3.org/TR/css3-3d-transforms" property="dc:requires"><cite>CSS 3D Transforms Module Level 3</cite></a>. 20 March 2009. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css3-3d-transforms" property="dc:requires">http://www.w3.org/TR/css3-3d-transforms</a>
</dd><dt id="bib-CSS3-BOX">[CSS3-BOX]</dt><dd>Bert Bos. <a href="http://www.w3.org/TR/css3-box" property="dc:requires"><cite>CSS basic box model</cite></a>. 9 August 2007. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css3-box" property="dc:requires">http://www.w3.org/TR/css3-box</a>
</dd><dt id="bib-CSS3-DISPLAY">[CSS3-DISPLAY]</dt><dd>Tab Atkins Jr.; Elika Etemad. <a href="http://www.w3.org/TR/css-display-3/" property="dc:requires"><cite>CSS Display Module Level 3</cite></a>. 21 July 2015. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css-display-3/" property="dc:requires">http://www.w3.org/TR/css-display-3/</a>
</dd><dt id="bib-CSS3-VALUES">[CSS3-VALUES]</dt><dd>Tab Atkins Jr.; Elika Etemad. <a href="http://www.w3.org/TR/css-values/" property="dc:requires"><cite>CSS Values and Units Module Level 3</cite></a>. 11 June 2015. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/css-values/" property="dc:requires">http://www.w3.org/TR/css-values/</a>
</dd><dt id="bib-CSSOM-VIEW">[CSSOM-VIEW]</dt><dd>Simon Pieters; Glenn Adams. <a href="http://www.w3.org/TR/cssom-view/" property="dc:requires"><cite>CSSOM View Module</cite></a>. 17 December 2013. W3C Working Draft. URL: <a href="http://www.w3.org/TR/cssom-view/" property="dc:requires">http://www.w3.org/TR/cssom-view/</a>
</dd><dt id="bib-DOM">[DOM]</dt><dd>Anne van Kesteren; Aryeh Gregor; Ms2ger; Alex Russell; Robin Berjon. <a href="http://www.w3.org/TR/dom/" property="dc:requires"><cite>W3C DOM4</cite></a>. 18 June 2015. W3C Last Call Working Draft. URL: <a href="http://www.w3.org/TR/dom/" property="dc:requires">http://www.w3.org/TR/dom/</a>
</dd><dt id="bib-DOM-LEVEL-3-XPATH">[DOM-LEVEL-3-XPATH]</dt><dd>Ray Whitmer. <a href="http://www.w3.org/TR/DOM-Level-3-XPath/" property="dc:requires"><cite>Document Object Model (DOM) Level 3 XPath Specification</cite></a>. 26 February 2004. W3C Note. URL: <a href="http://www.w3.org/TR/DOM-Level-3-XPath/" property="dc:requires">http://www.w3.org/TR/DOM-Level-3-XPath/</a>
</dd><dt id="bib-ECMA-262">[ECMA-262]</dt><dd>Allen Wirfs-Brock. <a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires"><cite>ECMA-262 6th Edition, The ECMAScript 2015 Language Specification</cite></a>. June 2015. Standard. URL: <a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires">http://www.ecma-international.org/ecma-262/6.0/</a>
</dd><dt id="bib-FETCH">[FETCH]</dt><dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/" property="dc:requires"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/" property="dc:requires">https://fetch.spec.whatwg.org/</a>
</dd><dt id="bib-GEOMETRY-1">[GEOMETRY-1]</dt><dd>Simon Pieters; Dirk Schulze; Rik Cabanier. <a href="http://www.w3.org/TR/geometry-1/" property="dc:requires"><cite>Geometry Interfaces Module Level 1</cite></a>. 25 November 2014. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/geometry-1/" property="dc:requires">http://www.w3.org/TR/geometry-1/</a>
</dd><dt id="bib-HTML">[HTML]</dt><dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/" property="dc:requires"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/" property="dc:requires">https://html.spec.whatwg.org/multipage/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-RFC2397">[RFC2397]</dt><dd>L. Masinter. <a href="https://tools.ietf.org/html/rfc2397" property="dc:requires"><cite>The "data" URL scheme</cite></a>. August 1998. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc2397" property="dc:requires">https://tools.ietf.org/html/rfc2397</a>
</dd><dt id="bib-RFC4122">[RFC4122]</dt><dd>P. Leach; M. Mealling; R. Salz. <a href="https://tools.ietf.org/html/rfc4122" property="dc:requires"><cite>A Universally Unique IDentifier (UUID) URN Namespace</cite></a>. July 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4122" property="dc:requires">https://tools.ietf.org/html/rfc4122</a>
</dd><dt id="bib-RFC4632">[RFC4632]</dt><dd>V. Fuller; T. Li. <a href="https://tools.ietf.org/html/rfc4632" property="dc:requires"><cite>Classless Inter-domain Routing (CIDR): The Internet Address Assignment and Aggregation Plan</cite></a>. August 2006. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc4632" property="dc:requires">https://tools.ietf.org/html/rfc4632</a>
</dd><dt id="bib-RFC6265">[RFC6265]</dt><dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6265" property="dc:requires"><cite>HTTP State Management Mechanism</cite></a>. April 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6265" property="dc:requires">https://tools.ietf.org/html/rfc6265</a>
</dd><dt id="bib-RFC7230">[RFC7230]</dt><dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7230" property="dc:requires"><cite>Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</cite></a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7230" property="dc:requires">https://tools.ietf.org/html/rfc7230</a>
</dd><dt id="bib-SELECTORS-API">[SELECTORS-API]</dt><dd>Anne van Kesteren; Lachlan Hunt. <a href="http://www.w3.org/TR/selectors-api/" property="dc:requires"><cite>Selectors API Level 1</cite></a>. 21 February 2013. W3C Recommendation. URL: <a href="http://www.w3.org/TR/selectors-api/" property="dc:requires">http://www.w3.org/TR/selectors-api/</a>
</dd><dt id="bib-URI-TEMPLATE">[URI-TEMPLATE]</dt><dd>J. Gregorio; R. Fielding; M. Hadley; M. Nottingham; D. Orchard. <a href="https://tools.ietf.org/html/rfc6570" property="dc:requires"><cite>URI Template</cite></a>. March 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6570" property="dc:requires">https://tools.ietf.org/html/rfc6570</a>
</dd><dt id="bib-URL">[URL]</dt><dd>Anne van Kesteren; Sam Ruby. <a href="http://www.w3.org/TR/url-1/" property="dc:requires"><cite>URL</cite></a>. 9 December 2014. W3C Working Draft. URL: <a href="http://www.w3.org/TR/url-1/" property="dc:requires">http://www.w3.org/TR/url-1/</a>
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd>Cameron McCormack; Boris Zbarsky. <a href="http://www.w3.org/TR/WebIDL-1/" property="dc:requires"><cite>WebIDL Level 1</cite></a>. 4 August 2015. W3C Working Draft. URL: <a href="http://www.w3.org/TR/WebIDL-1/" property="dc:requires">http://www.w3.org/TR/WebIDL-1/</a>
</dd><dt id="bib-XPATH">[XPATH]</dt><dd>James Clark; Steven DeRose. <a href="http://www.w3.org/TR/xpath" property="dc:requires"><cite>XML Path Language (XPath) Version 1.0</cite></a>. 16 November 1999. W3C Recommendation. URL: <a href="http://www.w3.org/TR/xpath" property="dc:requires">http://www.w3.org/TR/xpath</a>
</dd><dt id="bib-html51">[html51]</dt><dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Tab Atkins Jr.; Simon Pieters; Yoav Weiss; Marcos Caceres; Mathew Marquis. <a href="http://www.w3.org/TR/html51/" property="dc:requires"><cite>HTML 5.1</cite></a>. 31 August 2015. W3C Working Draft. URL: <a href="http://www.w3.org/TR/html51/" property="dc:requires">http://www.w3.org/TR/html51/</a>
</dd></dl></section></section></body></html>
